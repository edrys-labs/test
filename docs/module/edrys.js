!function(e,t,r,n,i,s,o,l){var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},c="function"==typeof a[n]&&a[n],h=c.i||{},u=c.cache||{},d="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function f(t,r){if(!u[t]){if(!e[t]){if(i[t])return i[t];var s="function"==typeof a[n]&&a[n];if(!r&&s)return s(t,!0);if(c)return c(t,!0);if(d&&"string"==typeof t)return d(t);var o=Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}h.resolve=function(r){var n=e[t][1][r];return null!=n?n:r},h.cache={};var l=u[t]=new f.Module(t);e[t][0].call(l.exports,h,l,l.exports,a)}return u[t].exports;function h(e){var t=h.resolve(e);return!1===t?{}:f(t)}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.require=d,this.exports={}},f.modules=e,f.cache=u,f.parent=c,f.distDir=void 0,f.publicUrl=void 0,f.devServer=void 0,f.i=h,f.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(f,"root",{get:function(){return a[n]}}),a[n]=f;for(var p=0;p<t.length;p++)f(t[p]);if(r){var g=f(r);"object"==typeof exports&&"undefined"!=typeof module?module.exports=g:"function"==typeof define&&define.amd&&define(function(){return g})}}({"5Hf22":[function(e,t,r,n){var i,s=e("yjs"),o=e("msgpackr"),l=e("./streamHandler");let a="extern";var c=!1,h={onReady:!1,onUpdate:!1};function u(...e){window.Edrys.debug&&console.log(`Edrys (${window.Edrys.module.name||"not ready"}):`,...e)}function d(...e){console.warn(`Edrys (${window.Edrys.module.name}):`,...e)}window.addEventListener("unload",()=>{window.parent.postMessage({event:"reload",module:window.Edrys?.module.url},window.Edrys?.origin||"*")}),window.Edrys={origin:"*",ready:!1,role:void 0,username:void 0,liveClass:void 0,liveRoom:void 0,liveUser:void 0,module:void 0,class_id:void 0,debug:!1,rtcConfig:null,onReady(e){h.onReady=!0,window.Edrys.ready?(u("READY"),e(window.Edrys)):window.addEventListener("$Edrys.ready",t=>{u("READY"),e(window.Edrys)})},onUpdate(e){h.onUpdate=!0,window.addEventListener("$Edrys.update",t=>{window.Edrys.ready&&(u("UPDATE"),e(window.Edrys))})},onMessage(e,t=!1){window.addEventListener("$Edrys.message",r=>{if(!t&&r.detail.module!=window.Edrys.module?.url)return;let n=r.detail;if(!n?._decoded)try{n.body=function(e){try{let t=atob(e),r=new Uint8Array([...t].map(e=>e.charCodeAt(0)));return(0,o.unpack)(r)}catch(e){throw e}}(n.body),n._decoded=!0}catch(e){d("Error decoding message =>",n,e);return}u("RECEIVED MESSAGE",n.subject,n.body),e(n)})},sendMessage:(e,t,r)=>{"string"!=typeof e&&(e=JSON.stringify(e)),u("SENDING MESSAGE",e,t);try{t=function(e){try{let t=(0,o.pack)(e);return btoa(String.fromCharCode(...t))}catch(e){throw e}}(t)}catch(e){console.warn("Edrys: Error encoding message =>",t,e);return}window.parent.postMessage({event:"message",subject:e,body:t,module:window.Edrys.module.url,user:r},window.Edrys.origin)},setItem(e,t){localStorage.setItem(`${window.Edrys.class_id}.${window.Edrys.liveUser.room}.${e}`,t)},getItem:e=>localStorage.getItem(`${window.Edrys.class_id}.${window.Edrys.liveUser.room}.${e}`),clearState(e){i.getMap("rooms").get(window.Edrys.liveUser.room).delete(e)},updateState(e,t){i.transact(e,t)},getState(e,t,r){let n,o=i.getMap("rooms").get(window.Edrys.liveUser.room);if(!e)return o;if(o.has(e)&&("Value"!==t||"Value"===t&&void 0===r))return o.get(e);switch(t){case"Map":n=new s.Map;break;case"Array":n=new s.Array;break;case"Text":n=new s.Text;break;case"XmlFragment":n=new s.XmlFragment;break;case"XmlText":n=new s.XmlText;break;case"XmlElement":n=new s.XmlElement;break;case"Value":if(void 0===r)return;let l=o.get(e);if(JSON.stringify(l)===JSON.stringify(r))return l;n=r;break;default:d("Unknown type =>",t);return}return o.set(e,n),n},async sendStream(e,t={}){let r=t.method||"webrtc";if(console.log(`Streaming using method: ${r}`),"websocket"===r){let r=new(0,l.WebSocketStreamServer)(this,e,t);return{stop:()=>r.stop()}}{let t=await this.getWebRTCConfig(),r=new(0,l.StreamServer)(this,e,t);return{stop:()=>r.stop()}}},onStream(e,t={}){let r=t.method||"webrtc";if(console.log(`Receiving stream using method: ${r}`),"websocket"!==r)return this.getWebRTCConfig().then(async t=>{await new Promise(e=>setTimeout(e,4e3));let r=new(0,l.StreamClient)(this,e,t);return{stop:()=>r.stop()}});{let r=new(0,l.WebSocketStreamClient)(this,e,t);return Promise.resolve({stop:()=>r.stop()})}},async getWebRTCConfig(){return this.rtcConfig||(window.parent.postMessage({event:"requestWebRTCConfig"},this.origin),this.rtcConfig=await new Promise(e=>{let t=r=>{"webrtcConfig"===r.data.event&&(window.removeEventListener("message",t),e(r.data.config))};window.addEventListener("message",t)})),this.rtcConfig}};let f=e=>({get(t,r){if("isProxy"==r)return!0;let n=t[r];if(void 0!==n)return n.isProxy||"object"!=typeof n||(t[r]=new Proxy(n,f([...e,r]))),t[r]},set(t,r,n){if(!e.includes("__ob__")){let t=[...e,r];window.parent.postMessage({event:"update",path:t,value:n},window.Edrys.origin)}return t[r]=n,!0}});function p(){let e={users:i.getMap("users").toJSON(),rooms:i.getMap("rooms").toJSON()};Object.entries(e.rooms).forEach(([e,t])=>({name:e,data:t})),Object.entries(e.users).forEach(([e,t])=>{t.name=e}),window.Edrys.liveClass=new Proxy(e,f("")),window.Edrys.liveUser=e.users[window.Edrys.username],window.Edrys.liveRoom=e.rooms[window.Edrys.liveUser.room]}function g(){p(),dispatchEvent(new CustomEvent("$Edrys.update",{bubbles:!1}))}window.addEventListener("message",function(e){switch(e.data.event){case"update":window.Edrys.origin=e.data.origin,window.Edrys.role=e.data.role,window.Edrys.username=e.data.username,window.Edrys.module=e.data.module,i||((i=new s.Doc).getMap("users"),i.getMap("rooms"),i.on("update",(t,r)=>{if(p(),u("DOC",t,r),r===a){!window.Edrys.ready&&c&&(this.setTimeout(()=>{window.Edrys.ready=!0,h.onReady?dispatchEvent(new CustomEvent("$Edrys.ready",{bubbles:!1,detail:e.data})):h.onUpdate&&g()},1e3),i.getMap("rooms").observeDeep((e,t)=>{g()}),i.getMap("users").observeDeep((e,t)=>{g()}),setTimeout(function(){g()},500));return}window.parent.postMessage({event:"state",data:t},window.Edrys.origin)}));try{window.Edrys.module.config=JSON.parse(e.data.module.config)}catch(e){}try{window.Edrys.module.studentConfig=JSON.parse(e.data.module.studentConfig)}catch(e){}try{window.Edrys.module.teacherConfig=JSON.parse(e.data.module.teacherConfig)}catch(e){}try{window.Edrys.module.stationConfig=JSON.parse(e.data.module.stationConfig)}catch(e){}window.Edrys.class_id=e.data.class_id,e.data.liveClass&&(c=!0,s.applyUpdate(i,e.data.liveClass,a));break;case"message":break;case"echo":console.log("ECHO:",e.data);break;case"webrtcConfig":window.Edrys.rtcConfig=e.data.config}"update"!==e.data.event&&dispatchEvent(new CustomEvent("$Edrys."+e.data.event,{bubbles:!1,detail:e.data}))},!1),window.addEventListener("load",()=>{setTimeout(function(){!function e(){window.Edrys.ready||(d("Module not ready yet ..."),window.parent.postMessage({event:"reload",module:window.Edrys?.module.url||"*"},window.Edrys?.origin||"*"),setTimeout(function(){e()},5e3))}()},2e3)})},{yjs:"dTroZ",msgpackr:"jCq4q","./streamHandler":"blYkP"}],dTroZ:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"AbsolutePosition",()=>eS),i.export(r,"AbstractConnector",()=>U),i.export(r,"AbstractStruct",()=>rw),i.export(r,"AbstractType",()=>tN),i.export(r,"Array",()=>t8),i.export(r,"ContentAny",()=>rA),i.export(r,"ContentBinary",()=>rb),i.export(r,"ContentDeleted",()=>rE),i.export(r,"ContentDoc",()=>rS),i.export(r,"ContentEmbed",()=>rv),i.export(r,"ContentFormat",()=>rU),i.export(r,"ContentJSON",()=>rk),i.export(r,"ContentString",()=>r_),i.export(r,"ContentType",()=>rL),i.export(r,"Doc",()=>F),i.export(r,"GC",()=>rx),i.export(r,"ID",()=>eu),i.export(r,"Item",()=>rq),i.export(r,"Map",()=>t3),i.export(r,"PermanentUserData",()=>ex),i.export(r,"RelativePosition",()=>eb),i.export(r,"Skip",()=>rG),i.export(r,"Snapshot",()=>eT),i.export(r,"Text",()=>ru),i.export(r,"Transaction",()=>eQ),i.export(r,"UndoManager",()=>tt),i.export(r,"UpdateDecoderV1",()=>$),i.export(r,"UpdateDecoderV2",()=>q),i.export(r,"UpdateEncoderV1",()=>W),i.export(r,"UpdateEncoderV2",()=>Y),i.export(r,"XmlElement",()=>rp),i.export(r,"XmlFragment",()=>rf),i.export(r,"XmlHook",()=>rm),i.export(r,"XmlText",()=>ry),i.export(r,"YArrayEvent",()=>t2),i.export(r,"YEvent",()=>tC),i.export(r,"YMapEvent",()=>t6),i.export(r,"YTextEvent",()=>rh),i.export(r,"YXmlEvent",()=>rg),i.export(r,"applyUpdate",()=>Q),i.export(r,"applyUpdateV2",()=>Z),i.export(r,"cleanupYTextFormatting",()=>rl),i.export(r,"compareIDs",()=>ed),i.export(r,"compareRelativePositions",()=>e_),i.export(r,"convertUpdateFormatV1ToV2",()=>tv),i.export(r,"convertUpdateFormatV2ToV1",()=>tU),i.export(r,"createAbsolutePositionFromRelativePosition",()=>eA),i.export(r,"createDeleteSet",()=>D),i.export(r,"createDeleteSetFromStructStore",()=>O),i.export(r,"createDocFromSnapshot",()=>eP),i.export(r,"createID",()=>ef),i.export(r,"createRelativePositionFromJSON",()=>eI),i.export(r,"createRelativePositionFromTypeIndex",()=>eU),i.export(r,"createSnapshot",()=>eM),i.export(r,"decodeRelativePosition",()=>eC),i.export(r,"decodeSnapshot",()=>eR),i.export(r,"decodeSnapshotV2",()=>eO),i.export(r,"decodeStateVector",()=>en),i.export(r,"decodeUpdate",()=>ts),i.export(r,"decodeUpdateV2",()=>to),i.export(r,"diffUpdate",()=>tm),i.export(r,"diffUpdateV2",()=>tg),i.export(r,"emptySnapshot",()=>eN),i.export(r,"encodeRelativePosition",()=>ek),i.export(r,"encodeSnapshot",()=>eD),i.export(r,"encodeSnapshotV2",()=>eB),i.export(r,"encodeStateAsUpdate",()=>et),i.export(r,"encodeStateAsUpdateV2",()=>ee),i.export(r,"encodeStateVector",()=>es),i.export(r,"encodeStateVectorFromUpdate",()=>th),i.export(r,"encodeStateVectorFromUpdateV2",()=>tc),i.export(r,"equalDeleteSets",()=>L),i.export(r,"equalSnapshots",()=>ej),i.export(r,"findIndexSS",()=>eG),i.export(r,"findRootTypeKey",()=>em),i.export(r,"getItem",()=>eY),i.export(r,"getItemCleanEnd",()=>eK),i.export(r,"getItemCleanStart",()=>eX),i.export(r,"getState",()=>eJ),i.export(r,"getTypeChildren",()=>tR),i.export(r,"isDeleted",()=>_),i.export(r,"isParentOf",()=>ey),i.export(r,"iterateDeletedStructs",()=>A),i.export(r,"logType",()=>ew),i.export(r,"logUpdate",()=>tn),i.export(r,"logUpdateV2",()=>ti),i.export(r,"mergeDeleteSets",()=>j),i.export(r,"mergeUpdates",()=>ta),i.export(r,"mergeUpdatesV2",()=>tp),i.export(r,"obfuscateUpdate",()=>tI),i.export(r,"obfuscateUpdateV2",()=>tS),i.export(r,"parseUpdateMeta",()=>td),i.export(r,"parseUpdateMetaV2",()=>tu),i.export(r,"readUpdate",()=>K),i.export(r,"readUpdateV2",()=>X),i.export(r,"relativePositionToJSON",()=>eE),i.export(r,"snapshot",()=>eL),i.export(r,"snapshotContainsUpdate",()=>e$),i.export(r,"transact",()=>e4),i.export(r,"tryGc",()=>e3),i.export(r,"typeListToArraySnapshot",()=>tF),i.export(r,"typeMapGetAllSnapshot",()=>t0),i.export(r,"typeMapGetSnapshot",()=>tQ);var s=e("lib0/observable"),o=e("lib0/array"),l=e("lib0/math"),a=e("lib0/map"),c=e("lib0/encoding"),h=e("lib0/decoding"),u=e("lib0/random"),d=e("lib0/promise"),f=e("lib0/buffer"),p=e("lib0/error"),g=e("lib0/binary"),m=e("lib0/function"),y=e("lib0/set"),w=e("lib0/logging"),x=e("lib0/time"),b=e("lib0/string"),E=e("lib0/iterator"),I=e("lib0/object"),S=e("lib0/environment"),v=arguments[3];class U extends s.ObservableV2{constructor(e,t){super(),this.doc=e,this.awareness=t}}class k{constructor(e,t){this.clock=e,this.len=t}}class C{constructor(){this.clients=new Map}}let A=(e,t,r)=>t.clients.forEach((t,n)=>{let i=e.doc.store.clients.get(n);if(null!=i){let n=i[i.length-1],s=n.id.clock+n.length;for(let n=0,o=t[n];n<t.length&&o.clock<s;o=t[++n])eZ(e,i,o.clock,o.len,r)}}),_=(e,t)=>{let r=e.clients.get(t.client);return void 0!==r&&null!==((e,t)=>{let r=0,n=e.length-1;for(;r<=n;){let i=l.floor((r+n)/2),s=e[i],o=s.clock;if(o<=t){if(t<o+s.len)return i;r=i+1}else n=i-1}return null})(r,t.clock)},T=e=>{e.clients.forEach(e=>{let t,r;for(e.sort((e,t)=>e.clock-t.clock),t=1,r=1;t<e.length;t++){let n=e[r-1],i=e[t];n.clock+n.len>=i.clock?n.len=l.max(n.len,i.clock+i.len-n.clock):(r<t&&(e[r]=i),r++)}e.length=r})},j=e=>{let t=new C;for(let r=0;r<e.length;r++)e[r].clients.forEach((n,i)=>{if(!t.clients.has(i)){let s=n.slice();for(let t=r+1;t<e.length;t++)o.appendTo(s,e[t].clients.get(i)||[]);t.clients.set(i,s)}});return T(t),t},B=(e,t,r,n)=>{a.setIfUndefined(e.clients,t,()=>[]).push(new k(r,n))},D=()=>new C,O=e=>{let t=D();return e.clients.forEach((e,r)=>{let n=[];for(let t=0;t<e.length;t++){let r=e[t];if(r.deleted){let i=r.id.clock,s=r.length;if(t+1<e.length)for(let r=e[t+1];t+1<e.length&&r.deleted;r=e[++t+1])s+=r.length;n.push(new k(i,s))}}n.length>0&&t.clients.set(r,n)}),t},R=(e,t)=>{c.writeVarUint(e.restEncoder,t.clients.size),o.from(t.clients.entries()).sort((e,t)=>t[0]-e[0]).forEach(([t,r])=>{e.resetDsCurVal(),c.writeVarUint(e.restEncoder,t);let n=r.length;c.writeVarUint(e.restEncoder,n);for(let t=0;t<n;t++){let n=r[t];e.writeDsClock(n.clock),e.writeDsLen(n.len)}})},M=e=>{let t=new C,r=h.readVarUint(e.restDecoder);for(let n=0;n<r;n++){e.resetDsCurVal();let r=h.readVarUint(e.restDecoder),n=h.readVarUint(e.restDecoder);if(n>0){let i=a.setIfUndefined(t.clients,r,()=>[]);for(let t=0;t<n;t++)i.push(new k(e.readDsClock(),e.readDsLen()))}}return t},N=(e,t,r)=>{let n=new C,i=h.readVarUint(e.restDecoder);for(let s=0;s<i;s++){e.resetDsCurVal();let i=h.readVarUint(e.restDecoder),s=h.readVarUint(e.restDecoder),o=r.clients.get(i)||[],l=eJ(r,i);for(let r=0;r<s;r++){let r=e.readDsClock(),s=r+e.readDsLen();if(r<l){l<s&&B(n,i,l,s-l);let e=eG(o,r),a=o[e];for(!a.deleted&&a.id.clock<r&&(o.splice(e+1,0,rP(t,a,r-a.id.clock)),e++);e<o.length;)if((a=o[e++]).id.clock<s)a.deleted||(s<a.id.clock+a.length&&o.splice(e,0,rP(t,a,s-a.id.clock)),a.delete(t));else break}else B(n,i,r,s-r)}}if(n.clients.size>0){let e=new Y;return c.writeVarUint(e.restEncoder,0),R(e,n),e.toUint8Array()}return null},L=(e,t)=>{if(e.clients.size!==t.clients.size)return!1;for(let[r,n]of e.clients.entries()){let e=t.clients.get(r);if(void 0===e||n.length!==e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],i=e[t];if(r.clock!==i.clock||r.len!==i.len)return!1}}return!0},V=u.uint32;class F extends s.ObservableV2{constructor({guid:e=u.uuidv4(),collectionid:t=null,gc:r=!0,gcFilter:n=()=>!0,meta:i=null,autoLoad:s=!1,shouldLoad:o=!0}={}){super(),this.gc=r,this.gcFilter=n,this.clientID=V(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new ez,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=o,this.autoLoad=s,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=d.create(e=>{this.on("load",()=>{this.isLoaded=!0,e(this)})});let l=()=>d.create(e=>{let t=r=>{(void 0===r||!0===r)&&(this.off("sync",t),e())};this.on("sync",t)});this.on("sync",e=>{!1===e&&this.isSynced&&(this.whenSynced=l()),this.isSynced=void 0===e||!0===e,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){let e=this._item;null===e||this.shouldLoad||e4(e.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(o.from(this.subdocs).map(e=>e.guid))}transact(e,t=null){return e4(this,e,t)}get(e,t=tN){let r=a.setIfUndefined(this.share,e,()=>{let e=new t;return e._integrate(this,null),e}),n=r.constructor;if(t!==tN&&n!==t)if(n===tN){let n=new t;n._map=r._map,r._map.forEach(e=>{for(;null!==e;e=e.left)e.parent=n}),n._start=r._start;for(let e=n._start;null!==e;e=e.right)e.parent=n;return n._length=r._length,this.share.set(e,n),n._integrate(this,null),n}else throw Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,t8)}getText(e=""){return this.get(e,ru)}getMap(e=""){return this.get(e,t3)}getXmlElement(e=""){return this.get(e,rp)}getXmlFragment(e=""){return this.get(e,rf)}toJSON(){let e={};return this.share.forEach((t,r)=>{e[r]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,o.from(this.subdocs).forEach(e=>e.destroy());let e=this._item;if(null!==e){this._item=null;let t=e.content;t.doc=new F({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,e4(e.parent.doc,r=>{let n=t.doc;e.deleted||r.subdocsAdded.add(n),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class P{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return h.readVarUint(this.restDecoder)}readDsLen(){return h.readVarUint(this.restDecoder)}}class $ extends P{readLeftID(){return ef(h.readVarUint(this.restDecoder),h.readVarUint(this.restDecoder))}readRightID(){return ef(h.readVarUint(this.restDecoder),h.readVarUint(this.restDecoder))}readClient(){return h.readVarUint(this.restDecoder)}readInfo(){return h.readUint8(this.restDecoder)}readString(){return h.readVarString(this.restDecoder)}readParentInfo(){return 1===h.readVarUint(this.restDecoder)}readTypeRef(){return h.readVarUint(this.restDecoder)}readLen(){return h.readVarUint(this.restDecoder)}readAny(){return h.readAny(this.restDecoder)}readBuf(){return f.copyUint8Array(h.readVarUint8Array(this.restDecoder))}readJSON(){return JSON.parse(h.readVarString(this.restDecoder))}readKey(){return h.readVarString(this.restDecoder)}}class z{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=h.readVarUint(this.restDecoder),this.dsCurrVal}readDsLen(){let e=h.readVarUint(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class q extends z{constructor(e){super(e),this.keys=[],h.readVarUint(e),this.keyClockDecoder=new h.IntDiffOptRleDecoder(h.readVarUint8Array(e)),this.clientDecoder=new h.UintOptRleDecoder(h.readVarUint8Array(e)),this.leftClockDecoder=new h.IntDiffOptRleDecoder(h.readVarUint8Array(e)),this.rightClockDecoder=new h.IntDiffOptRleDecoder(h.readVarUint8Array(e)),this.infoDecoder=new h.RleDecoder(h.readVarUint8Array(e),h.readUint8),this.stringDecoder=new h.StringDecoder(h.readVarUint8Array(e)),this.parentInfoDecoder=new h.RleDecoder(h.readVarUint8Array(e),h.readUint8),this.typeRefDecoder=new h.UintOptRleDecoder(h.readVarUint8Array(e)),this.lenDecoder=new h.UintOptRleDecoder(h.readVarUint8Array(e))}readLeftID(){return new eu(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new eu(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return h.readAny(this.restDecoder)}readBuf(){return h.readVarUint8Array(this.restDecoder)}readJSON(){return h.readAny(this.restDecoder)}readKey(){let e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{let e=this.stringDecoder.read();return this.keys.push(e),e}}}class J{constructor(){this.restEncoder=c.createEncoder()}toUint8Array(){return c.toUint8Array(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){c.writeVarUint(this.restEncoder,e)}writeDsLen(e){c.writeVarUint(this.restEncoder,e)}}class W extends J{writeLeftID(e){c.writeVarUint(this.restEncoder,e.client),c.writeVarUint(this.restEncoder,e.clock)}writeRightID(e){c.writeVarUint(this.restEncoder,e.client),c.writeVarUint(this.restEncoder,e.clock)}writeClient(e){c.writeVarUint(this.restEncoder,e)}writeInfo(e){c.writeUint8(this.restEncoder,e)}writeString(e){c.writeVarString(this.restEncoder,e)}writeParentInfo(e){c.writeVarUint(this.restEncoder,+!!e)}writeTypeRef(e){c.writeVarUint(this.restEncoder,e)}writeLen(e){c.writeVarUint(this.restEncoder,e)}writeAny(e){c.writeAny(this.restEncoder,e)}writeBuf(e){c.writeVarUint8Array(this.restEncoder,e)}writeJSON(e){c.writeVarString(this.restEncoder,JSON.stringify(e))}writeKey(e){c.writeVarString(this.restEncoder,e)}}class G{constructor(){this.restEncoder=c.createEncoder(),this.dsCurrVal=0}toUint8Array(){return c.toUint8Array(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){let t=e-this.dsCurrVal;this.dsCurrVal=e,c.writeVarUint(this.restEncoder,t)}writeDsLen(e){0===e&&p.unexpectedCase(),c.writeVarUint(this.restEncoder,e-1),this.dsCurrVal+=e}}class Y extends G{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new c.IntDiffOptRleEncoder,this.clientEncoder=new c.UintOptRleEncoder,this.leftClockEncoder=new c.IntDiffOptRleEncoder,this.rightClockEncoder=new c.IntDiffOptRleEncoder,this.infoEncoder=new c.RleEncoder(c.writeUint8),this.stringEncoder=new c.StringEncoder,this.parentInfoEncoder=new c.RleEncoder(c.writeUint8),this.typeRefEncoder=new c.UintOptRleEncoder,this.lenEncoder=new c.UintOptRleEncoder}toUint8Array(){let e=c.createEncoder();return c.writeVarUint(e,0),c.writeVarUint8Array(e,this.keyClockEncoder.toUint8Array()),c.writeVarUint8Array(e,this.clientEncoder.toUint8Array()),c.writeVarUint8Array(e,this.leftClockEncoder.toUint8Array()),c.writeVarUint8Array(e,this.rightClockEncoder.toUint8Array()),c.writeVarUint8Array(e,c.toUint8Array(this.infoEncoder)),c.writeVarUint8Array(e,this.stringEncoder.toUint8Array()),c.writeVarUint8Array(e,c.toUint8Array(this.parentInfoEncoder)),c.writeVarUint8Array(e,this.typeRefEncoder.toUint8Array()),c.writeVarUint8Array(e,this.lenEncoder.toUint8Array()),c.writeUint8Array(e,c.toUint8Array(this.restEncoder)),c.toUint8Array(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(+!!e)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){c.writeAny(this.restEncoder,e)}writeBuf(e){c.writeVarUint8Array(this.restEncoder,e)}writeJSON(e){c.writeAny(this.restEncoder,e)}writeKey(e){let t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}let H=(e,t,r)=>{let n=new Map;r.forEach((e,r)=>{eJ(t,r)>e&&n.set(r,e)}),eq(t).forEach((e,t)=>{r.has(t)||n.set(t,0)}),c.writeVarUint(e.restEncoder,n.size),o.from(n.entries()).sort((e,t)=>t[0]-e[0]).forEach(([r,n])=>{((e,t,r,n)=>{n=l.max(n,t[0].id.clock);let i=eG(t,n);c.writeVarUint(e.restEncoder,t.length-i),e.writeClient(r),c.writeVarUint(e.restEncoder,n);let s=t[i];s.write(e,n-s.id.clock);for(let r=i+1;r<t.length;r++)t[r].write(e,0)})(e,t.clients.get(r),r,n)})},X=(e,t,r,n=new q(e))=>e4(t,e=>{e.local=!1;let t=!1,r=e.doc,i=r.store,s=((e,t,r)=>{let n=[],i=o.from(r.keys()).sort((e,t)=>e-t);if(0===i.length)return null;let s=()=>{if(0===i.length)return null;let e=r.get(i[i.length-1]);for(;e.refs.length===e.i;){if(i.pop(),!(i.length>0))return null;e=r.get(i[i.length-1])}return e},l=s();if(null===l)return null;let h=new ez,u=new Map,d=(e,t)=>{let r=u.get(e);(null==r||r>t)&&u.set(e,t)},f=l.refs[l.i++],p=new Map,g=()=>{for(let e of n){let t=e.id.client,n=r.get(t);n?(n.i--,h.clients.set(t,n.refs.slice(n.i)),r.delete(t),n.i=0,n.refs=[]):h.clients.set(t,[e]),i=i.filter(e=>e!==t)}n.length=0};for(;;){if(f.constructor!==rG){let i=a.setIfUndefined(p,f.id.client,()=>eJ(t,f.id.client))-f.id.clock;if(i<0)n.push(f),d(f.id.client,f.id.clock-1),g();else{let s=f.getMissing(e,t);if(null!==s){n.push(f);let e=r.get(s)||{refs:[],i:0};if(e.refs.length===e.i)d(s,eJ(t,s)),g();else{f=e.refs[e.i++];continue}}else(0===i||i<f.length)&&(f.integrate(e,i),p.set(f.id.client,f.id.clock+f.length))}}if(n.length>0)f=n.pop();else if(null!==l&&l.i<l.refs.length)f=l.refs[l.i++];else{if(null===(l=s()))break;f=l.refs[l.i++]}}if(h.clients.size>0){let e=new Y;return H(e,h,new Map),c.writeVarUint(e.restEncoder,0),{missing:u,update:e.toUint8Array()}}return null})(e,i,((e,t)=>{let r=a.create(),n=h.readVarUint(e.restDecoder);for(let i=0;i<n;i++){let n=h.readVarUint(e.restDecoder),i=Array(n),s=e.readClient(),o=h.readVarUint(e.restDecoder);r.set(s,{i:0,refs:i});for(let r=0;r<n;r++){let n=e.readInfo();switch(g.BITS5&n){case 0:{let t=e.readLen();i[r]=new rx(ef(s,o),t),o+=t;break}case 10:{let t=h.readVarUint(e.restDecoder);i[r]=new rG(ef(s,o),t),o+=t;break}default:{let l=(n&(g.BIT7|g.BIT8))==0,a=new rq(ef(s,o),null,(n&g.BIT8)===g.BIT8?e.readLeftID():null,null,(n&g.BIT7)===g.BIT7?e.readRightID():null,l?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,l&&(n&g.BIT6)===g.BIT6?e.readString():null,rJ(e,n));i[r]=a,o+=a.length}}}}return r})(n,r)),l=i.pendingStructs;if(l){for(let[e,r]of l.missing)if(r<eJ(i,e)){t=!0;break}if(s){for(let[e,t]of s.missing){let r=l.missing.get(e);(null==r||r>t)&&l.missing.set(e,t)}l.update=tp([l.update,s.update])}}else i.pendingStructs=s;let u=N(n,e,i);if(i.pendingDs){let t=new q(h.createDecoder(i.pendingDs));h.readVarUint(t.restDecoder);let r=N(t,e,i);u&&r?i.pendingDs=tp([u,r]):i.pendingDs=u||r}else i.pendingDs=u;if(t){let t=i.pendingStructs.update;i.pendingStructs=null,Z(e.doc,t)}},r,!1),K=(e,t,r)=>X(e,t,r,new $(e)),Z=(e,t,r,n=q)=>{let i=h.createDecoder(t);X(i,e,r,new n(i))},Q=(e,t,r)=>Z(e,t,r,$),ee=(e,t=new Uint8Array([0]),r=new Y)=>{((e,t,r=new Map)=>{H(e,t.store,r),R(e,O(t.store))})(r,e,en(t));let n=[r.toUint8Array()];if(e.store.pendingDs&&n.push(e.store.pendingDs),e.store.pendingStructs&&n.push(tg(e.store.pendingStructs.update,t)),n.length>1){if(r.constructor===W)return ta(n.map((e,t)=>0===t?e:tU(e)));else if(r.constructor===Y)return tp(n)}return n[0]},et=(e,t)=>ee(e,t,new W),er=e=>{let t=new Map,r=h.readVarUint(e.restDecoder);for(let n=0;n<r;n++){let r=h.readVarUint(e.restDecoder),n=h.readVarUint(e.restDecoder);t.set(r,n)}return t},en=e=>er(new P(h.createDecoder(e))),ei=(e,t)=>(c.writeVarUint(e.restEncoder,t.size),o.from(t.entries()).sort((e,t)=>t[0]-e[0]).forEach(([t,r])=>{c.writeVarUint(e.restEncoder,t),c.writeVarUint(e.restEncoder,r)}),e),es=e=>((e,t=new G)=>(e instanceof Map?ei(t,e):ei(t,eq(e.store)),t.toUint8Array()))(e,new J);class eo{constructor(){this.l=[]}}let el=()=>new eo,ea=(e,t)=>e.l.push(t),ec=(e,t)=>{let r=e.l,n=r.length;e.l=r.filter(e=>t!==e),n===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},eh=(e,t,r)=>m.callAll(e.l,[t,r]);class eu{constructor(e,t){this.client=e,this.clock=t}}let ed=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,ef=(e,t)=>new eu(e,t),ep=(e,t)=>{c.writeVarUint(e,t.client),c.writeVarUint(e,t.clock)},eg=e=>ef(h.readVarUint(e),h.readVarUint(e)),em=e=>{for(let[t,r]of e.doc.share.entries())if(r===e)return t;throw p.unexpectedCase()},ey=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1},ew=e=>{let t=[],r=e._start;for(;r;)t.push(r),r=r.right;console.log("Children: ",t),console.log("Children content: ",t.filter(e=>!e.deleted).map(e=>e.content))};class ex{constructor(e,t=e.getMap("users")){let r=new Map;this.yusers=t,this.doc=e,this.clients=new Map,this.dss=r;let n=(e,t)=>{let r=e.get("ds"),n=e.get("ids"),i=e=>this.clients.set(e,t);r.observe(e=>{e.changes.added.forEach(e=>{e.content.getContent().forEach(e=>{e instanceof Uint8Array&&this.dss.set(t,j([this.dss.get(t)||D(),M(new P(h.createDecoder(e)))]))})})}),this.dss.set(t,j(r.map(e=>M(new P(h.createDecoder(e)))))),n.observe(e=>e.changes.added.forEach(e=>e.content.getContent().forEach(i))),n.forEach(i)};t.observe(e=>{e.keysChanged.forEach(e=>n(t.get(e),e))}),t.forEach(n)}setUserMapping(e,t,r,{filter:n=()=>!0}={}){let i=this.yusers,s=i.get(r);s||((s=new t3).set("ids",new t8),s.set("ds",new t8),i.set(r,s)),s.get("ids").push([t]),i.observe(e=>{setTimeout(()=>{let e=i.get(r);if(e!==s){s=e,this.clients.forEach((e,t)=>{r===e&&s.get("ids").push([t])});let t=new J,n=this.dss.get(r);n&&(R(t,n),s.get("ds").push([t.toUint8Array()]))}},0)}),e.on("afterTransaction",e=>{setTimeout(()=>{let t=s.get("ds"),r=e.deleteSet;if(e.local&&r.clients.size>0&&n(e,r)){let e=new J;R(e,r),t.push([e.toUint8Array()])}})})}getUserByClientId(e){return this.clients.get(e)||null}getUserByDeletedId(e){for(let[t,r]of this.dss.entries())if(_(r,e))return t;return null}}class eb{constructor(e,t,r,n=0){this.type=e,this.tname=t,this.item=r,this.assoc=n}}let eE=e=>{let t={};return e.type&&(t.type=e.type),e.tname&&(t.tname=e.tname),e.item&&(t.item=e.item),null!=e.assoc&&(t.assoc=e.assoc),t},eI=e=>new eb(null==e.type?null:ef(e.type.client,e.type.clock),e.tname??null,null==e.item?null:ef(e.item.client,e.item.clock),null==e.assoc?0:e.assoc);class eS{constructor(e,t,r=0){this.type=e,this.index=t,this.assoc=r}}let ev=(e,t,r)=>{let n=null,i=null;return null===e._item?i=em(e):n=ef(e._item.id.client,e._item.id.clock),new eb(n,i,t,r)},eU=(e,t,r=0)=>{let n=e._start;if(r<0){if(0===t)return ev(e,null,r);t--}for(;null!==n;){if(!n.deleted&&n.countable){if(n.length>t)return ev(e,ef(n.id.client,n.id.clock+t),r);t-=n.length}if(null===n.right&&r<0)return ev(e,n.lastId,r);n=n.right}return ev(e,null,r)},ek=e=>{let t=c.createEncoder();return((e,t)=>{let{type:r,tname:n,item:i,assoc:s}=t;if(null!==i)c.writeVarUint(e,0),ep(e,i);else if(null!==n)c.writeUint8(e,1),c.writeVarString(e,n);else if(null!==r)c.writeUint8(e,2),ep(e,r);else throw p.unexpectedCase();return c.writeVarInt(e,s)})(t,e),c.toUint8Array(t)},eC=e=>(e=>{let t=null,r=null,n=null;switch(h.readVarUint(e)){case 0:n=eg(e);break;case 1:r=h.readVarString(e);break;case 2:t=eg(e)}return new eb(t,r,n,h.hasContent(e)?h.readVarInt(e):0)})(h.createDecoder(e)),eA=(e,t,r=!0)=>{let n=t.store,i=e.item,s=e.type,o=e.tname,l=e.assoc,a=null,c=0;if(null!==i){if(eJ(n,i.client)<=i.clock)return null;let e=r?rV(n,i):((e,t)=>{let r=eY(e,t),n=t.clock-r.id.clock;return{item:r,diff:n}})(n,i),t=e.item;if(!(t instanceof rq))return null;if(null===(a=t.parent)._item||!a._item.deleted){c=t.deleted||!t.countable?0:e.diff+(l>=0?0:1);let r=t.left;for(;null!==r;)!r.deleted&&r.countable&&(c+=r.length),r=r.left}}else{if(null!==o)a=t.get(o);else if(null!==s){if(eJ(n,s.client)<=s.clock)return null;let{item:e}=r?rV(n,s):{item:eY(n,s)};if(!(e instanceof rq)||!(e.content instanceof rL))return null;a=e.content.type}else throw p.unexpectedCase();c=l>=0?a._length:0}return((e,t,r=0)=>new eS(e,t,r))(a,c,e.assoc)},e_=(e,t)=>e===t||null!==e&&null!==t&&e.tname===t.tname&&ed(e.item,t.item)&&ed(e.type,t.type)&&e.assoc===t.assoc;class eT{constructor(e,t){this.ds=e,this.sv=t}}let ej=(e,t)=>{let r=e.ds.clients,n=t.ds.clients,i=e.sv,s=t.sv;if(i.size!==s.size||r.size!==n.size)return!1;for(let[e,t]of i.entries())if(s.get(e)!==t)return!1;for(let[e,t]of r.entries()){let r=n.get(e)||[];if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++){let n=t[e],i=r[e];if(n.clock!==i.clock||n.len!==i.len)return!1}}return!0},eB=(e,t=new G)=>(R(t,e.ds),ei(t,e.sv),t.toUint8Array()),eD=e=>eB(e,new J),eO=(e,t=new z(h.createDecoder(e)))=>new eT(M(t),er(t)),eR=e=>eO(e,new P(h.createDecoder(e))),eM=(e,t)=>new eT(e,t),eN=eM(D(),new Map),eL=e=>eM(O(e.store),eq(e.store)),eV=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!_(t.ds,e.id),eF=(e,t)=>{let r=a.setIfUndefined(e.meta,eF,y.create),n=e.doc.store;r.has(t)||(t.sv.forEach((t,r)=>{t<eJ(n,r)&&eX(e,ef(r,t))}),A(e,t.ds,e=>{}),r.add(t))},eP=(e,t,r=new F)=>{if(e.gc)throw Error("Garbage-collection must be disabled in `originDoc`!");let{sv:n,ds:i}=t,s=new Y;return e.transact(t=>{let r=0;for(let[i,o]of(n.forEach(e=>{e>0&&r++}),c.writeVarUint(s.restEncoder,r),n)){if(0===o)continue;o<eJ(e.store,i)&&eX(t,ef(i,o));let r=e.store.clients.get(i)||[],n=eG(r,o-1);c.writeVarUint(s.restEncoder,n+1),s.writeClient(i),c.writeVarUint(s.restEncoder,0);for(let e=0;e<=n;e++)r[e].write(s,0)}R(s,i)}),Z(r,s.toUint8Array(),"snapshot"),r},e$=(e,t)=>((e,t,r=q)=>{let n=new r(h.createDecoder(t)),i=new tr(n,!1);for(let t=i.curr;null!==t;t=i.next())if((e.sv.get(t.id.client)||0)<t.id.clock+t.length)return!1;let s=j([e.ds,M(n)]);return L(e.ds,s)})(e,t,$);class ez{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}let eq=e=>{let t=new Map;return e.clients.forEach((e,r)=>{let n=e[e.length-1];t.set(r,n.id.clock+n.length)}),t},eJ=(e,t)=>{let r=e.clients.get(t);if(void 0===r)return 0;let n=r[r.length-1];return n.id.clock+n.length},eW=(e,t)=>{let r=e.clients.get(t.id.client);if(void 0===r)r=[],e.clients.set(t.id.client,r);else{let e=r[r.length-1];if(e.id.clock+e.length!==t.id.clock)throw p.unexpectedCase()}r.push(t)},eG=(e,t)=>{let r=0,n=e.length-1,i=e[n],s=i.id.clock;if(s===t)return n;let o=l.floor(t/(s+i.length-1)*n);for(;r<=n;){if((s=(i=e[o]).id.clock)<=t){if(t<s+i.length)return o;r=o+1}else n=o-1;o=l.floor((r+n)/2)}throw p.unexpectedCase()},eY=(e,t)=>{let r=e.clients.get(t.client);return r[eG(r,t.clock)]},eH=(e,t,r)=>{let n=eG(t,r),i=t[n];return i.id.clock<r&&i instanceof rq?(t.splice(n+1,0,rP(e,i,r-i.id.clock)),n+1):n},eX=(e,t)=>{let r=e.doc.store.clients.get(t.client);return r[eH(e,r,t.clock)]},eK=(e,t,r)=>{let n=t.clients.get(r.client),i=eG(n,r.clock),s=n[i];return r.clock!==s.id.clock+s.length-1&&s.constructor!==rx&&n.splice(i+1,0,rP(e,s,r.clock-s.id.clock+1)),s},eZ=(e,t,r,n,i)=>{let s;if(0===n)return;let o=r+n,l=eH(e,t,r);do o<(s=t[l++]).id.clock+s.length&&eH(e,t,o),i(s);while(l<t.length&&t[l].id.clock<o)};class eQ{constructor(e,t,r){this.doc=e,this.deleteSet=new C,this.beforeState=eq(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}let e0=(e,t)=>(0!==t.deleteSet.clients.size||!!a.any(t.afterState,(e,r)=>t.beforeState.get(r)!==e))&&(T(t.deleteSet),H(e,t.doc.store,t.beforeState),R(e,t.deleteSet),!0),e1=(e,t,r)=>{let n=t._item;(null===n||n.id.clock<(e.beforeState.get(n.id.client)||0)&&!n.deleted)&&a.setIfUndefined(e.changed,t,y.create).add(r)},e2=(e,t)=>{let r=e[t],n=e[t-1],i=t;for(;i>0;r=n,n=e[--i-1]){if(n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)){r instanceof rq&&null!==r.parentSub&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n);continue}break}let s=t-i;return s&&e.splice(t+1-s,s),s},e8=(e,t,r)=>{for(let[n,i]of e.clients.entries()){let e=t.clients.get(n);for(let n=i.length-1;n>=0;n--){let s=i[n],o=s.clock+s.len;for(let n=eG(e,s.clock),i=e[n];n<e.length&&i.id.clock<o;i=e[++n]){let i=e[n];if(s.clock+s.len<=i.id.clock)break;i instanceof rq&&i.deleted&&!i.keep&&r(i)&&i.gc(t,!1)}}}},e6=(e,t)=>{e.clients.forEach((e,r)=>{let n=t.clients.get(r);for(let t=e.length-1;t>=0;t--){let r=e[t],i=l.min(n.length-1,1+eG(n,r.clock+r.len-1));for(let e=i,t=n[e];e>0&&t.id.clock>=r.clock;t=n[e])e-=1+e2(n,e)}})},e3=(e,t,r)=>{e8(e,t,r),e6(e,t)},e5=(e,t)=>{if(t<e.length){let r=e[t],n=r.doc,i=n.store,s=r.deleteSet,o=r._mergeStructs;try{T(s),r.afterState=eq(r.doc.store),n.emit("beforeObserverCalls",[r,n]);let e=[];r.changed.forEach((t,n)=>e.push(()=>{null!==n._item&&n._item.deleted||n._callObserver(r,t)})),e.push(()=>{r.changedParentTypes.forEach((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter(e=>null===e.target._item||!e.target._item.deleted)).forEach(e=>{e.currentTarget=t,e._path=null}),e.sort((e,t)=>e.path.length-t.path.length),eh(t._dEH,e,r))})}),e.push(()=>n.emit("afterTransaction",[r,n])),(0,m.callAll)(e,[]),r._needFormattingCleanup&&ra(r)}finally{n.gc&&e8(s,i,n.gcFilter),e6(s,i),r.afterState.forEach((e,t)=>{let n=r.beforeState.get(t)||0;if(n!==e){let e=i.clients.get(t),r=l.max(eG(e,n),1);for(let t=e.length-1;t>=r;)t-=1+e2(e,t)}});for(let e=o.length-1;e>=0;e--){let{client:t,clock:r}=o[e].id,n=i.clients.get(t),s=eG(n,r);!(s+1<n.length&&e2(n,s+1)>1)&&s>0&&e2(n,s)}if(r.local||r.afterState.get(n.clientID)===r.beforeState.get(n.clientID)||(w.print(w.ORANGE,w.BOLD,"[yjs] ",w.UNBOLD,w.RED,"Changed the client-id because another client seems to be using it."),n.clientID=V()),n.emit("afterTransactionCleanup",[r,n]),n._observers.has("update")){let e=new W;e0(e,r)&&n.emit("update",[e.toUint8Array(),r.origin,n,r])}if(n._observers.has("updateV2")){let e=new Y;e0(e,r)&&n.emit("updateV2",[e.toUint8Array(),r.origin,n,r])}let{subdocsAdded:a,subdocsLoaded:c,subdocsRemoved:h}=r;(a.size>0||h.size>0||c.size>0)&&(a.forEach(e=>{e.clientID=n.clientID,null==e.collectionid&&(e.collectionid=n.collectionid),n.subdocs.add(e)}),h.forEach(e=>n.subdocs.delete(e)),n.emit("subdocs",[{loaded:c,added:a,removed:h},n,r]),h.forEach(e=>e.destroy())),e.length<=t+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,e])):e5(e,t+1)}}},e4=(e,t,r=null,n=!0)=>{let i=e._transactionCleanups,s=!1,o=null;null===e._transaction&&(s=!0,e._transaction=new eQ(e,r,n),i.push(e._transaction),1===i.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{o=t(e._transaction)}finally{if(s){let t=e._transaction===i[0];e._transaction=null,t&&e5(i,0)}}return o};class e9{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}let e7=(e,t,r)=>{A(e,r.deletions,r=>{r instanceof rq&&t.scope.some(t=>t===e.doc||ey(t,r))&&rF(r,!1)})},te=(e,t,r)=>{let n=null,i=e.doc,s=e.scope;e4(i,r=>{for(;t.length>0&&null===e.currStackItem;){let n=i.store,o=t.pop(),l=new Set,a=[],c=!1;A(r,o.insertions,e=>{if(e instanceof rq){if(null!==e.redone){let{item:t,diff:i}=rV(n,e.id);i>0&&(t=eX(r,ef(t.id.client,t.id.clock+i))),e=t}!e.deleted&&s.some(t=>t===r.doc||ey(t,e))&&a.push(e)}}),A(r,o.deletions,e=>{e instanceof rq&&s.some(t=>t===r.doc||ey(t,e))&&!_(o.insertions,e.id)&&l.add(e)}),l.forEach(t=>{c=null!==rz(r,t,l,o.insertions,e.ignoreRemoteMapChanges,e)||c});for(let t=a.length-1;t>=0;t--){let n=a[t];e.deleteFilter(n)&&(n.delete(r),c=!0)}e.currStackItem=c?o:null}r.changed.forEach((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)}),n=r},e);let o=e.currStackItem;if(null!=o){let t=n.changedParentTypes;e.emit("stack-item-popped",[{stackItem:o,type:r,changedParentTypes:t,origin:e},e]),e.currStackItem=null}return o};class tt extends s.ObservableV2{constructor(e,{captureTimeout:t=500,captureTransaction:r=e=>!0,deleteFilter:n=()=>!0,trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:s=!1,doc:l=o.isArray(e)?e[0].doc:e instanceof F?e:e.doc}={}){super(),this.scope=[],this.doc=l,this.addToScope(e),this.deleteFilter=n,i.add(this),this.trackedOrigins=i,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=s,this.captureTimeout=t,this.afterTransactionHandler=e=>{if(!this.captureTransaction(e)||!this.scope.some(t=>e.changedParentTypes.has(t)||t===this.doc)||!this.trackedOrigins.has(e.origin)&&(!e.origin||!this.trackedOrigins.has(e.origin.constructor)))return;let t=this.undoing,r=this.redoing,n=t?this.redoStack:this.undoStack;t?this.stopCapturing():r||this.clear(!1,!0);let i=new C;e.afterState.forEach((t,r)=>{let n=e.beforeState.get(r)||0,s=t-n;s>0&&B(i,r,n,s)});let s=x.getUnixTime(),o=!1;if(this.lastChange>0&&s-this.lastChange<this.captureTimeout&&n.length>0&&!t&&!r){let t=n[n.length-1];t.deletions=j([t.deletions,e.deleteSet]),t.insertions=j([t.insertions,i])}else n.push(new e9(e.deleteSet,i)),o=!0;t||r||(this.lastChange=s),A(e,e.deleteSet,t=>{t instanceof rq&&this.scope.some(r=>r===e.doc||ey(r,t))&&rF(t,!0)});let l=[{stackItem:n[n.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},this];o?this.emit("stack-item-added",l):this.emit("stack-item-updated",l)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){let t=new Set(this.scope);(e=o.isArray(e)?e:[e]).forEach(e=>{t.has(e)||(t.add(e),(e instanceof tN?e.doc!==this.doc:e!==this.doc)&&w.warn("[yjs#509] Not same Y.Doc"),this.scope.push(e))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(e=>e7(r,this,e)),this.undoStack=[]),t&&(this.redoStack.forEach(e=>e7(r,this,e)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])})}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=te(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=te(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}class tr{constructor(e,t){this.gen=function*(e){let t=h.readVarUint(e.restDecoder);for(let r=0;r<t;r++){let t=h.readVarUint(e.restDecoder),r=e.readClient(),n=h.readVarUint(e.restDecoder);for(let i=0;i<t;i++){let t=e.readInfo();if(10===t){let t=h.readVarUint(e.restDecoder);yield new rG(ef(r,n),t),n+=t}else if((g.BITS5&t)!=0){let i=(t&(g.BIT7|g.BIT8))==0,s=new rq(ef(r,n),null,(t&g.BIT8)===g.BIT8?e.readLeftID():null,null,(t&g.BIT7)===g.BIT7?e.readRightID():null,i?e.readParentInfo()?e.readString():e.readLeftID():null,i&&(t&g.BIT6)===g.BIT6?e.readString():null,rJ(e,t));yield s,n+=s.length}else{let t=e.readLen();yield new rx(ef(r,n),t),n+=t}}}}(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&null!==this.curr&&this.curr.constructor===rG)return this.curr}}let tn=e=>ti(e,$),ti=(e,t=q)=>{let r=[],n=new t(h.createDecoder(e)),i=new tr(n,!1);for(let e=i.curr;null!==e;e=i.next())r.push(e);w.print("Structs: ",r);let s=M(n);w.print("DeleteSet: ",s)},ts=e=>to(e,$),to=(e,t=q)=>{let r=[],n=new t(h.createDecoder(e)),i=new tr(n,!1);for(let e=i.curr;null!==e;e=i.next())r.push(e);return{structs:r,ds:M(n)}};class tl{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}let ta=e=>tp(e,$,W),tc=(e,t=G,r=q)=>{let n=new t,i=new tr(new r(h.createDecoder(e)),!1),s=i.curr;if(null===s)return c.writeVarUint(n.restEncoder,0),n.toUint8Array();{let e=0,t=s.id.client,r=0!==s.id.clock,o=r?0:s.id.clock+s.length;for(;null!==s;s=i.next())t!==s.id.client&&(0!==o&&(e++,c.writeVarUint(n.restEncoder,t),c.writeVarUint(n.restEncoder,o)),t=s.id.client,o=0,r=0!==s.id.clock),s.constructor===rG&&(r=!0),r||(o=s.id.clock+s.length);0!==o&&(e++,c.writeVarUint(n.restEncoder,t),c.writeVarUint(n.restEncoder,o));let l=c.createEncoder();return c.writeVarUint(l,e),c.writeBinaryEncoder(l,n.restEncoder),n.restEncoder=l,n.toUint8Array()}},th=e=>tc(e,J,$),tu=(e,t=q)=>{let r=new Map,n=new Map,i=new tr(new t(h.createDecoder(e)),!1),s=i.curr;if(null!==s){let e=s.id.client,t=s.id.clock;for(r.set(e,t);null!==s;s=i.next())e!==s.id.client&&(n.set(e,t),r.set(s.id.client,s.id.clock),e=s.id.client),t=s.id.clock+s.length;n.set(e,t)}return{from:r,to:n}},td=e=>tu(e,$),tf=(e,t)=>{if(e.constructor===rx){let{client:r,clock:n}=e.id;return new rx(ef(r,n+t),e.length-t)}if(e.constructor===rG){let{client:r,clock:n}=e.id;return new rG(ef(r,n+t),e.length-t)}{let{client:r,clock:n}=e.id;return new rq(ef(r,n+t),null,ef(r,n+t-1),null,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t))}},tp=(e,t=q,r=Y)=>{if(1===e.length)return e[0];let n=e.map(e=>new t(h.createDecoder(e))),i=n.map(e=>new tr(e,!0)),s=null,o=new r,l=new tl(o);for(;(i=i.filter(e=>null!==e.curr)).sort((e,t)=>{if(e.curr.id.client!==t.curr.id.client)return t.curr.id.client-e.curr.id.client;{let r=e.curr.id.clock-t.curr.id.clock;return 0===r?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===rG?1:-1:r}}),0!==i.length;){let e=i[0],t=e.curr.id.client;if(null!==s){let r=e.curr,n=!1;for(;null!==r&&r.id.clock+r.length<=s.struct.id.clock+s.struct.length&&r.id.client>=s.struct.id.client;)r=e.next(),n=!0;if(null===r||r.id.client!==t||n&&r.id.clock>s.struct.id.clock+s.struct.length)continue;if(t!==s.struct.id.client)tw(l,s.struct,s.offset),s={struct:r,offset:0},e.next();else if(s.struct.id.clock+s.struct.length<r.id.clock)if(s.struct.constructor===rG)s.struct.length=r.id.clock+r.length-s.struct.id.clock;else{tw(l,s.struct,s.offset);let e=r.id.clock-s.struct.id.clock-s.struct.length;s={struct:new rG(ef(t,s.struct.id.clock+s.struct.length),e),offset:0}}else{let t=s.struct.id.clock+s.struct.length-r.id.clock;t>0&&(s.struct.constructor===rG?s.struct.length-=t:r=tf(r,t)),s.struct.mergeWith(r)||(tw(l,s.struct,s.offset),s={struct:r,offset:0},e.next())}}else s={struct:e.curr,offset:0},e.next();for(let r=e.curr;null!==r&&r.id.client===t&&r.id.clock===s.struct.id.clock+s.struct.length&&r.constructor!==rG;r=e.next())tw(l,s.struct,s.offset),s={struct:r,offset:0}}return null!==s&&(tw(l,s.struct,s.offset),s=null),tx(l),R(o,j(n.map(e=>M(e)))),o.toUint8Array()},tg=(e,t,r=q,n=Y)=>{let i=en(t),s=new n,o=new tl(s),a=new r(h.createDecoder(e)),c=new tr(a,!1);for(;c.curr;){let e=c.curr,t=e.id.client,r=i.get(t)||0;if(c.curr.constructor===rG){c.next();continue}if(e.id.clock+e.length>r)for(tw(o,e,l.max(r-e.id.clock,0)),c.next();c.curr&&c.curr.id.client===t;)tw(o,c.curr,0),c.next();else for(;c.curr&&c.curr.id.client===t&&c.curr.id.clock+c.curr.length<=r;)c.next()}return tx(o),R(s,M(a)),s.toUint8Array()},tm=(e,t)=>tg(e,t,$,W),ty=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:c.toUint8Array(e.encoder.restEncoder)}),e.encoder.restEncoder=c.createEncoder(),e.written=0)},tw=(e,t,r)=>{e.written>0&&e.currClient!==t.id.client&&ty(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),c.writeVarUint(e.encoder.restEncoder,t.id.clock+r)),t.write(e.encoder,r),e.written++},tx=e=>{ty(e);let t=e.encoder.restEncoder;c.writeVarUint(t,e.clientStructs.length);for(let r=0;r<e.clientStructs.length;r++){let n=e.clientStructs[r];c.writeVarUint(t,n.written),c.writeUint8Array(t,n.restEncoder)}},tb=(e,t,r,n)=>{let i=new r(h.createDecoder(e)),s=new tr(i,!1),o=new n,l=new tl(o);for(let e=s.curr;null!==e;e=s.next())tw(l,t(e),0);return tx(l),R(o,M(i)),o.toUint8Array()},tE=({formatting:e=!0,subdocs:t=!0,yxml:r=!0}={})=>{let n=0,i=a.create(),s=a.create(),o=a.create(),l=a.create();return l.set(null,null),c=>{switch(c.constructor){case rx:case rG:return c;case rq:{let h=c.content;switch(h.constructor){case rE:break;case rL:if(r){let e=h.type;e instanceof rp&&(e.nodeName=a.setIfUndefined(s,e.nodeName,()=>"node-"+n)),e instanceof rm&&(e.hookName=a.setIfUndefined(s,e.hookName,()=>"hook-"+n))}break;case rA:h.arr=h.arr.map(()=>n);break;case rb:h.content=new Uint8Array([n]);break;case rS:t&&(h.opts={},h.doc.guid=n+"");break;case rv:h.embed={};break;case rU:e&&(h.key=a.setIfUndefined(o,h.key,()=>n+""),h.value=a.setIfUndefined(l,h.value,()=>({i:n})));break;case rk:h.arr=h.arr.map(()=>n);break;case r_:h.str=b.repeat(n%10+"",h.str.length);break;default:p.unexpectedCase()}return c.parentSub&&(c.parentSub=a.setIfUndefined(i,c.parentSub,()=>n+"")),n++,c}default:p.unexpectedCase()}}},tI=(e,t)=>tb(e,tE(t),$,W),tS=(e,t)=>tb(e,tE(t),q,Y),tv=e=>tb(e,m.id,$,Y),tU=e=>tb(e,m.id,q,W),tk="You must not compute changes after the event-handler fired.";class tC{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=tA(this.currentTarget,this.target))}deletes(e){return _(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw p.create(tk);let e=new Map,t=this.target;this.transaction.changed.get(t).forEach(r=>{if(null!==r){let n,i,s=t._map.get(r);if(this.adds(s)){let e=s.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(s))if(!(null!==e&&this.deletes(e)))return;else n="delete",i=o.last(e.content.getContent());else null!==e&&this.deletes(e)?(n="update",i=o.last(e.content.getContent())):(n="add",i=void 0)}else{if(!this.deletes(s))return;n="delete",i=o.last(s.content.getContent())}e.set(r,{action:n,oldValue:i})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw p.create(tk);let t=this.target,r=y.create(),n=y.create(),i=[];if(e={added:r,deleted:n,delta:i,keys:this.keys},this.transaction.changed.get(t).has(null)){let e=null,s=()=>{e&&i.push(e)};for(let i=t._start;null!==i;i=i.right)i.deleted?this.deletes(i)&&!this.adds(i)&&((null===e||void 0===e.delete)&&(s(),e={delete:0}),e.delete+=i.length,n.add(i)):this.adds(i)?((null===e||void 0===e.insert)&&(s(),e={insert:[]}),e.insert=e.insert.concat(i.content.getContent()),r.add(i)):((null===e||void 0===e.retain)&&(s(),e={retain:0}),e.retain+=i.length);null!==e&&void 0===e.retain&&s()}this._changes=e}return e}}let tA=(e,t)=>{let r=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)r.unshift(t._item.parentSub);else{let e=0,n=t._item.parent._start;for(;n!==t._item&&null!==n;)!n.deleted&&n.countable&&(e+=n.length),n=n.right;r.unshift(e)}t=t._item.parent}return r},t_=()=>{w.warn("Invalid access: Add Yjs type to a document before reading data.")},tT=0;class tj{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=tT++}}let tB=(e,t,r)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=r,e.timestamp=tT++},tD=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;let r=0===e._searchMarker.length?null:e._searchMarker.reduce((e,r)=>l.abs(t-e.index)<l.abs(t-r.index)?e:r),n=e._start,i=0;for(null!==r&&(n=r.p,i=r.index,r.timestamp=tT++);null!==n.right&&i<t;){if(!n.deleted&&n.countable){if(t<i+n.length)break;i+=n.length}n=n.right}for(;null!==n.left&&i>t;)!(n=n.left).deleted&&n.countable&&(i-=n.length);for(;null!==n.left&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)!(n=n.left).deleted&&n.countable&&(i-=n.length);if(null!==r&&l.abs(r.index-i)<n.parent.length/80)return tB(r,n,i),r;var s=e._searchMarker,o=n,a=i;if(s.length>=80){let e=s.reduce((e,t)=>e.timestamp<t.timestamp?e:t);return tB(e,o,a),e}{let e=new tj(o,a);return s.push(e),e}},tO=(e,t,r)=>{for(let n=e.length-1;n>=0;n--){let i=e[n];if(r>0){let t=i.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)(t=t.left)&&!t.deleted&&t.countable&&(i.index-=t.length);if(null===t||!0===t.marker){e.splice(n,1);continue}i.p=t,t.marker=!0}(t<i.index||r>0&&t===i.index)&&(i.index=l.max(t,i.index+r))}},tR=e=>{e.doc??t_();let t=e._start,r=[];for(;t;)r.push(t),t=t.right;return r},tM=(e,t,r)=>{let n=e,i=t.changedParentTypes;for(;a.setIfUndefined(i,e,()=>[]).push(r),null!==e._item;)e=e._item.parent;eh(n._eH,r,t)};class tN{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=el(),this._dEH=el(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw p.methodUnimplemented()}clone(){throw p.methodUnimplemented()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){ea(this._eH,e)}observeDeep(e){ea(this._dEH,e)}unobserve(e){ec(this._eH,e)}unobserveDeep(e){ec(this._dEH,e)}toJSON(){}}let tL=(e,t,r)=>{e.doc??t_(),t<0&&(t=e._length+t),r<0&&(r=e._length+r);let n=r-t,i=[],s=e._start;for(;null!==s&&n>0;){if(s.countable&&!s.deleted){let e=s.content.getContent();if(e.length<=t)t-=e.length;else{for(let r=t;r<e.length&&n>0;r++)i.push(e[r]),n--;t=0}}s=s.right}return i},tV=e=>{e.doc??t_();let t=[],r=e._start;for(;null!==r;){if(r.countable&&!r.deleted){let e=r.content.getContent();for(let r=0;r<e.length;r++)t.push(e[r])}r=r.right}return t},tF=(e,t)=>{let r=[],n=e._start;for(;null!==n;){if(n.countable&&eV(n,t)){let e=n.content.getContent();for(let t=0;t<e.length;t++)r.push(e[t])}n=n.right}return r},tP=(e,t)=>{let r=0,n=e._start;for(e.doc??t_();null!==n;){if(n.countable&&!n.deleted){let i=n.content.getContent();for(let n=0;n<i.length;n++)t(i[n],r++,e)}n=n.right}},t$=(e,t)=>{let r=[];return tP(e,(n,i)=>{r.push(t(n,i,e))}),r},tz=(e,t)=>{e.doc??t_();let r=tD(e,t),n=e._start;for(null!==r&&(n=r.p,t-=r.index);null!==n;n=n.right)if(!n.deleted&&n.countable){if(t<n.length)return n.content.getContent()[t];t-=n.length}},tq=(e,t,r,n)=>{let i=r,s=e.doc,o=s.clientID,l=s.store,a=null===r?t._start:r.right,c=[],h=()=>{c.length>0&&((i=new rq(ef(o,eJ(l,o)),i,i&&i.lastId,a,a&&a.id,t,null,new rA(c))).integrate(e,0),c=[])};n.forEach(r=>{if(null===r)c.push(r);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(r);break;default:switch(h(),r.constructor){case Uint8Array:case ArrayBuffer:(i=new rq(ef(o,eJ(l,o)),i,i&&i.lastId,a,a&&a.id,t,null,new rb(new Uint8Array(r)))).integrate(e,0);break;case F:(i=new rq(ef(o,eJ(l,o)),i,i&&i.lastId,a,a&&a.id,t,null,new rS(r))).integrate(e,0);break;default:if(r instanceof tN)(i=new rq(ef(o,eJ(l,o)),i,i&&i.lastId,a,a&&a.id,t,null,new rL(r))).integrate(e,0);else throw Error("Unexpected content type in insert operation")}}}),h()},tJ=()=>p.create("Length exceeded!"),tW=(e,t,r,n)=>{if(r>t._length)throw tJ();if(0===r)return t._searchMarker&&tO(t._searchMarker,r,n.length),tq(e,t,null,n);let i=r,s=tD(t,r),o=t._start;for(null!==s&&(o=s.p,0==(r-=s.index)&&(r+=(o=o.prev)&&o.countable&&!o.deleted?o.length:0));null!==o;o=o.right)if(!o.deleted&&o.countable){if(r<=o.length){r<o.length&&eX(e,ef(o.id.client,o.id.clock+r));break}r-=o.length}return t._searchMarker&&tO(t._searchMarker,i,n.length),tq(e,t,o,n)},tG=(e,t,r,n)=>{if(0===n)return;let i=r,s=n,o=tD(t,r),l=t._start;for(null!==o&&(l=o.p,r-=o.index);null!==l&&r>0;l=l.right)!l.deleted&&l.countable&&(r<l.length&&eX(e,ef(l.id.client,l.id.clock+r)),r-=l.length);for(;n>0&&null!==l;)l.deleted||(n<l.length&&eX(e,ef(l.id.client,l.id.clock+n)),l.delete(e),n-=l.length),l=l.right;if(n>0)throw tJ();t._searchMarker&&tO(t._searchMarker,i,-s+n)},tY=(e,t,r)=>{let n=t._map.get(r);void 0!==n&&n.delete(e)},tH=(e,t,r,n)=>{let i,s=t._map.get(r)||null,o=e.doc,l=o.clientID;if(null==n)i=new rA([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:i=new rA([n]);break;case Uint8Array:i=new rb(n);break;case F:i=new rS(n);break;default:if(n instanceof tN)i=new rL(n);else throw Error("Unexpected content type")}new rq(ef(l,eJ(o.store,l)),s,s&&s.lastId,null,null,t,r,i).integrate(e,0)},tX=(e,t)=>{e.doc??t_();let r=e._map.get(t);return void 0===r||r.deleted?void 0:r.content.getContent()[r.length-1]},tK=e=>{let t={};return e.doc??t_(),e._map.forEach((e,r)=>{e.deleted||(t[r]=e.content.getContent()[e.length-1])}),t},tZ=(e,t)=>{e.doc??t_();let r=e._map.get(t);return void 0!==r&&!r.deleted},tQ=(e,t,r)=>{let n=e._map.get(t)||null;for(;null!==n&&(!r.sv.has(n.id.client)||n.id.clock>=(r.sv.get(n.id.client)||0));)n=n.left;return null!==n&&eV(n,r)?n.content.getContent()[n.length-1]:void 0},t0=(e,t)=>{let r={};return e._map.forEach((e,n)=>{let i=e;for(;null!==i&&(!t.sv.has(i.id.client)||i.id.clock>=(t.sv.get(i.id.client)||0));)i=i.left;null!==i&&eV(i,t)&&(r[n]=i.content.getContent()[i.length-1])}),r},t1=e=>(e.doc??t_(),E.iteratorFilter(e._map.entries(),e=>!e[1].deleted));class t2 extends tC{}class t8 extends tN{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){let t=new t8;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new t8}clone(){let e=new t8;return e.insert(0,this.toArray().map(e=>e instanceof tN?e.clone():e)),e}get length(){return this.doc??t_(),this._length}_callObserver(e,t){super._callObserver(e,t),tM(this,e,new t2(this,e))}insert(e,t){null!==this.doc?e4(this.doc,r=>{tW(r,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?e4(this.doc,t=>{((e,t,r)=>{let n=(t._searchMarker||[]).reduce((e,t)=>t.index>e.index?t:e,{index:0,p:t._start}).p;if(n)for(;n.right;)n=n.right;return tq(e,t,n,r)})(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?e4(this.doc,r=>{tG(r,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return tz(this,e)}toArray(){return tV(this)}slice(e=0,t=this.length){return tL(this,e,t)}toJSON(){return this.map(e=>e instanceof tN?e.toJSON():e)}map(e){return t$(this,e)}forEach(e){tP(this,e)}[Symbol.iterator](){let e,t,r;return e=this._start,t=null,r=0,{[Symbol.iterator](){return this},next:()=>{if(null===t){for(;null!==e&&e.deleted;)e=e.right;if(null===e)return{done:!0,value:void 0};t=e.content.getContent(),r=0,e=e.right}let n=t[r++];return t.length<=r&&(t=null),{done:!1,value:n}}}}_write(e){e.writeTypeRef(rj)}}class t6 extends tC{constructor(e,t,r){super(e,t),this.keysChanged=r}}class t3 extends tN{constructor(e){super(),this._prelimContent=null,void 0===e?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((e,t)=>{this.set(t,e)}),this._prelimContent=null}_copy(){return new t3}clone(){let e=new t3;return this.forEach((t,r)=>{e.set(r,t instanceof tN?t.clone():t)}),e}_callObserver(e,t){tM(this,e,new t6(this,e,t))}toJSON(){this.doc??t_();let e={};return this._map.forEach((t,r)=>{if(!t.deleted){let n=t.content.getContent()[t.length-1];e[r]=n instanceof tN?n.toJSON():n}}),e}get size(){return[...t1(this)].length}keys(){return E.iteratorMap(t1(this),e=>e[0])}values(){return E.iteratorMap(t1(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return E.iteratorMap(t1(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??t_(),this._map.forEach((t,r)=>{t.deleted||e(t.content.getContent()[t.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?e4(this.doc,t=>{tY(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?e4(this.doc,r=>{tH(r,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return tX(this,e)}has(e){return tZ(this,e)}clear(){null!==this.doc?e4(this.doc,e=>{this.forEach(function(t,r,n){tY(e,n,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(rB)}}let t5=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&I.equalFlat(e,t);class t4{constructor(e,t,r,n){this.left=e,this.right=t,this.index=r,this.currentAttributes=n}forward(){null===this.right&&p.unexpectedCase(),this.right.content.constructor===rU?this.right.deleted||rt(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}}let t9=(e,t,r)=>{for(;null!==t.right&&r>0;)t.right.content.constructor===rU?t.right.deleted||rt(t.currentAttributes,t.right.content):t.right.deleted||(r<t.right.length&&eX(e,ef(t.right.id.client,t.right.id.clock+r)),t.index+=t.right.length,r-=t.right.length),t.left=t.right,t.right=t.right.right;return t},t7=(e,t,r,n)=>{let i=new Map,s=n?tD(t,r):null;return s?t9(e,new t4(s.p.left,s.p,s.index,i),r-s.index):t9(e,new t4(null,t._start,0,i),r)},re=(e,t,r,n)=>{for(;null!==r.right&&(!0===r.right.deleted||r.right.content.constructor===rU&&t5(n.get(r.right.content.key),r.right.content.value));)r.right.deleted||n.delete(r.right.content.key),r.forward();let i=e.doc,s=i.clientID;n.forEach((n,o)=>{let l=r.left,a=r.right,c=new rq(ef(s,eJ(i.store,s)),l,l&&l.lastId,a,a&&a.id,t,null,new rU(o,n));c.integrate(e,0),r.right=c,r.forward()})},rt=(e,t)=>{let{key:r,value:n}=t;null===n?e.delete(r):e.set(r,n)},rr=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===rU&&t5(t[e.right.content.key]??null,e.right.content.value));){;e.forward()}},rn=(e,t,r,n)=>{let i=e.doc,s=i.clientID,o=new Map;for(let l in n){let a=n[l],c=r.currentAttributes.get(l)??null;if(!t5(c,a)){o.set(l,c);let{left:n,right:h}=r;r.right=new rq(ef(s,eJ(i.store,s)),n,n&&n.lastId,h,h&&h.id,t,null,new rU(l,a)),r.right.integrate(e,0),r.forward()}}return o},ri=(e,t,r,n,i)=>{r.currentAttributes.forEach((e,t)=>{void 0===i[t]&&(i[t]=null)});let s=e.doc,o=s.clientID;rr(r,i);let l=rn(e,t,r,i),a=n.constructor===String?new r_(n):n instanceof tN?new rL(n):new rv(n),{left:c,right:h,index:u}=r;t._searchMarker&&tO(t._searchMarker,r.index,a.getLength()),(h=new rq(ef(o,eJ(s.store,o)),c,c&&c.lastId,h,h&&h.id,t,null,a)).integrate(e,0),r.right=h,r.index=u,r.forward(),re(e,t,r,l)},rs=(e,t,r,n,i)=>{let s=e.doc,o=s.clientID;rr(r,i);let l=rn(e,t,r,i);for(;null!==r.right&&(n>0||l.size>0&&(r.right.deleted||r.right.content.constructor===rU));){if(!r.right.deleted)if(r.right.content.constructor===rU){let{key:t,value:s}=r.right.content,o=i[t];if(void 0!==o){if(t5(o,s))l.delete(t);else{if(0===n)break;l.set(t,s)}r.right.delete(e)}else r.currentAttributes.set(t,s)}else n<r.right.length&&eX(e,ef(r.right.id.client,r.right.id.clock+n)),n-=r.right.length;r.forward()}if(n>0){let i="";for(;n>0;n--)i+="\n";r.right=new rq(ef(o,eJ(s.store,o)),r.left,r.left&&r.left.lastId,r.right,r.right&&r.right.id,t,null,new r_(i)),r.right.integrate(e,0),r.forward()}re(e,t,r,l)},ro=(e,t,r,n,i)=>{let s=t,o=a.create();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===rU){let e=s.content;o.set(e.key,e)}s=s.right}let l=0,c=!1;for(;t!==s;){if(r===t&&(c=!0),!t.deleted){let r=t.content;if(r.constructor===rU){let{key:s,value:a}=r,h=n.get(s)??null;(o.get(s)!==r||h===a)&&(t.delete(e),l++,c||(i.get(s)??null)!==a||h===a||(null===h?i.delete(s):i.set(s,h))),c||t.deleted||rt(i,r)}}t=t.right}return l},rl=e=>{let t=0;return e4(e.doc,r=>{let n=e._start,i=e._start,s=a.create(),o=a.copy(s);for(;i;)!1===i.deleted&&(i.content.constructor===rU?rt(o,i.content):(t+=ro(r,n,i,s,o),s=a.copy(o),n=i)),i=i.right}),t},ra=e=>{let t=new Set,r=e.doc;for(let[n,i]of e.afterState.entries()){let s=e.beforeState.get(n)||0;i!==s&&eZ(e,r.store.clients.get(n),s,i,e=>{e.deleted||e.content.constructor!==rU||e.constructor===rx||t.add(e.parent)})}e4(r,r=>{for(let n of(A(e,e.deleteSet,e=>{if(e instanceof rx||!e.parent._hasFormatting||t.has(e.parent))return;let n=e.parent;if(e.content.constructor===rU)t.add(n);else{for(var i=e;i&&i.right&&(i.right.deleted||!i.right.countable);)i=i.right;let t=new Set;for(;i&&(i.deleted||!i.countable);){if(!i.deleted&&i.content.constructor===rU){let e=i.content.key;t.has(e)?i.delete(r):t.add(e)}i=i.left}}}),t))rl(n)})},rc=(e,t,r)=>{let n=r,i=a.copy(t.currentAttributes),s=t.right;for(;r>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case rL:case rv:case r_:r<t.right.length&&eX(e,ef(t.right.id.client,t.right.id.clock+r)),r-=t.right.length,t.right.delete(e)}t.forward()}s&&ro(e,s,t.right,i,t.currentAttributes);let o=(t.left||t.right).parent;return o._searchMarker&&tO(o._searchMarker,t.index,-n+r),t};class rh extends tC{constructor(e,t,r){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)})}get changes(){if(null===this._changes){let e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){let e=this.target.doc,t=[];e4(e,e=>{let r=new Map,n=new Map,i=this.target._start,s=null,o={},l="",a=0,c=0,h=()=>{if(null!==s){let e=null;switch(s){case"delete":c>0&&(e={delete:c}),c=0;break;case"insert":("object"==typeof l||l.length>0)&&(e={insert:l},r.size>0&&(e.attributes={},r.forEach((t,r)=>{null!==t&&(e.attributes[r]=t)}))),l="";break;case"retain":a>0&&(e={retain:a},I.isEmpty(o)||(e.attributes=I.assign({},o))),a=0}e&&t.push(e),s=null}};for(;null!==i;){switch(i.content.constructor){case rL:case rv:this.adds(i)?this.deletes(i)||(h(),s="insert",l=i.content.getContent()[0],h()):this.deletes(i)?("delete"!==s&&(h(),s="delete"),c+=1):i.deleted||("retain"!==s&&(h(),s="retain"),a+=1);break;case r_:this.adds(i)?this.deletes(i)||("insert"!==s&&(h(),s="insert"),l+=i.content.str):this.deletes(i)?("delete"!==s&&(h(),s="delete"),c+=i.length):i.deleted||("retain"!==s&&(h(),s="retain"),a+=i.length);break;case rU:{let{key:t,value:l}=i.content;if(this.adds(i))this.deletes(i)||(t5(r.get(t)??null,l)?null!==l&&i.delete(e):("retain"===s&&h(),t5(l,n.get(t)??null)?delete o[t]:o[t]=l));else if(this.deletes(i)){n.set(t,l);let e=r.get(t)??null;t5(e,l)||("retain"===s&&h(),o[t]=e)}else if(!i.deleted){n.set(t,l);let r=o[t];void 0!==r&&(t5(r,l)?null!==r&&i.delete(e):("retain"===s&&h(),null===l?delete o[t]:o[t]=l))}i.deleted||("insert"===s&&h(),rt(r,i.content))}}i=i.right}for(h();t.length>0;){let e=t[t.length-1];if(void 0!==e.retain&&void 0===e.attributes)t.pop();else break}}),this._delta=t}return this._delta}}class ru extends tN{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??t_(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(e=>e())}catch(e){console.error(e)}this._pending=null}_copy(){return new ru}clone(){let e=new ru;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);let r=new rh(this,e,t);tM(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??t_();let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===r_&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?e4(this.doc,r=>{let n=new t4(null,this._start,0,new Map);for(let i=0;i<e.length;i++){let s=e[i];if(void 0!==s.insert){let o=t||"string"!=typeof s.insert||i!==e.length-1||null!==n.right||"\n"!==s.insert.slice(-1)?s.insert:s.insert.slice(0,-1);("string"!=typeof o||o.length>0)&&ri(r,this,n,o,s.attributes||{})}else void 0!==s.retain?rs(r,this,n,s.retain,s.attributes||{}):void 0!==s.delete&&rc(r,n,s.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,r){this.doc??t_();let n=[],i=new Map,s=this.doc,o="",l=this._start;function a(){if(o.length>0){let e={},t=!1;i.forEach((r,n)=>{t=!0,e[n]=r});let r={insert:o};t&&(r.attributes=e),n.push(r),o=""}}let c=()=>{for(;null!==l;){if(eV(l,e)||void 0!==t&&eV(l,t))switch(l.content.constructor){case r_:{let n=i.get("ychange");void 0===e||eV(l,e)?void 0===t||eV(l,t)?void 0!==n&&(a(),i.delete("ychange")):(void 0===n||n.user!==l.id.client||"added"!==n.type)&&(a(),i.set("ychange",r?r("added",l.id):{type:"added"})):(void 0===n||n.user!==l.id.client||"removed"!==n.type)&&(a(),i.set("ychange",r?r("removed",l.id):{type:"removed"})),o+=l.content.str;break}case rL:case rv:{a();let e={insert:l.content.getContent()[0]};if(i.size>0){let t={};e.attributes=t,i.forEach((e,r)=>{t[r]=e})}n.push(e);break}case rU:eV(l,e)&&(a(),rt(i,l.content))}l=l.right}a()};return e||t?e4(s,r=>{e&&eF(r,e),t&&eF(r,t),c()},"cleanup"):c(),n}insert(e,t,r){if(t.length<=0)return;let n=this.doc;null!==n?e4(n,n=>{let i=t7(n,this,e,!r);r||(r={},i.currentAttributes.forEach((e,t)=>{r[t]=e})),ri(n,this,i,t,r)}):this._pending.push(()=>this.insert(e,t,r))}insertEmbed(e,t,r){let n=this.doc;null!==n?e4(n,n=>{let i=t7(n,this,e,!r);ri(n,this,i,t,r||{})}):this._pending.push(()=>this.insertEmbed(e,t,r||{}))}delete(e,t){if(0===t)return;let r=this.doc;null!==r?e4(r,r=>{rc(r,t7(r,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,r){if(0===t)return;let n=this.doc;null!==n?e4(n,n=>{let i=t7(n,this,e,!1);null!==i.right&&rs(n,this,i,t,r)}):this._pending.push(()=>this.format(e,t,r))}removeAttribute(e){null!==this.doc?e4(this.doc,t=>{tY(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){null!==this.doc?e4(this.doc,r=>{tH(r,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return tX(this,e)}getAttributes(){return tK(this)}_write(e){e.writeTypeRef(rD)}}class rd{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??t_()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do if(t=e.content.type,e.deleted||t.constructor!==rp&&t.constructor!==rf||null===t._start)for(;null!==e;){let t=e.next;if(null!==t){e=t;break}e=e.parent===this._root?null:e.parent._item}else e=t._start;while(null!==e&&(e.deleted||!this._filter(e.content.type)))return(this._firstCall=!1,null===e)?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class rf extends tN{constructor(){super(),this._prelimContent=[]}get firstChild(){let e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new rf}clone(){let e=new rf;return e.insert(0,this.toArray().map(e=>e instanceof tN?e.clone():e)),e}get length(){return this.doc??t_(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new rd(this,e)}querySelector(e){e=e.toUpperCase();let t=new rd(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),o.from(new rd(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){tM(this,e,new rg(this,t,e))}toString(){return t$(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},r){let n=e.createDocumentFragment();return void 0!==r&&r._createAssociation(n,this),tP(this,i=>{n.insertBefore(i.toDOM(e,t,r),null)}),n}insert(e,t){null!==this.doc?e4(this.doc,r=>{tW(r,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)e4(this.doc,r=>{tq(r,this,e&&e instanceof tN?e._item:e,t)});else{let r=this._prelimContent,n=null===e?0:r.findIndex(t=>t===e)+1;if(0===n&&null!==e)throw p.create("Reference item not found");r.splice(n,0,...t)}}delete(e,t=1){null!==this.doc?e4(this.doc,r=>{tG(r,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return tV(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return tz(this,e)}slice(e=0,t=this.length){return tL(this,e,t)}forEach(e){tP(this,e)}_write(e){e.writeTypeRef(rR)}}class rp extends rf{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((e,t)=>{this.setAttribute(t,e)}),this._prelimAttrs=null}_copy(){return new rp(this.nodeName)}clone(){let e=new rp(this.nodeName),t=this.getAttributes();return I.forEach(t,(t,r)=>{"string"==typeof t&&e.setAttribute(r,t)}),e.insert(0,this.toArray().map(e=>e instanceof tN?e.clone():e)),e}toString(){let e=this.getAttributes(),t=[],r=[];for(let t in e)r.push(t);r.sort();let n=r.length;for(let i=0;i<n;i++){let n=r[i];t.push(n+'="'+e[n]+'"')}let i=this.nodeName.toLocaleLowerCase(),s=t.length>0?" "+t.join(" "):"";return`<${i}${s}>${super.toString()}</${i}>`}removeAttribute(e){null!==this.doc?e4(this.doc,t=>{tY(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?e4(this.doc,r=>{tH(r,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return tX(this,e)}hasAttribute(e){return tZ(this,e)}getAttributes(e){return e?t0(this,e):tK(this)}toDOM(e=document,t={},r){let n=e.createElement(this.nodeName),i=this.getAttributes();for(let e in i){let t=i[e];"string"==typeof t&&n.setAttribute(e,t)}return tP(this,i=>{n.appendChild(i.toDOM(e,t,r))}),void 0!==r&&r._createAssociation(n,this),n}_write(e){e.writeTypeRef(rO),e.writeKey(this.nodeName)}}class rg extends tC{constructor(e,t,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)})}}class rm extends t3{constructor(e){super(),this.hookName=e}_copy(){return new rm(this.hookName)}clone(){let e=new rm(this.hookName);return this.forEach((t,r)=>{e.set(r,t)}),e}toDOM(e=document,t={},r){let n,i=t[this.hookName];return(n=void 0!==i?i.createDom(this):document.createElement(this.hookName)).setAttribute("data-yjs-hook",this.hookName),void 0!==r&&r._createAssociation(n,this),n}_write(e){e.writeTypeRef(rM),e.writeKey(this.hookName)}}class ry extends ru{get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new ry}clone(){let e=new ry;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,r){let n=e.createTextNode(this.toString());return void 0!==r&&r._createAssociation(n,this),n}toString(){return this.toDelta().map(e=>{let t=[];for(let r in e.attributes){let n=[];for(let t in e.attributes[r])n.push({key:t,value:e.attributes[r][t]});n.sort((e,t)=>e.key<t.key?-1:1),t.push({nodeName:r,attrs:n})}t.sort((e,t)=>e.nodeName<t.nodeName?-1:1);let r="";for(let e=0;e<t.length;e++){let n=t[e];r+=`<${n.nodeName}`;for(let e=0;e<n.attrs.length;e++){let t=n.attrs[e];r+=` ${t.key}="${t.value}"`}r+=">"}r+=e.insert;for(let e=t.length-1;e>=0;e--)r+=`</${t[e].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(rN)}}class rw{constructor(e,t){this.id=e,this.length=t}get deleted(){throw p.methodUnimplemented()}mergeWith(e){return!1}write(e,t,r){throw p.methodUnimplemented()}integrate(e,t){throw p.methodUnimplemented()}}class rx extends rw{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),eW(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class rb{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new rb(this.content)}splice(e){throw p.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class rE{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new rE(this.len)}splice(e){let t=new rE(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){B(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}let rI=(e,t)=>new F({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class rS{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;let t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new rS(rI(this.doc.guid,this.opts))}splice(e){throw p.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class rv{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new rv(this.embed)}splice(e){throw p.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class rU{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new rU(this.key,this.value)}splice(e){throw p.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){let r=t.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class rk{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new rk(this.arr)}splice(e){let t=new rk(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){let r=this.arr.length;e.writeLen(r-t);for(let n=t;n<r;n++){let t=this.arr[n];e.writeString(void 0===t?"undefined":JSON.stringify(t))}}getRef(){return 2}}let rC="development"===S.getVariable("node_env");class rA{constructor(e){this.arr=e,rC&&I.deepFreeze(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new rA(this.arr)}splice(e){let t=new rA(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){let r=this.arr.length;e.writeLen(r-t);for(let n=t;n<r;n++){let t=this.arr[n];e.writeAny(t)}}getRef(){return 8}}class r_{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new r_(this.str)}splice(e){let t=new r_(this.str.slice(e));this.str=this.str.slice(0,e);let r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"",t.str=""+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}let rT=[e=>new t8,e=>new t3,e=>new ru,e=>new rp(e.readKey()),e=>new rf,e=>new rm(e.readKey()),e=>new ry],rj=0,rB=1,rD=2,rO=3,rR=4,rM=5,rN=6;class rL{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new rL(this.type._copy())}splice(e){throw p.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(t=>{for(;null!==t;)t.gc(e,!0),t=t.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}let rV=(e,t)=>{let r,n=t,i=0;do i>0&&(n=ef(n.client,n.clock+i)),r=eY(e,n),i=n.clock-r.id.clock,n=r.redone;while(null!==n&&r instanceof rq)return{item:r,diff:i}},rF=(e,t)=>{for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},rP=(e,t,r)=>{let{client:n,clock:i}=t.id,s=new rq(ef(n,i+r),t,ef(n,i+r-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(r));return t.deleted&&s.markDeleted(),t.keep&&(s.keep=!0),null!==t.redone&&(s.redone=ef(t.redone.client,t.redone.clock+r)),t.right=s,null!==s.right&&(s.right.left=s),e._mergeStructs.push(s),null!==s.parentSub&&null===s.right&&s.parent._map.set(s.parentSub,s),t.length=r,s},r$=(e,t)=>o.some(e,e=>_(e.deletions,t)),rz=(e,t,r,n,i,s)=>{let o,l=e.doc,a=l.store,c=l.clientID,h=t.redone;if(null!==h)return eX(e,h);let u=t.parent._item,d=null;if(null!==u&&!0===u.deleted){if(null===u.redone&&(!r.has(u)||null===rz(e,u,r,n,i,s)))return null;for(;null!==u.redone;)u=eX(e,u.redone)}let f=null===u?t.parent:u.content.type;if(null===t.parentSub){for(d=t.left,o=t;null!==d;){let t=d;for(;null!==t&&t.parent._item!==u;)t=null===t.redone?null:eX(e,t.redone);if(null!==t&&t.parent._item===u){d=t;break}d=d.left}for(;null!==o;){let t=o;for(;null!==t&&t.parent._item!==u;)t=null===t.redone?null:eX(e,t.redone);if(null!==t&&t.parent._item===u){o=t;break}o=o.right}}else if(o=null,t.right&&!i){for(d=t;null!==d&&null!==d.right&&(d.right.redone||_(n,d.right.id)||r$(s.undoStack,d.right.id)||r$(s.redoStack,d.right.id));)for(d=d.right;d.redone;)d=eX(e,d.redone);if(d&&null!==d.right)return null}else d=f._map.get(t.parentSub)||null;let p=eJ(a,c),g=ef(c,p),m=new rq(g,d,d&&d.lastId,o,o&&o.id,f,t.parentSub,t.content.copy());return t.redone=g,rF(m,!0),m.integrate(e,0),m};class rq extends rw{constructor(e,t,r,n,i,s,o,l){super(e,l.getLength()),this.origin=r,this.left=t,this.right=n,this.rightOrigin=i,this.parent=s,this.parentSub=o,this.redone=null,this.content=l,this.info=this.content.isCountable()?g.BIT2:0}set marker(e){(this.info&g.BIT4)>0!==e&&(this.info^=g.BIT4)}get marker(){return(this.info&g.BIT4)>0}get keep(){return(this.info&g.BIT1)>0}set keep(e){this.keep!==e&&(this.info^=g.BIT1)}get countable(){return(this.info&g.BIT2)>0}get deleted(){return(this.info&g.BIT3)>0}set deleted(e){this.deleted!==e&&(this.info^=g.BIT3)}markDeleted(){this.info|=g.BIT3}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=eJ(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=eJ(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===eu&&this.id.client!==this.parent.client&&this.parent.clock>=eJ(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=eK(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=eX(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===rx||this.right&&this.right.constructor===rx)this.parent=null;else if(this.parent){if(this.parent.constructor===eu){let e=eY(t,this.parent);e.constructor===rx?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===rq?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===rq&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=eK(e,e.doc.store,ef(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,r=this.left;if(null!==r)t=r.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;let n=new Set,i=new Set;for(;null!==t&&t!==this.right;){if(i.add(t),n.add(t),ed(this.origin,t.origin)){if(t.id.client<this.id.client)r=t,n.clear();else if(ed(this.rightOrigin,t.rightOrigin))break}else if(null!==t.origin&&i.has(eY(e.doc.store,t.origin)))n.has(eY(e.doc.store,t.origin))||(r=t,n.clear());else break;t=t.right}this.left=r}if(null!==this.left){let e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),eW(e.doc.store,this),this.content.integrate(e,this),e1(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new rx(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:ef(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&ed(e.origin,this.lastId)&&this.right===e&&ed(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){let t=this.parent._searchMarker;return t&&t.forEach(t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){let t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),B(e.deleteSet,this.id.client,this.id.clock,this.length),e1(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw p.unexpectedCase();this.content.gc(e),t?((e,t,r)=>{let n=e.clients.get(t.id.client);n[eG(n,t.id.clock)]=r})(e,this,new rx(this.id,this.length)):this.content=new rE(this.length)}write(e,t){let r=t>0?ef(this.id.client,this.id.clock+t-1):this.origin,n=this.rightOrigin,i=this.parentSub,s=this.content.getRef()&g.BITS5|(null===r?0:g.BIT8)|(null===n?0:g.BIT7)|(null===i?0:g.BIT6);if(e.writeInfo(s),null!==r&&e.writeLeftID(r),null!==n&&e.writeRightID(n),null===r&&null===n){let t=this.parent;if(void 0!==t._item){let r=t._item;if(null===r){let r=em(t);e.writeParentInfo(!0),e.writeString(r)}else e.writeParentInfo(!1),e.writeLeftID(r.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===eu?(e.writeParentInfo(!1),e.writeLeftID(t)):p.unexpectedCase();null!==i&&e.writeString(i)}this.content.write(e,t)}}let rJ=(e,t)=>rW[t&g.BITS5](e),rW=[()=>{p.unexpectedCase()},e=>new rE(e.readLen()),e=>{let t=e.readLen(),r=[];for(let n=0;n<t;n++){let t=e.readString();"undefined"===t?r.push(void 0):r.push(JSON.parse(t))}return new rk(r)},e=>new rb(e.readBuf()),e=>new r_(e.readString()),e=>new rv(e.readJSON()),e=>new rU(e.readKey(),e.readJSON()),e=>new rL(rT[e.readTypeRef()](e)),e=>{let t=e.readLen(),r=[];for(let n=0;n<t;n++)r.push(e.readAny());return new rA(r)},e=>new rS(rI(e.readString(),e.readAny())),()=>{p.unexpectedCase()}];class rG extends rw{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){p.unexpectedCase()}write(e,t){e.writeInfo(10),c.writeVarUint(e.restEncoder,this.length-t)}getMissing(e,t){return null}}let rY="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==v?v:{},rH="__ $YJS$ __";!0===rY[rH]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),rY[rH]=!0},{"lib0/observable":"9aNB9","lib0/array":"kcR8B","lib0/math":"icsnC","lib0/map":"gsPjK","lib0/encoding":"jAo8y","lib0/decoding":"2MQNo","lib0/random":"6zQml","lib0/promise":"98Jbs","lib0/buffer":"ezlBF","lib0/error":"gsHuq","lib0/binary":"c3vnv","lib0/function":"5S3AJ","lib0/set":"5gNQm","lib0/logging":"blwZs","lib0/time":"b6cMp","lib0/string":"l5ap6","lib0/iterator":"dOXgT","lib0/object":"eUSla","lib0/environment":"8YiHn","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"9aNB9":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"ObservableV2",()=>a),i.export(r,"Observable",()=>c);var s=e("./map.js"),o=e("./set.js"),l=e("./array.js");class a{constructor(){this._observers=s.create()}on(e,t){return s.setIfUndefined(this._observers,e,o.create).add(t),t}once(e,t){let r=(...n)=>{this.off(e,r),t(...n)};this.on(e,r)}off(e,t){let r=this._observers.get(e);void 0!==r&&(r.delete(t),0===r.size&&this._observers.delete(e))}emit(e,t){return l.from((this._observers.get(e)||s.create()).values()).forEach(e=>e(...t))}destroy(){this._observers=s.create()}}class c{constructor(){this._observers=s.create()}on(e,t){s.setIfUndefined(this._observers,e,o.create).add(t)}once(e,t){let r=(...n)=>{this.off(e,r),t(...n)};this.on(e,r)}off(e,t){let r=this._observers.get(e);void 0!==r&&(r.delete(t),0===r.size&&this._observers.delete(e))}emit(e,t){return l.from((this._observers.get(e)||s.create()).values()).forEach(e=>e(...t))}destroy(){this._observers=s.create()}}},{"./map.js":"gsPjK","./set.js":"5gNQm","./array.js":"kcR8B","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],gsPjK:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"create",()=>s),i.export(r,"copy",()=>o),i.export(r,"setIfUndefined",()=>l),i.export(r,"map",()=>a),i.export(r,"any",()=>c),i.export(r,"all",()=>h);let s=()=>new Map,o=e=>{let t=s();return e.forEach((e,r)=>{t.set(r,e)}),t},l=(e,t,r)=>{let n=e.get(t);return void 0===n&&e.set(t,n=r()),n},a=(e,t)=>{let r=[];for(let[n,i]of e)r.push(t(i,n));return r},c=(e,t)=>{for(let[r,n]of e)if(t(n,r))return!0;return!1},h=(e,t)=>{for(let[r,n]of e)if(!t(n,r))return!1;return!0}},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],j9EeU:[function(e,t,r,n){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach(function(r){"default"===r||"__esModule"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}],"5gNQm":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"create",()=>s),i.export(r,"toArray",()=>o),i.export(r,"first",()=>l),i.export(r,"from",()=>a);let s=()=>new Set,o=e=>Array.from(e),l=e=>e.values().next().value??void 0,a=e=>new Set(e)},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],kcR8B:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"last",()=>o),i.export(r,"create",()=>l),i.export(r,"copy",()=>a),i.export(r,"appendTo",()=>c),i.export(r,"from",()=>h),i.export(r,"every",()=>u),i.export(r,"some",()=>d),i.export(r,"equalFlat",()=>f),i.export(r,"flatten",()=>p),i.export(r,"unfold",()=>g),i.export(r,"fold",()=>m),i.export(r,"isArray",()=>y),i.export(r,"unique",()=>w),i.export(r,"uniqueBy",()=>x),i.export(r,"map",()=>b),i.export(r,"bubblesortItem",()=>E);var s=e("./set.js");let o=e=>e[e.length-1],l=()=>[],a=e=>e.slice(),c=(e,t)=>{for(let r=0;r<t.length;r++)e.push(t[r])},h=Array.from,u=(e,t)=>{for(let r=0;r<e.length;r++)if(!t(e[r],r,e))return!1;return!0},d=(e,t)=>{for(let r=0;r<e.length;r++)if(t(e[r],r,e))return!0;return!1},f=(e,t)=>e.length===t.length&&u(e,(e,r)=>e===t[r]),p=e=>m(e,[],(e,t)=>e.concat(t)),g=(e,t)=>{let r=Array(e);for(let n=0;n<e;n++)r[n]=t(n,r);return r},m=(e,t,r)=>e.reduce(r,t),y=Array.isArray,w=e=>h(s.from(e)),x=(e,t)=>{let r=s.create(),n=[];for(let i=0;i<e.length;i++){let s=e[i],o=t(s);r.has(o)||(r.add(o),n.push(s))}return n},b=(e,t)=>{let r=Array(e.length);for(let n=0;n<e.length;n++)r[n]=t(e[n],n,e);return r},E=(e,t,r)=>{let n=e[t],i=t;for(;r(n,e[i+1])>0;)e[i]=e[i+1],e[++i]=n;if(t===i&&i>0)for(;r(e[i-1],n)>0;)e[i]=e[i-1],e[--i]=n;return i}},{"./set.js":"5gNQm","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],icsnC:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"floor",()=>s),i.export(r,"ceil",()=>o),i.export(r,"abs",()=>l),i.export(r,"imul",()=>a),i.export(r,"round",()=>c),i.export(r,"log10",()=>h),i.export(r,"log2",()=>u),i.export(r,"log",()=>d),i.export(r,"sqrt",()=>f),i.export(r,"add",()=>p),i.export(r,"min",()=>g),i.export(r,"max",()=>m),i.export(r,"isNaN",()=>y),i.export(r,"pow",()=>w),i.export(r,"exp10",()=>x),i.export(r,"sign",()=>b),i.export(r,"isNegativeZero",()=>E);let s=Math.floor,o=Math.ceil,l=Math.abs,a=Math.imul,c=Math.round,h=Math.log10,u=Math.log2,d=Math.log,f=Math.sqrt,p=(e,t)=>e+t,g=(e,t)=>e<t?e:t,m=(e,t)=>e>t?e:t,y=Number.isNaN,w=Math.pow,x=e=>Math.pow(10,e),b=Math.sign,E=e=>0!==e?e<0:1/e<0},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],jAo8y:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"Encoder",()=>h),i.export(r,"createEncoder",()=>u),i.export(r,"encode",()=>d),i.export(r,"length",()=>f),i.export(r,"hasContent",()=>p),i.export(r,"toUint8Array",()=>g),i.export(r,"verifyLen",()=>m),i.export(r,"write",()=>y),i.export(r,"set",()=>w),i.export(r,"writeUint8",()=>x),i.export(r,"setUint8",()=>b),i.export(r,"writeUint16",()=>E),i.export(r,"setUint16",()=>I),i.export(r,"writeUint32",()=>S),i.export(r,"writeUint32BigEndian",()=>v),i.export(r,"setUint32",()=>U),i.export(r,"writeVarUint",()=>k),i.export(r,"writeVarInt",()=>C),i.export(r,"_writeVarStringNative",()=>T),i.export(r,"_writeVarStringPolyfill",()=>j),i.export(r,"writeVarString",()=>B),i.export(r,"writeTerminatedString",()=>D),i.export(r,"writeTerminatedUint8Array",()=>O),i.export(r,"writeBinaryEncoder",()=>R),i.export(r,"writeUint8Array",()=>M),i.export(r,"writeVarUint8Array",()=>N),i.export(r,"writeOnDataView",()=>L),i.export(r,"writeFloat32",()=>V),i.export(r,"writeFloat64",()=>F),i.export(r,"writeBigInt64",()=>P),i.export(r,"writeBigUint64",()=>$),i.export(r,"writeAny",()=>q),i.export(r,"RleEncoder",()=>J),i.export(r,"IntDiffEncoder",()=>W),i.export(r,"RleIntDiffEncoder",()=>G),i.export(r,"UintOptRleEncoder",()=>H),i.export(r,"IncUintOptRleEncoder",()=>X),i.export(r,"IntDiffOptRleEncoder",()=>Z),i.export(r,"StringEncoder",()=>Q);var s=e("./math.js"),o=e("./number.js"),l=e("./binary.js"),a=e("./string.js"),c=e("./array.js");class h{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}let u=()=>new h,d=e=>{let t=u();return e(t),g(t)},f=e=>{let t=e.cpos;for(let r=0;r<e.bufs.length;r++)t+=e.bufs[r].length;return t},p=e=>e.cpos>0||e.bufs.length>0,g=e=>{let t=new Uint8Array(f(e)),r=0;for(let n=0;n<e.bufs.length;n++){let i=e.bufs[n];t.set(i,r),r+=i.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),r),t},m=(e,t)=>{let r=e.cbuf.length;r-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*s.max(r,t)),e.cpos=0)},y=(e,t)=>{let r=e.cbuf.length;e.cpos===r&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*r),e.cpos=0),e.cbuf[e.cpos++]=t},w=(e,t,r)=>{let n=null;for(let r=0;r<e.bufs.length&&null===n;r++){let i=e.bufs[r];t<i.length?n=i:t-=i.length}null===n&&(n=e.cbuf),n[t]=r},x=y,b=w,E=(e,t)=>{y(e,t&l.BITS8),y(e,t>>>8&l.BITS8)},I=(e,t,r)=>{w(e,t,r&l.BITS8),w(e,t+1,r>>>8&l.BITS8)},S=(e,t)=>{for(let r=0;r<4;r++)y(e,t&l.BITS8),t>>>=8},v=(e,t)=>{for(let r=3;r>=0;r--)y(e,t>>>8*r&l.BITS8)},U=(e,t,r)=>{for(let n=0;n<4;n++)w(e,t+n,r&l.BITS8),r>>>=8},k=(e,t)=>{for(;t>l.BITS7;)y(e,l.BIT8|l.BITS7&t),t=s.floor(t/128);y(e,l.BITS7&t)},C=(e,t)=>{let r=s.isNegativeZero(t);for(r&&(t=-t),y(e,(t>l.BITS6?l.BIT8:0)|(r?l.BIT7:0)|l.BITS6&t),t=s.floor(t/64);t>0;)y(e,(t>l.BITS7?l.BIT8:0)|l.BITS7&t),t=s.floor(t/128)},A=new Uint8Array(3e4),_=A.length/3,T=(e,t)=>{if(t.length<_){let r=a.utf8TextEncoder.encodeInto(t,A).written||0;k(e,r);for(let t=0;t<r;t++)y(e,A[t])}else N(e,a.encodeUtf8(t))},j=(e,t)=>{let r=unescape(encodeURIComponent(t)),n=r.length;k(e,n);for(let t=0;t<n;t++)y(e,r.codePointAt(t))},B=a.utf8TextEncoder&&a.utf8TextEncoder.encodeInto?T:j,D=(e,t)=>O(e,a.encodeUtf8(t)),O=(e,t)=>{for(let r=0;r<t.length;r++){let n=t[r];(0===n||1===n)&&y(e,1),y(e,t[r])}y(e,0)},R=(e,t)=>M(e,g(t)),M=(e,t)=>{let r=e.cbuf.length,n=e.cpos,i=s.min(r-n,t.length),o=t.length-i;e.cbuf.set(t.subarray(0,i),n),e.cpos+=i,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(s.max(2*r,o)),e.cbuf.set(t.subarray(i)),e.cpos=o)},N=(e,t)=>{k(e,t.byteLength),M(e,t)},L=(e,t)=>{m(e,t);let r=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,r},V=(e,t)=>L(e,4).setFloat32(0,t,!1),F=(e,t)=>L(e,8).setFloat64(0,t,!1),P=(e,t)=>L(e,8).setBigInt64(0,t,!1),$=(e,t)=>L(e,8).setBigUint64(0,t,!1),z=new DataView(new ArrayBuffer(4)),q=(e,t)=>{switch(typeof t){case"string":y(e,119),B(e,t);break;case"number":if(o.isInteger(t)&&s.abs(t)<=l.BITS31)y(e,125),C(e,t);else(z.setFloat32(0,t),z.getFloat32(0)===t)?(y(e,124),V(e,t)):(y(e,123),F(e,t));break;case"bigint":y(e,122),P(e,t);break;case"object":if(null===t)y(e,126);else if(c.isArray(t)){y(e,117),k(e,t.length);for(let r=0;r<t.length;r++)q(e,t[r])}else if(t instanceof Uint8Array)y(e,116),N(e,t);else{y(e,118);let r=Object.keys(t);k(e,r.length);for(let n=0;n<r.length;n++){let i=r[n];B(e,i),q(e,t[i])}}break;case"boolean":y(e,t?120:121);break;default:y(e,127)}};class J extends h{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&k(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}class W extends h{constructor(e){super(),this.s=e}write(e){C(this,e-this.s),this.s=e}}class G extends h{constructor(e){super(),this.s=e,this.count=0}write(e){this.s===e&&this.count>0?this.count++:(this.count>0&&k(this,this.count-1),this.count=1,C(this,e-this.s),this.s=e)}}let Y=e=>{e.count>0&&(C(e.encoder,1===e.count?e.s:-e.s),e.count>1&&k(e.encoder,e.count-2))};class H{constructor(){this.encoder=new h,this.s=0,this.count=0}write(e){this.s===e?this.count++:(Y(this),this.count=1,this.s=e)}toUint8Array(){return Y(this),g(this.encoder)}}class X{constructor(){this.encoder=new h,this.s=0,this.count=0}write(e){this.s+this.count===e?this.count++:(Y(this),this.count=1,this.s=e)}toUint8Array(){return Y(this),g(this.encoder)}}let K=e=>{if(e.count>0){let t=2*e.diff+ +(1!==e.count);C(e.encoder,t),e.count>1&&k(e.encoder,e.count-2)}};class Z{constructor(){this.encoder=new h,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(K(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return K(this),g(this.encoder)}}class Q{constructor(){this.sarr=[],this.s="",this.lensE=new H}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){let e=new h;return this.sarr.push(this.s),this.s="",B(e,this.sarr.join("")),M(e,this.lensE.toUint8Array()),g(e)}}},{"./math.js":"icsnC","./number.js":"64qVp","./binary.js":"c3vnv","./string.js":"l5ap6","./array.js":"kcR8B","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"64qVp":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"MAX_SAFE_INTEGER",()=>l),i.export(r,"MIN_SAFE_INTEGER",()=>a),i.export(r,"LOWEST_INT32",()=>c),i.export(r,"HIGHEST_INT32",()=>h),i.export(r,"HIGHEST_UINT32",()=>u),i.export(r,"isInteger",()=>d),i.export(r,"isNaN",()=>f),i.export(r,"parseInt",()=>p),i.export(r,"countBits",()=>g);var s=e("./math.js"),o=e("./binary.js");let l=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,c=-0x80000000,h=o.BITS31,u=o.BITS32,d=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&s.floor(e)===e),f=Number.isNaN,p=Number.parseInt,g=e=>{e&=o.BITS32;let t=0;for(;e;)e&=e-1,t++;return t}},{"./math.js":"icsnC","./binary.js":"c3vnv","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],c3vnv:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"BIT1",()=>s),i.export(r,"BIT2",()=>o),i.export(r,"BIT3",()=>l),i.export(r,"BIT4",()=>a),i.export(r,"BIT5",()=>c),i.export(r,"BIT6",()=>h),i.export(r,"BIT7",()=>u),i.export(r,"BIT8",()=>d),i.export(r,"BIT9",()=>f),i.export(r,"BIT10",()=>p),i.export(r,"BIT11",()=>g),i.export(r,"BIT12",()=>m),i.export(r,"BIT13",()=>y),i.export(r,"BIT14",()=>w),i.export(r,"BIT15",()=>x),i.export(r,"BIT16",()=>b),i.export(r,"BIT17",()=>E),i.export(r,"BIT18",()=>I),i.export(r,"BIT19",()=>S),i.export(r,"BIT20",()=>v),i.export(r,"BIT21",()=>U),i.export(r,"BIT22",()=>k),i.export(r,"BIT23",()=>C),i.export(r,"BIT24",()=>A),i.export(r,"BIT25",()=>_),i.export(r,"BIT26",()=>T),i.export(r,"BIT27",()=>j),i.export(r,"BIT28",()=>B),i.export(r,"BIT29",()=>D),i.export(r,"BIT30",()=>O),i.export(r,"BIT31",()=>R),i.export(r,"BIT32",()=>M),i.export(r,"BITS0",()=>N),i.export(r,"BITS1",()=>L),i.export(r,"BITS2",()=>V),i.export(r,"BITS3",()=>F),i.export(r,"BITS4",()=>P),i.export(r,"BITS5",()=>$),i.export(r,"BITS6",()=>z),i.export(r,"BITS7",()=>q),i.export(r,"BITS8",()=>J),i.export(r,"BITS9",()=>W),i.export(r,"BITS10",()=>G),i.export(r,"BITS11",()=>Y),i.export(r,"BITS12",()=>H),i.export(r,"BITS13",()=>X),i.export(r,"BITS14",()=>K),i.export(r,"BITS15",()=>Z),i.export(r,"BITS16",()=>Q),i.export(r,"BITS17",()=>ee),i.export(r,"BITS18",()=>et),i.export(r,"BITS19",()=>er),i.export(r,"BITS20",()=>en),i.export(r,"BITS21",()=>ei),i.export(r,"BITS22",()=>es),i.export(r,"BITS23",()=>eo),i.export(r,"BITS24",()=>el),i.export(r,"BITS25",()=>ea),i.export(r,"BITS26",()=>ec),i.export(r,"BITS27",()=>eh),i.export(r,"BITS28",()=>eu),i.export(r,"BITS29",()=>ed),i.export(r,"BITS30",()=>ef),i.export(r,"BITS31",()=>ep),i.export(r,"BITS32",()=>eg);let s=1,o=2,l=4,a=8,c=16,h=32,u=64,d=128,f=256,p=512,g=1024,m=2048,y=4096,w=8192,x=16384,b=32768,E=65536,I=131072,S=262144,v=524288,U=1048576,k=2097152,C=4194304,A=8388608,_=0x1000000,T=0x2000000,j=0x4000000,B=0x8000000,D=0x10000000,O=0x20000000,R=0x40000000,M=-0x80000000,N=0,L=1,V=3,F=7,P=15,$=31,z=63,q=127,J=255,W=511,G=1023,Y=2047,H=4095,X=8191,K=16383,Z=32767,Q=65535,ee=131071,et=262143,er=524287,en=1048575,ei=2097151,es=4194303,eo=8388607,el=0xffffff,ea=0x1ffffff,ec=0x3ffffff,eh=0x7ffffff,eu=0xfffffff,ed=0x1fffffff,ef=0x3fffffff,ep=0x7fffffff,eg=0xffffffff},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],l5ap6:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"fromCharCode",()=>o),i.export(r,"fromCodePoint",()=>l),i.export(r,"MAX_UTF16_CHARACTER",()=>a),i.export(r,"trimLeft",()=>h),i.export(r,"fromCamelCase",()=>d),i.export(r,"utf8ByteLength",()=>f),i.export(r,"_encodeUtf8Polyfill",()=>p),i.export(r,"utf8TextEncoder",()=>g),i.export(r,"_encodeUtf8Native",()=>m),i.export(r,"encodeUtf8",()=>y),i.export(r,"_decodeUtf8Polyfill",()=>w),i.export(r,"utf8TextDecoder",()=>x),i.export(r,"_decodeUtf8Native",()=>b),i.export(r,"decodeUtf8",()=>E),i.export(r,"splice",()=>I),i.export(r,"repeat",()=>S);var s=e("./array.js");let o=String.fromCharCode,l=String.fromCodePoint,a=o(65535),c=/^\s*/g,h=e=>e.replace(c,""),u=/([A-Z])/g,d=(e,t)=>h(e.replace(u,e=>`${t}${e.toLowerCase()}`)),f=e=>unescape(encodeURIComponent(e)).length,p=e=>{let t=unescape(encodeURIComponent(e)),r=t.length,n=new Uint8Array(r);for(let e=0;e<r;e++)n[e]=t.codePointAt(e);return n},g="undefined"!=typeof TextEncoder?new TextEncoder:null,m=e=>g.encode(e),y=g?m:p,w=e=>{let t=e.length,r="",n=0;for(;t>0;){let i=t<1e4?t:1e4,s=e.subarray(n,n+i);n+=i,r+=String.fromCodePoint.apply(null,s),t-=i}return decodeURIComponent(escape(r))},x="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});x&&1===x.decode(new Uint8Array).length&&(x=null);let b=e=>x.decode(e),E=x?b:w,I=(e,t,r,n="")=>e.slice(0,t)+n+e.slice(t+r),S=(e,t)=>s.unfold(t,()=>e).join("")},{"./array.js":"kcR8B","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"2MQNo":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"Decoder",()=>f),i.export(r,"createDecoder",()=>p),i.export(r,"hasContent",()=>g),i.export(r,"clone",()=>m),i.export(r,"readUint8Array",()=>y),i.export(r,"readVarUint8Array",()=>w),i.export(r,"readTailAsUint8Array",()=>x),i.export(r,"skip8",()=>b),i.export(r,"readUint8",()=>E),i.export(r,"readUint16",()=>I),i.export(r,"readUint32",()=>S),i.export(r,"readUint32BigEndian",()=>v),i.export(r,"peekUint8",()=>U),i.export(r,"peekUint16",()=>k),i.export(r,"peekUint32",()=>C),i.export(r,"readVarUint",()=>A),i.export(r,"readVarInt",()=>_),i.export(r,"peekVarUint",()=>T),i.export(r,"peekVarInt",()=>j),i.export(r,"_readVarStringPolyfill",()=>B),i.export(r,"_readVarStringNative",()=>D),i.export(r,"readVarString",()=>O),i.export(r,"readTerminatedUint8Array",()=>R),i.export(r,"readTerminatedString",()=>M),i.export(r,"peekVarString",()=>N),i.export(r,"readFromDataView",()=>L),i.export(r,"readFloat32",()=>V),i.export(r,"readFloat64",()=>F),i.export(r,"readBigInt64",()=>P),i.export(r,"readBigUint64",()=>$),i.export(r,"readAny",()=>q),i.export(r,"RleDecoder",()=>J),i.export(r,"IntDiffDecoder",()=>W),i.export(r,"RleIntDiffDecoder",()=>G),i.export(r,"UintOptRleDecoder",()=>Y),i.export(r,"IncUintOptRleDecoder",()=>H),i.export(r,"IntDiffOptRleDecoder",()=>X),i.export(r,"StringDecoder",()=>K);var s=e("./binary.js"),o=e("./math.js"),l=e("./number.js"),a=e("./string.js"),c=e("./error.js"),h=e("./encoding.js");let u=c.create("Unexpected end of array"),d=c.create("Integer out of Range");class f{constructor(e){this.arr=e,this.pos=0}}let p=e=>new f(e),g=e=>e.pos!==e.arr.length,m=(e,t=e.pos)=>{let r=p(e.arr);return r.pos=t,r},y=(e,t)=>{let r=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,r},w=e=>y(e,A(e)),x=e=>y(e,e.arr.length-e.pos),b=e=>e.pos++,E=e=>e.arr[e.pos++],I=e=>{let t=e.arr[e.pos]+(e.arr[e.pos+1]<<8);return e.pos+=2,t},S=e=>{let t=e.arr[e.pos]+(e.arr[e.pos+1]<<8)+(e.arr[e.pos+2]<<16)+(e.arr[e.pos+3]<<24)>>>0;return e.pos+=4,t},v=e=>{let t=e.arr[e.pos+3]+(e.arr[e.pos+2]<<8)+(e.arr[e.pos+1]<<16)+(e.arr[e.pos]<<24)>>>0;return e.pos+=4,t},U=e=>e.arr[e.pos],k=e=>e.arr[e.pos]+(e.arr[e.pos+1]<<8),C=e=>e.arr[e.pos]+(e.arr[e.pos+1]<<8)+(e.arr[e.pos+2]<<16)+(e.arr[e.pos+3]<<24)>>>0,A=e=>{let t=0,r=1,n=e.arr.length;for(;e.pos<n;){let n=e.arr[e.pos++];if(t+=(n&s.BITS7)*r,r*=128,n<s.BIT8)return t;if(t>l.MAX_SAFE_INTEGER)throw d}throw u},_=e=>{let t=e.arr[e.pos++],r=t&s.BITS6,n=64,i=(t&s.BIT7)>0?-1:1;if((t&s.BIT8)==0)return i*r;let o=e.arr.length;for(;e.pos<o;){if(r+=((t=e.arr[e.pos++])&s.BITS7)*n,n*=128,t<s.BIT8)return i*r;if(r>l.MAX_SAFE_INTEGER)throw d}throw u},T=e=>{let t=e.pos,r=A(e);return e.pos=t,r},j=e=>{let t=e.pos,r=_(e);return e.pos=t,r},B=e=>{let t=A(e);if(0===t)return"";{let r=String.fromCodePoint(E(e));if(--t<100)for(;t--;)r+=String.fromCodePoint(E(e));else for(;t>0;){let n=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+n);e.pos+=n,r+=String.fromCodePoint.apply(null,i),t-=n}return decodeURIComponent(escape(r))}},D=e=>a.utf8TextDecoder.decode(w(e)),O=a.utf8TextDecoder?D:B,R=e=>{let t,r=h.createEncoder();for(;;){if(0===(t=E(e)))return h.toUint8Array(r);1===t&&(t=E(e)),h.write(r,t)}},M=e=>a.decodeUtf8(R(e)),N=e=>{let t=e.pos,r=O(e);return e.pos=t,r},L=(e,t)=>{let r=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,r},V=e=>L(e,4).getFloat32(0,!1),F=e=>L(e,8).getFloat64(0,!1),P=e=>L(e,8).getBigInt64(0,!1),$=e=>L(e,8).getBigUint64(0,!1),z=[e=>void 0,e=>null,_,V,F,P,e=>!1,e=>!0,O,e=>{let t=A(e),r={};for(let n=0;n<t;n++)r[O(e)]=q(e);return r},e=>{let t=A(e),r=[];for(let n=0;n<t;n++)r.push(q(e));return r},w],q=e=>z[127-E(e)](e);class J extends f{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),g(this)?this.count=A(this)+1:this.count=-1),this.count--,this.s}}class W extends f{constructor(e,t){super(e),this.s=t}read(){return this.s+=_(this),this.s}}class G extends f{constructor(e,t){super(e),this.s=t,this.count=0}read(){return 0===this.count&&(this.s+=_(this),g(this)?this.count=A(this)+1:this.count=-1),this.count--,this.s}}class Y extends f{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=_(this);let e=o.isNegativeZero(this.s);this.count=1,e&&(this.s=-this.s,this.count=A(this)+2)}return this.count--,this.s}}class H extends f{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=_(this);let e=o.isNegativeZero(this.s);this.count=1,e&&(this.s=-this.s,this.count=A(this)+2)}return this.count--,this.s++}}class X extends f{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){let e=_(this);this.diff=o.floor(e/2),this.count=1,1&e&&(this.count=A(this)+2)}return this.s+=this.diff,this.count--,this.s}}class K{constructor(e){this.decoder=new Y(e),this.str=O(this.decoder),this.spos=0}read(){let e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}},{"./binary.js":"c3vnv","./math.js":"icsnC","./number.js":"64qVp","./string.js":"l5ap6","./error.js":"gsHuq","./encoding.js":"jAo8y","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],gsHuq:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"create",()=>s),i.export(r,"methodUnimplemented",()=>o),i.export(r,"unexpectedCase",()=>l);let s=e=>Error(e),o=()=>{throw s("Method unimplemented")},l=()=>{throw s("Unexpected case")}},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"6zQml":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"rand",()=>a),i.export(r,"uint32",()=>c),i.export(r,"uint53",()=>h),i.export(r,"oneOf",()=>u),i.export(r,"uuidv4",()=>d);var s=e("./math.js"),o=e("./binary.js"),l=e("lib0/webcrypto");let a=Math.random,c=()=>(0,l.getRandomValues)(new Uint32Array(1))[0],h=()=>{let e=(0,l.getRandomValues)(new Uint32Array(8));return(e[0]&o.BITS21)*(o.BITS32+1)+(e[1]>>>0)},u=e=>e[s.floor(a()*e.length)],d=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^c()&15>>e/4).toString(16))},{"./math.js":"icsnC","./binary.js":"c3vnv","lib0/webcrypto":"g4bLl","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],g4bLl:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"subtle",()=>s),i.export(r,"getRandomValues",()=>o);let s=crypto.subtle,o=crypto.getRandomValues.bind(crypto)},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"98Jbs":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"create",()=>o),i.export(r,"createEmpty",()=>l),i.export(r,"all",()=>a),i.export(r,"reject",()=>c),i.export(r,"resolve",()=>h),i.export(r,"resolveWith",()=>u),i.export(r,"until",()=>d),i.export(r,"untilAsync",()=>f),i.export(r,"wait",()=>p),i.export(r,"isPromise",()=>g);var s=e("./time.js");let o=e=>new Promise(e),l=e=>new Promise(e),a=Promise.all.bind(Promise),c=e=>Promise.reject(e),h=e=>Promise.resolve(e),u=e=>Promise.resolve(e),d=(e,t,r=10)=>o((n,i)=>{let o=s.getUnixTime(),l=e>0,a=setInterval(()=>{t()?(clearInterval(a),n()):l&&s.getUnixTime()-o>e&&(clearInterval(a),i(Error("Timeout")))},r)}),f=async(e,t=0,r=10)=>{let n=s.getUnixTime(),i=t<=0;for(;i||s.getUnixTime()-n<=t;){if(await e())return;await p(r)}throw Error("Timeout")},p=e=>o((t,r)=>setTimeout(t,e)),g=e=>e instanceof Promise||e&&e.then&&e.catch&&e.finally},{"./time.js":"b6cMp","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],b6cMp:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"getDate",()=>l),i.export(r,"getUnixTime",()=>a),i.export(r,"humanizeDuration",()=>c);var s=e("./metric.js"),o=e("./math.js");let l=()=>new Date,a=Date.now,c=e=>{if(e<6e4){let t=s.prefix(e,-1);return o.round(100*t.n)/100+t.prefix+"s"}let t=(e=o.floor(e/1e3))%60,r=o.floor(e/60)%60,n=o.floor(e/3600)%24,i=o.floor(e/86400);return i>0?i+"d"+(n>0||r>30?" "+(r>30?n+1:n)+"h":""):n>0?n+"h"+(r>0||t>30?" "+(t>30?r+1:r)+"min":""):r+"min"+(t>0?" "+t+"s":"")}},{"./metric.js":"2ArNY","./math.js":"icsnC","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"2ArNY":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"yotta",()=>o),i.export(r,"zetta",()=>l),i.export(r,"exa",()=>a),i.export(r,"peta",()=>c),i.export(r,"tera",()=>h),i.export(r,"giga",()=>u),i.export(r,"mega",()=>d),i.export(r,"kilo",()=>f),i.export(r,"hecto",()=>p),i.export(r,"deca",()=>g),i.export(r,"deci",()=>m),i.export(r,"centi",()=>y),i.export(r,"milli",()=>w),i.export(r,"micro",()=>x),i.export(r,"nano",()=>b),i.export(r,"pico",()=>E),i.export(r,"femto",()=>I),i.export(r,"atto",()=>S),i.export(r,"zepto",()=>v),i.export(r,"yocto",()=>U),i.export(r,"prefix",()=>A);var s=e("./math.js");let o=1e24,l=1e21,a=1e18,c=1e15,h=1e12,u=1e9,d=1e6,f=1e3,p=100,g=10,m=.1,y=.01,w=.001,x=1e-6,b=1e-9,E=1e-12,I=1e-15,S=1e-18,v=1e-21,U=1e-24,k=["","k","M","G","T","P","E","Z","Y"],C=["","m","","n","p","f","a","z","y"],A=(e,t=0)=>{let r=0===e?0:s.log10(e),n=0;for(;r<3*n&&t>-8;)t--,n--;for(;r>=3+3*n&&t<8;)t++,n++;let i=t<0?C[-t]:k[t];return{n:s.round((n>0?e/s.exp10(3*n):e*s.exp10(-3*n))*1e12)/1e12,prefix:i}}},{"./math.js":"icsnC","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],ezlBF:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"createUint8ArrayFromLen",()=>d),i.export(r,"createUint8ArrayViewFromArrayBuffer",()=>f),i.export(r,"createUint8ArrayFromArrayBuffer",()=>p),i.export(r,"toBase64",()=>g),i.export(r,"fromBase64",()=>m),i.export(r,"toBase64UrlEncoded",()=>y),i.export(r,"fromBase64UrlEncoded",()=>w),i.export(r,"toHexString",()=>x),i.export(r,"fromHexString",()=>b),i.export(r,"copyUint8Array",()=>E),i.export(r,"encodeAny",()=>I),i.export(r,"decodeAny",()=>S),i.export(r,"shiftNBitsLeft",()=>v);var s=e("./string.js"),o=e("./environment.js"),l=e("./array.js"),a=e("./math.js"),c=e("./encoding.js"),h=e("./decoding.js"),u=e("6475e0e5014d10a8").Buffer;let d=e=>new Uint8Array(e),f=(e,t,r)=>new Uint8Array(e,t,r),p=e=>new Uint8Array(e),g=o.isBrowser?e=>{let t="";for(let r=0;r<e.byteLength;r++)t+=s.fromCharCode(e[r]);return btoa(t)}:e=>u.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),m=o.isBrowser?e=>{let t=atob(e),r=d(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}:e=>{let t=u.from(e,"base64");return f(t.buffer,t.byteOffset,t.byteLength)},y=e=>g(e).replaceAll("+","-").replaceAll("/","_").replaceAll("=",""),w=e=>m(e.replaceAll("-","+").replaceAll("_","/")),x=e=>l.map(e,e=>e.toString(16).padStart(2,"0")).join(""),b=e=>{let t=e.length,r=new Uint8Array(a.ceil(t/2));for(let n=0;n<t;n+=2)r[r.length-n/2-1]=Number.parseInt(e.slice(t-n-2,t-n),16);return r},E=e=>{let t=d(e.byteLength);return t.set(e),t},I=e=>c.encode(t=>c.writeAny(t,e)),S=e=>h.readAny(h.createDecoder(e)),v=(e,t)=>{if(0===t)return e;e=new Uint8Array(e),e[0]<<=t;for(let r=1;r<e.length;r++)e[r-1]|=e[r]>>>8-t,e[r]<<=t;return e}},{"6475e0e5014d10a8":"b48lF","./string.js":"l5ap6","./environment.js":"8YiHn","./array.js":"kcR8B","./math.js":"icsnC","./encoding.js":"jAo8y","./decoding.js":"2MQNo","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],b48lF:[function(e,t,r,n){"use strict";let i=e("9c62938f1dccc73c"),s=e("aceacb6a4531a9d2"),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function l(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return u(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e){var n=e,i=t;if(("string"!=typeof i||""===i)&&(i="utf8"),!a.isEncoding(i))throw TypeError("Unknown encoding: "+i);let r=0|g(n,i),s=l(r),o=s.write(n,i);return o!==r&&(s=s.slice(0,o)),s}if(ArrayBuffer.isView(e)){var s=e;if(L(s,Uint8Array)){let e=new Uint8Array(s);return f(e.buffer,e.byteOffset,e.byteLength)}return d(s)}if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(L(e,ArrayBuffer)||e&&L(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(L(e,SharedArrayBuffer)||e&&L(e.buffer,SharedArrayBuffer)))return f(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return a.from(o,t,r);let c=function(e){if(a.isBuffer(e)){let t=0|p(e.length),r=l(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?l(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(c)return c;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return h(e),l(e<0?0:0|p(e))}function d(e){let t=e.length<0?0:0|p(e.length),r=l(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e,t,r){let n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),a.prototype),n}function p(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function g(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||L(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return R(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return M(e).length;default:if(i)return n?-1:R(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=V[e[n]];return i}(this,t,r);case"utf8":case"utf-8":return b(this,t,r);case"ascii":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":var s,o,l;return s=this,o=t,l=r,0===o&&l===s.length?i.fromByteArray(s):i.fromByteArray(s.slice(o,l));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let n=e.slice(t,r),i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function w(e,t,r,n,i){var s;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(s=r*=1)!=s&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(i)return -1;else r=e.length-1;else if(r<0)if(!i)return -1;else r=0;if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:x(e,t,r,n,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return x(e,[t],r,n,i)}throw TypeError("val must be string, number or Buffer")}function x(e,t,r,n,i){let s,o=1,l=e.length,a=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;o=2,l/=2,a/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(s=r;s<l;s++)if(c(e,s)===c(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===a)return n*o}else -1!==n&&(s-=s-n),n=-1}else for(r+a>l&&(r=l-a),s=r;s>=0;s--){let r=!0;for(let n=0;n<a;n++)if(c(e,s+n)!==c(t,n)){r=!1;break}if(r)return s}return -1}function b(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let t=e[i],s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,l,a;switch(o){case 1:t<128&&(s=t);break;case 2:(192&(r=e[i+1]))==128&&(a=(31&t)<<6|63&r)>127&&(s=a);break;case 3:r=e[i+1],n=e[i+2],(192&r)==128&&(192&n)==128&&(a=(15&t)<<12|(63&r)<<6|63&n)>2047&&(a<55296||a>57343)&&(s=a);break;case 4:r=e[i+1],n=e[i+2],l=e[i+3],(192&r)==128&&(192&n)==128&&(192&l)==128&&(a=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&l)>65535&&a<1114112&&(s=a)}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}var s=n;let o=s.length;if(o<=4096)return String.fromCharCode.apply(String,s);let l="",a=0;for(;a<o;)l+=String.fromCharCode.apply(String,s.slice(a,a+=4096));return l}function E(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function I(e,t,r,n,i,s){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function S(e,t,r,n,i){j(t,n,i,e,r,7);let s=Number(t&BigInt(0xffffffff));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function v(e,t,r,n,i){j(t,n,i,e,r,7);let s=Number(t&BigInt(0xffffffff));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function U(e,t,r,n,i,s){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function k(e,t,r,n,i){return t*=1,r>>>=0,i||U(e,t,r,4,34028234663852886e22,-34028234663852886e22),s.write(e,t,r,n,23,4),r+4}function C(e,t,r,n,i){return t*=1,r>>>=0,i||U(e,t,r,8,17976931348623157e292,-17976931348623157e292),s.write(e,t,r,n,52,8),r+8}r.Buffer=a,r.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},r.INSPECT_MAX_BYTES=50,r.kMaxLength=0x7fffffff,a.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,r){return(h(e),e<=0)?l(e):void 0!==t?"string"==typeof r?l(e).fill(t,r):l(e).fill(t):l(e)},a.allocUnsafe=function(e){return u(e)},a.allocUnsafeSlow=function(e){return u(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(L(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),L(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:+(n<r)},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let n=a.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){let t=e[r];if(L(t,Uint8Array))i+t.length>n.length?(a.isBuffer(t)||(t=a.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else if(a.isBuffer(t))t.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=t.length}return n},a.byteLength=g,a.prototype._isBuffer=!0,a.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},a.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},a.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},a.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?b(this,0,e):m.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){let e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},o&&(a.prototype[o]=a.prototype.inspect),a.prototype.compare=function(e,t,r,n,i){if(L(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let s=i-n,o=r-t,l=Math.min(s,o),c=this.slice(n,i),h=e.slice(t,r);for(let e=0;e<l;++e)if(c[e]!==h[e]){s=c[e],o=h[e];break}return s<o?-1:+(o<s)},a.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return w(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return w(this,e,t,r,!1)},a.prototype.write=function(e,t,r,n){var i,s,o,l,a,c,h,u;if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let d=this.length-t;if((void 0===r||r>d)&&(r=d),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let f=!1;for(;;)switch(n){case"hex":return function(e,t,r,n){let i;r=Number(r)||0;let s=e.length-r;n?(n=Number(n))>s&&(n=s):n=s;let o=t.length;for(n>o/2&&(n=o/2),i=0;i<n;++i){var l;let n=parseInt(t.substr(2*i,2),16);if((l=n)!=l)break;e[r+i]=n}return i}(this,e,t,r);case"utf8":case"utf-8":return i=t,s=r,N(R(e,this.length-i),this,i,s);case"ascii":case"latin1":case"binary":return o=t,l=r,N(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,o,l);case"base64":return a=t,c=r,N(M(e),this,a,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h=t,u=r,N(function(e,t){let r,n,i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i.push(r%256),i.push(n);return i}(e,this.length-h),this,h,u);default:if(f)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),f=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,a.prototype),n},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||E(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||E(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||E(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readBigUInt64LE=F(function(e){B(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&D(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*r;return BigInt(n)+(BigInt(i)<<BigInt(32))}),a.prototype.readBigUInt64BE=F(function(e){B(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&D(e,this.length-8);let n=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],i=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||E(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||E(e,t,this.length);let n=t,i=1,s=this[e+--n];for(;n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},a.prototype.readInt8=function(e,t){return(e>>>=0,t||E(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||E(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||E(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readBigInt64LE=F(function(e){B(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&D(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),a.prototype.readBigInt64BE=F(function(e){B(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&D(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r)}),a.prototype.readFloatLE=function(e,t){return e>>>=0,t||E(e,4,this.length),s.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||E(e,4,this.length),s.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||E(e,8,this.length),s.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||E(e,8,this.length),s.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;I(this,e,t,r,n,0)}let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;I(this,e,t,r,n,0)}let i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigUInt64LE=F(function(e,t=0){return S(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=F(function(e,t=0){return v(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);I(this,e,t,r,n-1,-n)}let i=0,s=1,o=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);I(this,e,t,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||I(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigInt64LE=F(function(e,t=0){return S(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=F(function(e,t=0){return v(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeFloatLE=function(e,t,r){return k(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return k(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return C(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return C(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},a.prototype.fill=function(e,t,r,n){let i;if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{let s=a.isBuffer(e)?e:a.from(e,n),o=s.length;if(0===o)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};let A={};function _(e,t,r){A[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function T(e){let t="",r=e.length,n=+("-"===e[0]);for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function j(e,t,r,n,i,s){if(e>r||e<t){let n,i="bigint"==typeof t?"n":"";throw n=s>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${(s+1)*8}${i}`:`>= -(2${i} ** ${(s+1)*8-1}${i}) and < 2 ** ${(s+1)*8-1}${i}`:`>= ${t}${i} and <= ${r}${i}`,new A.ERR_OUT_OF_RANGE("value",n,e)}B(i,"offset"),(void 0===n[i]||void 0===n[i+s])&&D(i,n.length-(s+1))}function B(e,t){if("number"!=typeof e)throw new A.ERR_INVALID_ARG_TYPE(t,"number",e)}function D(e,t,r){if(Math.floor(e)!==e)throw B(e,r),new A.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new A.ERR_BUFFER_OUT_OF_BOUNDS;throw new A.ERR_OUT_OF_RANGE(r||"offset",`>= ${+!!r} and <= ${t}`,e)}_("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),_("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),_("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>0x100000000?i=T(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=T(i)),i+="n"),n+=` It must be ${t}. Received ${i}`},RangeError);let O=/[^+/0-9A-Za-z-_]/g;function R(e,t){let r;t=t||1/0;let n=e.length,i=null,s=[];for(let o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319||o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function M(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(O,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function N(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function L(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let V=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function F(e){return"undefined"==typeof BigInt?P:e}function P(){throw Error("BigInt not supported")}},{"9c62938f1dccc73c":"5KmMx",aceacb6a4531a9d2:"9I9TM"}],"5KmMx":[function(e,t,r,n){"use strict";r.byteLength=function(e){var t=h(e),r=t[0],n=t[1];return(r+n)*3/4-n},r.toByteArray=function(e){var t,r,n=h(e),i=n[0],l=n[1],a=new o((i+l)*3/4-l),c=0,u=l>0?i-4:i;for(r=0;r<u;r+=4)t=s[e.charCodeAt(r)]<<18|s[e.charCodeAt(r+1)]<<12|s[e.charCodeAt(r+2)]<<6|s[e.charCodeAt(r+3)],a[c++]=t>>16&255,a[c++]=t>>8&255,a[c++]=255&t;return 2===l&&(t=s[e.charCodeAt(r)]<<2|s[e.charCodeAt(r+1)]>>4,a[c++]=255&t),1===l&&(t=s[e.charCodeAt(r)]<<10|s[e.charCodeAt(r+1)]<<4|s[e.charCodeAt(r+2)]>>2,a[c++]=t>>8&255,a[c++]=255&t),a},r.fromByteArray=function(e){for(var t,r=e.length,n=r%3,s=[],o=0,l=r-n;o<l;o+=16383)s.push(function(e,t,r){for(var n,s=[],o=t;o<r;o+=3)n=(e[o]<<16&0xff0000)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(i[n>>18&63]+i[n>>12&63]+i[n>>6&63]+i[63&n]);return s.join("")}(e,o,o+16383>l?l:o+16383));return 1===n?s.push(i[(t=e[r-1])>>2]+i[t<<4&63]+"=="):2===n&&s.push(i[(t=(e[r-2]<<8)+e[r-1])>>10]+i[t>>4&63]+i[t<<2&63]+"="),s.join("")};for(var i=[],s=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=l.length;a<c;++a)i[a]=l[a],s[l.charCodeAt(a)]=a;function h(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}s[45]=62,s[95]=63},{}],"9I9TM":[function(e,t,r,n){r.read=function(e,t,r,n,i){var s,o,l=8*i-n-1,a=(1<<l)-1,c=a>>1,h=-7,u=r?i-1:0,d=r?-1:1,f=e[t+u];for(u+=d,s=f&(1<<-h)-1,f>>=-h,h+=l;h>0;s=256*s+e[t+u],u+=d,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=n;h>0;o=256*o+e[t+u],u+=d,h-=8);if(0===s)s=1-c;else{if(s===a)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),s-=c}return(f?-1:1)*o*Math.pow(2,s-n)},r.write=function(e,t,r,n,i,s){var o,l,a,c=8*s-i-1,h=(1<<c)-1,u=h>>1,d=5960464477539062e-23*(23===i),f=n?0:s-1,p=n?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(l=+!!isNaN(t),o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-o))<1&&(o--,a*=2),o+u>=1?t+=d/a:t+=d*Math.pow(2,1-u),t*a>=2&&(o++,a/=2),o+u>=h?(l=0,o=h):o+u>=1?(l=(t*a-1)*Math.pow(2,i),o+=u):(l=t*Math.pow(2,u-1)*Math.pow(2,i),o=0));i>=8;e[r+f]=255&l,f+=p,l/=256,i-=8);for(o=o<<i|l,c+=i;c>0;e[r+f]=255&o,f+=p,o/=256,c-=8);e[r+f-p]|=128*g}},{}],"8YiHn":[function(e,t,r,n){let i;var s=e("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(r),s.export(r,"isNode",()=>d),s.export(r,"isBrowser",()=>f),s.export(r,"isMac",()=>p),s.export(r,"hasParam",()=>y),s.export(r,"getParam",()=>w),s.export(r,"getVariable",()=>x),s.export(r,"getConf",()=>b),s.export(r,"ensureConf",()=>E),s.export(r,"hasConf",()=>I),s.export(r,"production",()=>S),s.export(r,"supportsColor",()=>v);var o=e("./map.js"),l=e("./string.js"),a=e("./conditions.js"),c=e("./storage.js"),h=e("./function.js"),u=e("2cfb8bcef1022e2a");let d=!1,f="undefined"!=typeof window&&"undefined"!=typeof document&&!d,p="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),g=[],m=()=>{if(void 0===i)if(d){i=o.create();let e=u.argv,t=null;for(let r=0;r<e.length;r++){let n=e[r];"-"===n[0]?(null!==t&&i.set(t,""),t=n):null!==t?(i.set(t,n),t=null):g.push(n)}null!==t&&i.set(t,"")}else"object"==typeof location?(i=o.create(),(location.search||"?").slice(1).split("&").forEach(e=>{if(0!==e.length){let[t,r]=e.split("=");i.set(`--${l.fromCamelCase(t,"-")}`,r),i.set(`-${l.fromCamelCase(t,"-")}`,r)}})):i=o.create();return i},y=e=>m().has(e),w=(e,t)=>m().get(e)||t,x=e=>d?a.undefinedToNull(u.env[e.toUpperCase().replaceAll("-","_")]):a.undefinedToNull(c.varStorage.getItem(e)),b=e=>m().get("--"+e)||x(e),E=e=>{let t=b(e);if(null==t)throw Error(`Expected configuration "${e.toUpperCase().replaceAll("-","_")}"`);return t},I=e=>y("--"+e)||null!==x(e),S=I("production"),v=d&&h.isOneOf(void 0,["true","1","2"])||!y("--no-colors")&&!I("no-color")&&(!d||u.stdout.isTTY)&&(!d||y("--color")||null!==x("COLORTERM")||(x("TERM")||"").includes("color"))},{"2cfb8bcef1022e2a":"eFuRA","./map.js":"gsPjK","./string.js":"l5ap6","./conditions.js":"4BJf1","./storage.js":"iLeaV","./function.js":"5S3AJ","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],eFuRA:[function(e,t,r,n){var i,s,o,l=t.exports={};function a(){throw Error("setTimeout has not been defined")}function c(){throw Error("clearTimeout has not been defined")}try{i="function"==typeof setTimeout?setTimeout:a}catch(e){i=a}try{s="function"==typeof clearTimeout?clearTimeout:c}catch(e){s=c}function h(e){if(i===setTimeout)return setTimeout(e,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}var u=[],d=!1,f=-1;function p(){d&&o&&(d=!1,o.length?u=o.concat(u):f=-1,u.length&&g())}function g(){if(!d){var e=h(p);d=!0;for(var t=u.length;t;){for(o=u,u=[];++f<t;)o&&o[f].run();f=-1,t=u.length}o=null,d=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===c||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function y(){}l.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new m(e,t)),1!==u.length||d||h(g)},m.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=y,l.addListener=y,l.once=y,l.off=y,l.removeListener=y,l.removeAllListeners=y,l.emit=y,l.prependListener=y,l.prependOnceListener=y,l.listeners=function(e){return[]},l.binding=function(e){throw Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],"4BJf1":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"undefinedToNull",()=>s);let s=e=>void 0===e?null:e},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],iLeaV:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"varStorage",()=>l),i.export(r,"onChange",()=>a),i.export(r,"offChange",()=>c);let s=new class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}},o=!0;try{"undefined"!=typeof localStorage&&localStorage&&(s=localStorage,o=!1)}catch(e){}let l=s,a=e=>o||addEventListener("storage",e),c=e=>o||removeEventListener("storage",e)},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"5S3AJ":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"callAll",()=>l),i.export(r,"nop",()=>a),i.export(r,"apply",()=>c),i.export(r,"id",()=>h),i.export(r,"equalityStrict",()=>u),i.export(r,"equalityFlat",()=>d),i.export(r,"equalityDeep",()=>f),i.export(r,"isOneOf",()=>p),i.export(r,"isArray",()=>g),i.export(r,"isString",()=>m),i.export(r,"isNumber",()=>y),i.export(r,"is",()=>w),i.export(r,"isTemplate",()=>x);var s=e("./array.js"),o=e("./object.js");let l=(e,t,r=0)=>{try{for(;r<e.length;r++)e[r](...t)}finally{r<e.length&&l(e,t,r+1)}},a=()=>{},c=e=>e(),h=e=>e,u=(e,t)=>e===t,d=(e,t)=>e===t||null!=e&&null!=t&&e.constructor===t.constructor&&(s.isArray(e)&&s.equalFlat(e,t)||"object"==typeof e&&o.equalFlat(e,t)),f=(e,t)=>{if(null==e||null==t)return u(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;break;case Set:if(e.size!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;break;case Map:if(e.size!==t.size)return!1;for(let r of e.keys())if(!t.has(r)||!f(e.get(r),t.get(r)))return!1;break;case Object:if(o.length(e)!==o.length(t))return!1;for(let r in e)if(!o.hasProperty(e,r)||!f(e[r],t[r]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!f(e[r],t[r]))return!1;break;default:return!1}return!0},p=(e,t)=>t.includes(e),g=s.isArray,m=e=>e&&e.constructor===String,y=e=>null!=e&&e.constructor===Number,w=(e,t)=>e&&e.constructor===t,x=e=>t=>t&&t.constructor===e},{"./array.js":"kcR8B","./object.js":"eUSla","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],eUSla:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"create",()=>s),i.export(r,"assign",()=>o),i.export(r,"keys",()=>l),i.export(r,"forEach",()=>a),i.export(r,"map",()=>c),i.export(r,"length",()=>h),i.export(r,"size",()=>u),i.export(r,"some",()=>d),i.export(r,"isEmpty",()=>f),i.export(r,"every",()=>p),i.export(r,"hasProperty",()=>g),i.export(r,"equalFlat",()=>m),i.export(r,"freeze",()=>y),i.export(r,"deepFreeze",()=>w);let s=()=>Object.create(null),o=Object.assign,l=Object.keys,a=(e,t)=>{for(let r in e)t(e[r],r)},c=(e,t)=>{let r=[];for(let n in e)r.push(t(e[n],n));return r},h=e=>l(e).length,u=e=>l(e).length,d=(e,t)=>{for(let r in e)if(t(e[r],r))return!0;return!1},f=e=>{for(let t in e)return!1;return!0},p=(e,t)=>{for(let r in e)if(!t(e[r],r))return!1;return!0},g=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),m=(e,t)=>e===t||u(e)===u(t)&&p(e,(e,r)=>(void 0!==e||g(t,r))&&t[r]===e),y=Object.freeze,w=e=>{for(let t in e){let r=e[t];("object"==typeof r||"function"==typeof r)&&w(e[t])}return y(e)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],blwZs:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"BOLD",()=>f.BOLD),i.export(r,"UNBOLD",()=>f.UNBOLD),i.export(r,"BLUE",()=>f.BLUE),i.export(r,"GREY",()=>f.GREY),i.export(r,"GREEN",()=>f.GREEN),i.export(r,"RED",()=>f.RED),i.export(r,"PURPLE",()=>f.PURPLE),i.export(r,"ORANGE",()=>f.ORANGE),i.export(r,"UNCOLOR",()=>f.UNCOLOR),i.export(r,"print",()=>m),i.export(r,"warn",()=>y),i.export(r,"printError",()=>w),i.export(r,"printImg",()=>x),i.export(r,"printImgBase64",()=>b),i.export(r,"group",()=>E),i.export(r,"groupCollapsed",()=>I),i.export(r,"groupEnd",()=>S),i.export(r,"printDom",()=>v),i.export(r,"printCanvas",()=>U),i.export(r,"vconsoles",()=>k),i.export(r,"VConsole",()=>_),i.export(r,"createVConsole",()=>T),i.export(r,"createModuleLogger",()=>j);var s=e("./environment.js"),o=e("./set.js"),l=e("./pair.js"),a=e("./dom.js"),c=e("./json.js"),h=e("./map.js"),u=e("./eventloop.js"),d=e("./math.js"),f=e("./logging.common.js");let p={[f.BOLD]:l.create("font-weight","bold"),[f.UNBOLD]:l.create("font-weight","normal"),[f.BLUE]:l.create("color","blue"),[f.GREEN]:l.create("color","green"),[f.GREY]:l.create("color","grey"),[f.RED]:l.create("color","red"),[f.PURPLE]:l.create("color","purple"),[f.ORANGE]:l.create("color","orange"),[f.UNCOLOR]:l.create("color","black")},g=s.supportsColor?e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());let t=[],r=[],n=h.create(),i=[],s=0;for(;s<e.length;s++){let i=e[s],o=p[i];if(void 0!==o)n.set(o.left,o.right);else{if(void 0===i)break;if(i.constructor===String||i.constructor===Number){let e=a.mapToStyleString(n);s>0||e.length>0?(t.push("%c"+i),r.push(e)):t.push(i)}else break}}for(s>0&&(i=r).unshift(t.join(""));s<e.length;s++){let t=e[s];t instanceof Symbol||i.push(t)}return i}:f.computeNoColorLoggingArgs,m=(...e)=>{console.log(...g(e)),k.forEach(t=>t.print(e))},y=(...e)=>{console.warn(...g(e)),e.unshift(f.ORANGE),k.forEach(t=>t.print(e))},w=e=>{console.error(e),k.forEach(t=>t.printError(e))},x=(e,t)=>{s.isBrowser&&console.log("%c                      ",`font-size: ${t}px; background-size: contain; background-repeat: no-repeat; background-image: url(${e})`),k.forEach(r=>r.printImg(e,t))},b=(e,t)=>x(`data:image/gif;base64,${e}`,t),E=(...e)=>{console.group(...g(e)),k.forEach(t=>t.group(e))},I=(...e)=>{console.groupCollapsed(...g(e)),k.forEach(t=>t.groupCollapsed(e))},S=()=>{console.groupEnd(),k.forEach(e=>e.groupEnd())},v=e=>k.forEach(t=>t.printDom(e())),U=(e,t)=>x(e.toDataURL(),t),k=o.create(),C=e=>{let t=[],r=new Map,n=0;for(;n<e.length;n++){let i=e[n],s=p[i];if(void 0!==s)r.set(s.left,s.right);else if(void 0===i&&(i="undefined "),i.constructor===String||i.constructor===Number){let e=a.element("span",[l.create("style",a.mapToStyleString(r))],[a.text(i.toString())]);""===e.innerHTML&&(e.innerHTML="&nbsp;"),t.push(e)}else break}for(;n<e.length;n++){let r=e[n];r instanceof Symbol||(r.constructor!==String&&r.constructor!==Number&&(r=" "+c.stringify(r)+" "),t.push(a.element("span",[],[a.text(r)])))}return t},A="font-family:monospace;border-bottom:1px solid #e2e2e2;padding:2px;";class _{constructor(e){this.dom=e,this.ccontainer=this.dom,this.depth=0,k.add(this)}group(e,t=!1){u.enqueue(()=>{let r=a.element("span",[l.create("hidden",t),l.create("style","color:grey;font-size:120%;")],[a.text("")]),n=a.element("span",[l.create("hidden",!t),l.create("style","color:grey;font-size:125%;")],[a.text("")]),i=a.element("div",[l.create("style",`${A};padding-left:${10*this.depth}px`)],[r,n,a.text(" ")].concat(C(e))),s=a.element("div",[l.create("hidden",t)]),o=a.element("div",[],[i,s]);a.append(this.ccontainer,[o]),this.ccontainer=s,this.depth++,a.addEventListener(i,"click",e=>{s.toggleAttribute("hidden"),r.toggleAttribute("hidden"),n.toggleAttribute("hidden")})})}groupCollapsed(e){this.group(e,!0)}groupEnd(){u.enqueue(()=>{this.depth>0&&(this.depth--,this.ccontainer=this.ccontainer.parentElement.parentElement)})}print(e){u.enqueue(()=>{a.append(this.ccontainer,[a.element("div",[l.create("style",`${A};padding-left:${10*this.depth}px`)],C(e))])})}printError(e){this.print([f.RED,f.BOLD,e.toString()])}printImg(e,t){u.enqueue(()=>{a.append(this.ccontainer,[a.element("img",[l.create("src",e),l.create("height",`${d.round(1.5*t)}px`)])])})}printDom(e){u.enqueue(()=>{a.append(this.ccontainer,[e])})}destroy(){u.enqueue(()=>{k.delete(this)})}}let T=e=>new _(e),j=e=>f.createModuleLogger(m,e)},{"./environment.js":"8YiHn","./set.js":"5gNQm","./pair.js":"iKw8x","./dom.js":"dpUjQ","./json.js":"jGOoC","./map.js":"gsPjK","./eventloop.js":"hLEBe","./math.js":"icsnC","./logging.common.js":"6FeDb","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],iKw8x:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"Pair",()=>s),i.export(r,"create",()=>o),i.export(r,"createReversed",()=>l),i.export(r,"forEach",()=>a),i.export(r,"map",()=>c);class s{constructor(e,t){this.left=e,this.right=t}}let o=(e,t)=>new s(e,t),l=(e,t)=>new s(t,e),a=(e,t)=>e.forEach(e=>t(e.left,e.right)),c=(e,t)=>e.map(e=>t(e.left,e.right))},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],dpUjQ:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"doc",()=>l),i.export(r,"createElement",()=>a),i.export(r,"createDocumentFragment",()=>c),i.export(r,"createTextNode",()=>h),i.export(r,"domParser",()=>u),i.export(r,"emitCustomEvent",()=>d),i.export(r,"setAttributes",()=>f),i.export(r,"setAttributesMap",()=>p),i.export(r,"fragment",()=>g),i.export(r,"append",()=>m),i.export(r,"remove",()=>y),i.export(r,"addEventListener",()=>w),i.export(r,"removeEventListener",()=>x),i.export(r,"addEventListeners",()=>b),i.export(r,"removeEventListeners",()=>E),i.export(r,"element",()=>I),i.export(r,"canvas",()=>S),i.export(r,"text",()=>v),i.export(r,"pairToStyleString",()=>U),i.export(r,"pairsToStyleString",()=>k),i.export(r,"mapToStyleString",()=>C),i.export(r,"querySelector",()=>A),i.export(r,"querySelectorAll",()=>_),i.export(r,"getElementById",()=>T),i.export(r,"parseFragment",()=>j),i.export(r,"parseElement",()=>B),i.export(r,"replaceWith",()=>D),i.export(r,"insertBefore",()=>O),i.export(r,"appendChild",()=>R),i.export(r,"ELEMENT_NODE",()=>M),i.export(r,"TEXT_NODE",()=>N),i.export(r,"CDATA_SECTION_NODE",()=>L),i.export(r,"COMMENT_NODE",()=>V),i.export(r,"DOCUMENT_NODE",()=>F),i.export(r,"DOCUMENT_TYPE_NODE",()=>P),i.export(r,"DOCUMENT_FRAGMENT_NODE",()=>$),i.export(r,"checkNodeType",()=>z),i.export(r,"isParentOf",()=>q);var s=e("./pair.js"),o=e("./map.js");let l="undefined"!=typeof document?document:{},a=e=>l.createElement(e),c=()=>l.createDocumentFragment(),h=e=>l.createTextNode(e),u="undefined"!=typeof DOMParser?new DOMParser:null,d=(e,t,r)=>e.dispatchEvent(new CustomEvent(t,r)),f=(e,t)=>(s.forEach(t,(t,r)=>{!1===r?e.removeAttribute(t):!0===r?e.setAttribute(t,""):e.setAttribute(t,r)}),e),p=(e,t)=>(t.forEach((t,r)=>{e.setAttribute(r,t)}),e),g=e=>{let t=c();for(let r=0;r<e.length;r++)R(t,e[r]);return t},m=(e,t)=>(R(e,g(t)),e),y=e=>e.remove(),w=(e,t,r)=>e.addEventListener(t,r),x=(e,t,r)=>e.removeEventListener(t,r),b=(e,t)=>(s.forEach(t,(t,r)=>w(e,t,r)),e),E=(e,t)=>(s.forEach(t,(t,r)=>x(e,t,r)),e),I=(e,t=[],r=[])=>m(f(a(e),t),r),S=(e,t)=>{let r=a("canvas");return r.height=t,r.width=e,r},v=h,U=e=>`${e.left}:${e.right};`,k=e=>e.map(U).join(""),C=e=>o.map(e,(e,t)=>`${t}:${e};`).join(""),A=(e,t)=>e.querySelector(t),_=(e,t)=>e.querySelectorAll(t),T=e=>l.getElementById(e),j=e=>g(u.parseFromString(`<html><body>${e}</body></html>`,"text/html").body.childNodes),B=e=>u.parseFromString(`<html><body>${e}</body></html>`,"text/html").body.firstElementChild,D=(e,t)=>e.replaceWith(t),O=(e,t,r)=>e.insertBefore(t,r),R=(e,t)=>e.appendChild(t),M=l.ELEMENT_NODE,N=l.TEXT_NODE,L=l.CDATA_SECTION_NODE,V=l.COMMENT_NODE,F=l.DOCUMENT_NODE,P=l.DOCUMENT_TYPE_NODE,$=l.DOCUMENT_FRAGMENT_NODE,z=(e,t)=>e.nodeType===t,q=(e,t)=>{let r=t.parentNode;for(;r&&r!==e;)r=r.parentNode;return r===e}},{"./pair.js":"iKw8x","./map.js":"gsPjK","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],jGOoC:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"stringify",()=>s),i.export(r,"parse",()=>o);let s=JSON.stringify,o=JSON.parse},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],hLEBe:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"enqueue",()=>a),i.export(r,"timeout",()=>u),i.export(r,"interval",()=>f),i.export(r,"Animation",()=>p),i.export(r,"animationFrame",()=>g),i.export(r,"idleCallback",()=>y),i.export(r,"createDebouncer",()=>w);var s=e("./time.js");let o=[],l=()=>{for(let e=0;e<o.length;e++)o[e]();o=[]},a=e=>{o.push(e),1===o.length&&setTimeout(l,0)},c=e=>class{constructor(e){this._=e}destroy(){e(this._)}},h=c(clearTimeout),u=(e,t)=>new h(setTimeout(t,e)),d=c(clearInterval),f=(e,t)=>new d(setInterval(t,e)),p=c(e=>"undefined"!=typeof requestAnimationFrame&&cancelAnimationFrame(e)),g=e=>"undefined"==typeof requestAnimationFrame?u(0,e):new p(requestAnimationFrame(e)),m=c(e=>"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(e)),y=e=>"undefined"!=typeof requestIdleCallback?new m(requestIdleCallback(e)):u(1e3,e),w=(e,t=-1)=>{let r=-1,n=null;return i=>{if(clearTimeout(r),i){if(t>=0){let e=s.getUnixTime();if(null===n&&(n=e),e-n>t){n=null,r=setTimeout(i,0);return}}r=setTimeout(()=>{n=null,i()},e)}else n=null}}},{"./time.js":"b6cMp","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"6FeDb":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"BOLD",()=>h),i.export(r,"UNBOLD",()=>u),i.export(r,"BLUE",()=>d),i.export(r,"GREY",()=>f),i.export(r,"GREEN",()=>p),i.export(r,"RED",()=>g),i.export(r,"PURPLE",()=>m),i.export(r,"ORANGE",()=>y),i.export(r,"UNCOLOR",()=>w),i.export(r,"computeNoColorLoggingArgs",()=>x),i.export(r,"createModuleLogger",()=>S);var s=e("./symbol.js"),o=e("./time.js"),l=e("./environment.js"),a=e("./function.js"),c=e("./json.js");let h=s.create(),u=s.create(),d=s.create(),f=s.create(),p=s.create(),g=s.create(),m=s.create(),y=s.create(),w=s.create(),x=e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());let t=[],r=[],n=0;for(;n<e.length;n++){let r=e[n];if(void 0===r)break;if(r.constructor===String||r.constructor===Number)t.push(r);else if(r.constructor===Object)break}for(n>0&&r.push(t.join(""));n<e.length;n++){let t=e[n];t instanceof Symbol||r.push(t)}return r},b=[p,m,y,d],E=0,I=o.getUnixTime(),S=(e,t)=>{let r=b[E],n=l.getVariable("log"),i=null!==n&&("*"===n||"true"===n||RegExp(n,"gi").test(t));return E=(E+1)%b.length,t+=": ",i?(...n)=>{1===n.length&&n[0]?.constructor===Function&&(n=n[0]());let i=o.getUnixTime(),s=i-I;I=i,e(r,t,w,...n.map(e=>{switch(null!=e&&e.constructor===Uint8Array&&(e=Array.from(e)),typeof e){case"string":case"symbol":return e;default:return c.stringify(e)}}),r," +"+s+"ms")}:a.nop}},{"./symbol.js":"b8AcA","./time.js":"b6cMp","./environment.js":"8YiHn","./function.js":"5S3AJ","./json.js":"jGOoC","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],b8AcA:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"create",()=>s),i.export(r,"isSymbol",()=>o);let s=Symbol,o=e=>"symbol"==typeof e},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],dOXgT:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"mapIterator",()=>s),i.export(r,"createIterator",()=>o),i.export(r,"iteratorFilter",()=>l),i.export(r,"iteratorMap",()=>a);let s=(e,t)=>({[Symbol.iterator](){return this},next(){let r=e.next();return{value:r.done?void 0:t(r.value),done:r.done}}}),o=e=>({[Symbol.iterator](){return this},next:e}),l=(e,t)=>o(()=>{let r;do r=e.next();while(!r.done&&!t(r.value))return r}),a=(e,t)=>o(()=>{let{done:r,value:n}=e.next();return{done:r,value:r?void 0:t(n)}})},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],jCq4q:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"Packr",()=>s.Packr),i.export(r,"Encoder",()=>s.Encoder),i.export(r,"addExtension",()=>s.addExtension),i.export(r,"pack",()=>s.pack),i.export(r,"encode",()=>s.encode),i.export(r,"NEVER",()=>s.NEVER),i.export(r,"ALWAYS",()=>s.ALWAYS),i.export(r,"DECIMAL_ROUND",()=>s.DECIMAL_ROUND),i.export(r,"DECIMAL_FIT",()=>s.DECIMAL_FIT),i.export(r,"REUSE_BUFFER_MODE",()=>s.REUSE_BUFFER_MODE),i.export(r,"RESET_BUFFER_MODE",()=>s.RESET_BUFFER_MODE),i.export(r,"RESERVE_START_SPACE",()=>s.RESERVE_START_SPACE),i.export(r,"Unpackr",()=>o.Unpackr),i.export(r,"Decoder",()=>o.Decoder),i.export(r,"C1",()=>o.C1),i.export(r,"unpack",()=>o.unpack),i.export(r,"unpackMultiple",()=>o.unpackMultiple),i.export(r,"decode",()=>o.decode),i.export(r,"FLOAT32_OPTIONS",()=>o.FLOAT32_OPTIONS),i.export(r,"clearSource",()=>o.clearSource),i.export(r,"roundFloat32",()=>o.roundFloat32),i.export(r,"isNativeAccelerationEnabled",()=>o.isNativeAccelerationEnabled),i.export(r,"decodeIter",()=>l.decodeIter),i.export(r,"encodeIter",()=>l.encodeIter),i.export(r,"useRecords",()=>a),i.export(r,"mapsAsObjects",()=>c);var s=e("./pack.js"),o=e("./unpack.js"),l=e("./iterators.js");let a=!1,c=!0},{"./pack.js":"1Gqa1","./unpack.js":"34MFG","./iterators.js":"737vE","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"1Gqa1":[function(e,t,r,n){let i,s,o,l,a,c,h,u;var d=e("@parcel/transformer-js/src/esmodule-helpers.js");d.defineInteropFlag(r),d.export(r,"FLOAT32_OPTIONS",()=>f.FLOAT32_OPTIONS),d.export(r,"RECORD_SYMBOL",()=>I),d.export(r,"Packr",()=>S),d.export(r,"addExtension",()=>C),d.export(r,"setWriteStructSlots",()=>_),d.export(r,"pack",()=>j),d.export(r,"encode",()=>B),d.export(r,"Encoder",()=>D),d.export(r,"NEVER",()=>O),d.export(r,"ALWAYS",()=>R),d.export(r,"DECIMAL_ROUND",()=>M),d.export(r,"DECIMAL_FIT",()=>N),d.export(r,"REUSE_BUFFER_MODE",()=>L),d.export(r,"RESET_BUFFER_MODE",()=>V),d.export(r,"RESERVE_START_SPACE",()=>F);var f=e("./unpack.js"),p=e("d39b59f28483d155").Buffer;try{i=new TextEncoder}catch(e){}let g=void 0!==p,m=g?function(e){return p.allocUnsafeSlow(e)}:Uint8Array,y=g?p:Uint8Array,w=g?0x100000000:0x7fd00000,x=0,b=null,E=/[\u0080-\uFFFF]/,I=Symbol("record-id");class S extends f.Unpackr{constructor(e){let t,r,n,d;super(e),this.offset=0;let p=y.prototype.utf8Write?function(e,t){return l.utf8Write(e,t,l.byteLength-t)}:!!i&&!!i.encodeInto&&function(e,t){return i.encodeInto(e,l.subarray(t)).written},g=this;e||(e={});let S=e&&e.sequential,v=e.structures||e.saveStructures,U=e.maxSharedStructures;if(null==U&&(U=32*!!v),U>8160)throw Error("Maximum maxSharedStructure is 8160");e.structuredClone&&void 0==e.moreTypes&&(this.moreTypes=!0);let C=e.maxOwnStructures;null==C&&(C=v?32:64),this.structures||!1==e.useRecords||(this.structures=[]);let _=U>32||C+U>64,T=U+64,j=U+C+64;if(j>8256)throw Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let B=[],D=0,O=0;this.pack=this.encode=function(e,i){let s;if(l||(c=(l=new m(8192)).dataView||(l.dataView=new DataView(l.buffer,0,8192)),x=0),(h=l.length-10)-x<2048?(c=(l=new m(l.length)).dataView||(l.dataView=new DataView(l.buffer,0,l.length)),h=l.length-10,x=0):x=x+7&0x7ffffff8,t=x,i&F&&(x+=255&i),d=g.structuredClone?new Map:null,g.bundleStrings&&"string"!=typeof e?(b=[]).size=1/0:b=null,n=g.structures){n.uninitialized&&(n=g._mergeStructures(g.getStructures()));let e=n.sharedLength||0;if(e>U)throw Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+n.sharedLength);if(!n.transitions){n.transitions=Object.create(null);for(let t=0;t<e;t++){let e=n[t];if(!e)continue;let r,i=n.transitions;for(let t=0,n=e.length;t<n;t++){let n=e[t];(r=i[n])||(r=i[n]=Object.create(null)),i=r}i[I]=t+64}this.lastNamedStructuresLength=e}S||(n.nextId=e+64)}r&&(r=!1);try{g.randomAccessStructure&&e&&e.constructor&&e.constructor===Object?Y(e):N(e);let r=b;if(b&&k(t,N,0),d&&d.idsToInsert){let e=d.idsToInsert.sort((e,t)=>e.offset>t.offset?1:-1),n=e.length,i=-1;for(;r&&n>0;){let s=e[--n].offset+t;s<r.stringsPosition+t&&-1===i&&(i=0),s>r.position+t?i>=0&&(i+=6):(i>=0&&(c.setUint32(r.position+t,c.getUint32(r.position+t)+i),i=-1),r=r.previous,n++)}i>=0&&r&&c.setUint32(r.position+t,c.getUint32(r.position+t)+i),(x+=6*e.length)>h&&J(x),g.offset=x;let s=function(e,t){let r,n=6*t.length,i=e.length-n;for(;r=t.pop();){let t=r.offset,s=r.id;e.copyWithin(t+n,t,i);let o=t+(n-=6);e[o++]=214,e[o++]=105,e[o++]=s>>24,e[o++]=s>>16&255,e[o++]=s>>8&255,e[o++]=255&s,i=t}return e}(l.subarray(t,x),e);return d=null,s}if(g.offset=x,i&L)return l.start=t,l.end=x,l;return l.subarray(t,x)}catch(e){throw s=e,e}finally{if(n&&(R(),r&&g.saveStructures)){let r=n.sharedLength||0,o=l.subarray(t,x),a=A(n,g);if(!s){if(!1===g.saveStructures(a,a.isCompatible))return g.pack(e,i);return g.lastNamedStructuresLength=r,l.length>0x40000000&&(l=null),o}}l.length>0x40000000&&(l=null),i&V&&(x=t)}};let R=()=>{O<10&&O++;let e=n.sharedLength||0;if(n.length>e&&!S&&(n.length=e),D>1e4)n.transitions=null,O=0,D=0,B.length>0&&(B=[]);else if(B.length>0&&!S){for(let e=0,t=B.length;e<t;e++)B[e][I]=0;B=[]}},M=e=>{var t=e.length;t<16?l[x++]=144|t:t<65536?(l[x++]=220,l[x++]=t>>8,l[x++]=255&t):(l[x++]=221,c.setUint32(x,t),x+=4);for(let r=0;r<t;r++)N(e[r])},N=e=>{x>h&&(l=J(x));var r,n=typeof e;if("string"===n){let n,i=e.length;if(b&&i>=4&&i<4096){if((b.size+=i)>21760){let e,r,n=(b[0]?3*b[0].length+b[1].length:0)+10;x+n>h&&(l=J(x+n)),b.position?(r=b,l[x]=200,x+=3,l[x++]=98,e=x-t,x+=4,k(t,N,0),c.setUint16(e+t-3,x-t-e)):(l[x++]=214,l[x++]=98,e=x-t,x+=4),(b=["",""]).previous=r,b.size=0,b.position=e}let r=E.test(e);b[+!r]+=e,l[x++]=193,N(r?-i:i);return}n=i<32?1:i<256?2:i<65536?3:5;let s=3*i;if(x+s>h&&(l=J(x+s)),i<64||!p){let t,s,o,a=x+n;for(t=0;t<i;t++)(s=e.charCodeAt(t))<128?l[a++]=s:(s<2048?l[a++]=s>>6|192:((64512&s)==55296&&(64512&(o=e.charCodeAt(t+1)))==56320?(s=65536+((1023&s)<<10)+(1023&o),t++,l[a++]=s>>18|240,l[a++]=s>>12&63|128):l[a++]=s>>12|224,l[a++]=s>>6&63|128),l[a++]=63&s|128);r=a-x-n}else r=p(e,x+n);r<32?l[x++]=160|r:r<256?(n<2&&l.copyWithin(x+2,x+1,x+1+r),l[x++]=217,l[x++]=r):r<65536?(n<3&&l.copyWithin(x+3,x+2,x+2+r),l[x++]=218,l[x++]=r>>8,l[x++]=255&r):(n<5&&l.copyWithin(x+5,x+3,x+3+r),l[x++]=219,c.setUint32(x,r),x+=4),x+=r}else if("number"===n)if(e>>>0===e)e<32||e<128&&!1===this.useRecords||e<64&&!this.randomAccessStructure?l[x++]=e:e<256?(l[x++]=204,l[x++]=e):e<65536?(l[x++]=205,l[x++]=e>>8,l[x++]=255&e):(l[x++]=206,c.setUint32(x,e),x+=4);else if((0|e)===e)e>=-32?l[x++]=256+e:e>=-128?(l[x++]=208,l[x++]=e+256):e>=-32768?(l[x++]=209,c.setInt16(x,e),x+=2):(l[x++]=210,c.setInt32(x,e),x+=4);else{let t;if((t=this.useFloat32)>0&&e<0x100000000&&e>=-0x80000000){let r;if(l[x++]=202,c.setFloat32(x,e),t<4||(0|(r=e*f.mult10[(127&l[x])<<1|l[x+1]>>7]))===r){x+=4;return}x--}l[x++]=203,c.setFloat64(x,e),x+=8}else if("object"===n||"function"===n)if(e){if(d){let r=d.get(e);if(r){r.id||(r.id=(d.idsToInsert||(d.idsToInsert=[])).push(r)),l[x++]=214,l[x++]=112,c.setUint32(x,r.id),x+=4;return}d.set(e,{offset:x-t})}let i=e.constructor;if(i===Object)q(e);else if(i===Array)M(e);else if(i===Map)if(this.mapAsEmptyObject)l[x++]=128;else for(let[t,n]of((r=e.size)<16?l[x++]=128|r:r<65536?(l[x++]=222,l[x++]=r>>8,l[x++]=255&r):(l[x++]=223,c.setUint32(x,r),x+=4),e))N(t),N(n);else{for(let t=0,r=s.length;t<r;t++)if(e instanceof o[t]){let r,n=s[t];if(n.write){n.type&&(l[x++]=212,l[x++]=n.type,l[x++]=0);let t=n.write.call(this,e);t===e?Array.isArray(e)?M(e):q(e):N(t);return}let i=l,o=c,a=x;l=null;try{r=n.pack.call(this,e,e=>(l=i,i=null,(x+=e)>h&&J(x),{target:l,targetView:c,position:x-e}),N)}finally{i&&(l=i,c=o,x=a,h=l.length-10)}r&&(r.length+x>h&&J(r.length+x),x=function(e,t,r,n){let i=e.length;switch(i){case 1:t[r++]=212;break;case 2:t[r++]=213;break;case 4:t[r++]=214;break;case 8:t[r++]=215;break;case 16:t[r++]=216;break;default:i<256?(t[r++]=199,t[r++]=i):(i<65536?(t[r++]=200,t[r++]=i>>8):(t[r++]=201,t[r++]=i>>24,t[r++]=i>>16&255,t[r++]=i>>8&255),t[r++]=255&i)}return t[r++]=n,t.set(e,r),r+=i}(r,l,x,n.type));return}if(Array.isArray(e))M(e);else{if(e.toJSON){let t=e.toJSON();if(t!==e)return N(t)}if("function"===n)return N(this.writeFunction&&this.writeFunction(e));q(e)}}}else l[x++]=192;else if("boolean"===n)l[x++]=e?195:194;else if("bigint"===n){if(e<0x8000000000000000&&e>=-0x8000000000000000)l[x++]=211,c.setBigInt64(x,e);else if(e<0xffffffffffffffff&&e>0)l[x++]=207,c.setBigUint64(x,e);else if(this.largeBigIntToFloat)l[x++]=203,c.setFloat64(x,Number(e));else if(this.largeBigIntToString)return N(e.toString());else if((this.useBigIntExtension||this.moreTypes)&&e<BigInt(2)**BigInt(1023)&&e>-(BigInt(2)**BigInt(1023))){let t;l[x++]=199,x++,l[x++]=66;let r=[];do{let n=e&BigInt(255);t=(n&BigInt(128))===(e<BigInt(0)?BigInt(128):BigInt(0)),r.push(n),e>>=BigInt(8)}while(!((e===BigInt(0)||e===BigInt(-1))&&t))l[x-2]=r.length;for(let e=r.length;e>0;)l[x++]=Number(r[--e]);return}else throw RangeError(e+" was too large to fit in MessagePack 64-bit integer format, use useBigIntExtension, or set largeBigIntToFloat to convert to float-64, or set largeBigIntToString to convert to string");x+=8}else if("undefined"===n)this.encodeUndefinedAsNil?l[x++]=192:(l[x++]=212,l[x++]=0,l[x++]=0);else throw Error("Unknown type: "+n)},P=this.variableMapSize||this.coercibleKeyAsNumber||this.skipValues?e=>{let t,r;if(this.skipValues)for(let r in t=[],e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(r))&&!this.skipValues.includes(e[r])&&t.push(r);else t=Object.keys(e);let n=t.length;if(n<16?l[x++]=128|n:n<65536?(l[x++]=222,l[x++]=n>>8,l[x++]=255&n):(l[x++]=223,c.setUint32(x,n),x+=4),this.coercibleKeyAsNumber)for(let i=0;i<n;i++){let n=Number(r=t[i]);N(isNaN(n)?r:n),N(e[r])}else for(let i=0;i<n;i++)N(r=t[i]),N(e[r])}:e=>{l[x++]=222;let r=x-t;x+=2;let n=0;for(let t in e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(t))&&(N(t),N(e[t]),n++);if(n>65535)throw Error('Object is too large to serialize with fast 16-bit map size, use the "variableMapSize" option to serialize this object');l[r+++t]=n>>8,l[r+t]=255&n},$=!1===this.useRecords?P:e.progressiveRecords&&!_?e=>{let r,i,s=n.transitions||(n.transitions=Object.create(null)),o=x++-t;for(let l in e)if("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(l)){if(i=s[l])s=i;else{let a=Object.keys(e),c=s;s=n.transitions;let h=0;for(let e=0,t=a.length;e<t;e++){let t=a[e];!(i=s[t])&&(i=s[t]=Object.create(null),h++),s=i}o+t+1==x?(x--,W(s,a,h)):G(s,a,o,h),r=!0,s=c[l]}N(e[l])}if(!r){let r=s[I];r?l[o+t]=r:G(s,Object.keys(e),o,0)}}:e=>{let t,r=n.transitions||(n.transitions=Object.create(null)),i=0;for(let n in e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(n))&&(!(t=r[n])&&(t=r[n]=Object.create(null),i++),r=t);let s=r[I];for(let t in s?s>=96&&_?(l[x++]=(31&(s-=96))+96,l[x++]=s>>5):l[x++]=s:W(r,r.__keys__||Object.keys(e),i),e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(t))&&N(e[t])},z="function"==typeof this.useRecords&&this.useRecords,q=z?e=>{z(e)?$(e):P(e)}:$,J=e=>{let r;if(e>0x1000000){if(e-t>w)throw Error("Packed buffer would be larger than maximum buffer size");r=Math.min(w,4096*Math.round(Math.max((e-t)*(e>0x4000000?1.25:2),4194304)/4096))}else r=(Math.max(e-t<<2,l.length-1)>>12)+1<<12;let n=new m(r);return c=n.dataView||(n.dataView=new DataView(n.buffer,0,r)),e=Math.min(e,l.length),l.copy?l.copy(n,0,t,e):n.set(l.slice(t,e)),x-=t,t=0,h=n.length-10,l=n},W=(e,t,i)=>{let s=n.nextId;s||(s=64),s<T&&this.shouldShareStructure&&!this.shouldShareStructure(t)?((s=n.nextOwnId)<j||(s=T),n.nextOwnId=s+1):(s>=j&&(s=T),n.nextId=s+1);let o=t.highByte=s>=96&&_?s-96>>5:-1;e[I]=s,e.__keys__=t,n[s-64]=t,s<T?(t.isShared=!0,n.sharedLength=s-63,r=!0,o>=0?(l[x++]=(31&s)+96,l[x++]=o):l[x++]=s):(o>=0?(l[x++]=213,l[x++]=114,l[x++]=(31&s)+96,l[x++]=o):(l[x++]=212,l[x++]=114,l[x++]=s),i&&(D+=O*i),B.length>=C&&(B.shift()[I]=0),B.push(e),N(t))},G=(e,r,n,i)=>{let s=l,o=x,c=h,u=t;x=0,t=0,(l=a)||(a=l=new m(8192)),h=l.length-10,W(e,r,i),a=l;let d=x;if(l=s,x=o,h=c,t=u,d>1){let e=x+d-1;e>h&&J(e);let r=n+t;l.copyWithin(r+d,r+1,x),l.set(a.slice(0,d),r),x=e}else l[n+t]=a[0]},Y=e=>{let i=u(e,l,t,x,n,J,(e,t,n)=>{if(n)return r=!0;x=t;let i=l;return(N(e),R(),i!==l)?{position:x,targetView:c,target:l}:x},this);if(0===i)return q(e);x=i}}useBuffer(e){(l=e).dataView||(l.dataView=new DataView(l.buffer,l.byteOffset,l.byteLength)),x=0}set position(e){x=e}get position(){return x}clearSharedData(){this.structures&&(this.structures=[]),this.typedStructs&&(this.typedStructs=[])}}function v(e,t,r,n){let i=e.byteLength;if(i+1<256){var{target:s,position:o}=r(4+i);s[o++]=199,s[o++]=i+1}else if(i+1<65536){var{target:s,position:o}=r(5+i);s[o++]=200,s[o++]=i+1>>8,s[o++]=i+1&255}else{var{target:s,position:o,targetView:l}=r(7+i);s[o++]=201,l.setUint32(o,i+1),o+=4}s[o++]=116,s[o++]=t,e.buffer||(e=new Uint8Array(e)),s.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o)}function U(e,t){let r=e.byteLength;if(r<256){var n,i,{target:n,position:i}=t(r+2);n[i++]=196,n[i++]=r}else if(r<65536){var{target:n,position:i}=t(r+3);n[i++]=197,n[i++]=r>>8,n[i++]=255&r}else{var{target:n,position:i,targetView:s}=t(r+5);n[i++]=198,s.setUint32(i,r),i+=4}n.set(e,i)}function k(e,t,r){if(b.length>0){c.setUint32(b.position+e,x+r-b.position-e),b.stringsPosition=x-e;let n=b;b=null,t(n[0]),t(n[1])}}function C(e){if(e.Class){if(!e.pack&&!e.write)throw Error("Extension has no pack or write function");if(e.pack&&!e.type)throw Error("Extension has no type (numeric code to identify the extension)");o.unshift(e.Class),s.unshift(e)}(0,f.addExtension)(e)}function A(e,t){return e.isCompatible=e=>{let r=!e||(t.lastNamedStructuresLength||0)===e.length;return r||t._mergeStructures(e),r},e}function _(e,t){u=e,A=t}o=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,DataView,f.C1Type],s=[{pack(e,t,r){let n=e.getTime()/1e3;if((this.useTimestamp32||0===e.getMilliseconds())&&n>=0&&n<0x100000000){let{target:e,targetView:r,position:i}=t(6);e[i++]=214,e[i++]=255,r.setUint32(i,n)}else if(n>0&&n<0x100000000){let{target:r,targetView:i,position:s}=t(10);r[s++]=215,r[s++]=255,i.setUint32(s,4e6*e.getMilliseconds()+(n/1e3/0x100000000|0)),i.setUint32(s+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return t(0),r(this.onInvalidDate());let{target:e,targetView:n,position:i}=t(3);e[i++]=212,e[i++]=255,e[i++]=255}else{let{target:r,targetView:i,position:s}=t(15);r[s++]=199,r[s++]=12,r[s++]=255,i.setUint32(s,1e6*e.getMilliseconds()),i.setBigInt64(s+4,BigInt(Math.floor(n)))}}},{pack(e,t,r){if(this.setAsEmptyObject)return t(0),r({});let n=Array.from(e),{target:i,position:s}=t(3*!!this.moreTypes);this.moreTypes&&(i[s++]=212,i[s++]=115,i[s++]=0),r(n)}},{pack(e,t,r){let{target:n,position:i}=t(3*!!this.moreTypes);this.moreTypes&&(n[i++]=212,n[i++]=101,n[i++]=0),r([e.name,e.message,e.cause])}},{pack(e,t,r){let{target:n,position:i}=t(3*!!this.moreTypes);this.moreTypes&&(n[i++]=212,n[i++]=120,n[i++]=0),r([e.source,e.flags])}},{pack(e,t){this.moreTypes?v(e,16,t):U(g?p.from(e):new Uint8Array(e),t)}},{pack(e,t){let r=e.constructor;r!==y&&this.moreTypes?v(e,f.typedArrays.indexOf(r.name),t):U(e,t)}},{pack(e,t){this.moreTypes?v(e,17,t):U(g?p.from(e):new Uint8Array(e),t)}},{pack(e,t){let{target:r,position:n}=t(1);r[n]=193}}];let T=new S({useRecords:!1}),j=T.pack,B=T.pack,D=S,{NEVER:O,ALWAYS:R,DECIMAL_ROUND:M,DECIMAL_FIT:N}=f.FLOAT32_OPTIONS,L=512,V=1024,F=2048},{d39b59f28483d155:"b48lF","./unpack.js":"34MFG","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"34MFG":[function(e,t,r,n){var i,s,o,l,a,c,h,u,d,f,p,g=e("@parcel/transformer-js/src/esmodule-helpers.js");g.defineInteropFlag(r),g.export(r,"C1Type",()=>k),g.export(r,"C1",()=>C),g.export(r,"Unpackr",()=>T),g.export(r,"getPosition",()=>j),g.export(r,"checkedRead",()=>B),g.export(r,"read",()=>O),g.export(r,"loadStructures",()=>L),g.export(r,"isNativeAccelerationEnabled",()=>z),g.export(r,"setExtractor",()=>q),g.export(r,"readString",()=>W),g.export(r,"typedArrays",()=>eo),g.export(r,"clearSource",()=>eh),g.export(r,"addExtension",()=>eu),g.export(r,"mult10",()=>ed),g.export(r,"Decoder",()=>ef),g.export(r,"unpack",()=>eg),g.export(r,"unpackMultiple",()=>em),g.export(r,"decode",()=>ey),g.export(r,"FLOAT32_OPTIONS",()=>ew),g.export(r,"roundFloat32",()=>eE),g.export(r,"setReadStruct",()=>eI);var m=e("b5a1b40c14b71778").Buffer;try{i=new TextDecoder}catch(e){}var y=0;let w=[];var x=w,b=0,E={},I=0,S=0,v=[],U={useRecords:!1,mapsAsObjects:!0};class k{}let C=new k;C.name="MessagePack 0xC1";var A=!1,_=2;try{Function("")}catch(e){_=1/0}class T{constructor(e){e&&(!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),e.sequential&&!1!==e.trusted&&(e.trusted=!0,!e.structures&&!1!=e.useRecords&&(e.structures=[],e.maxSharedStructures||(e.maxSharedStructures=0))),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0),e.int64AsNumber&&(e.int64AsType="number")),Object.assign(this,e)}unpack(e,t){if(s)return ec(()=>(eh(),this?this.unpack(e,t):T.prototype.unpack.call(U,e,t)));e.buffer||e.constructor!==ArrayBuffer||(e=void 0!==m?m.from(e):new Uint8Array(e)),"object"==typeof t?(o=t.end||e.length,y=t.start||0):(y=0,o=t>-1?t:e.length),b=0,S=0,a=null,x=w,c=null,s=e;try{u=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(t){if(s=null,e instanceof Uint8Array)throw t;throw Error("Source must be a Uint8Array or Buffer but was a "+(e&&"object"==typeof e?e.constructor.name:typeof e))}return this instanceof T?(E=this,this.structures?l=this.structures:(!l||l.length>0)&&(l=[])):(E=U,(!l||l.length>0)&&(l=[])),B(t)}unpackMultiple(e,t){let r,n=0;try{A=!0;let i=e.length,s=this?this.unpack(e,i):ep.unpack(e,i);if(t){if(!1===t(s,n,y))return;for(;y<i;)if(n=y,!1===t(B(),n,y))return}else{for(r=[s];y<i;)n=y,r.push(B());return r}}catch(e){throw e.lastPosition=n,e.values=r,e}finally{A=!1,eh()}}_mergeStructures(e,t){f&&(e=f.call(this,e)),Object.isFrozen(e=e||[])&&(e=e.map(e=>e.slice(0)));for(let t=0,r=e.length;t<r;t++){let r=e[t];r&&(r.isShared=!0,t>=32&&(r.highByte=t-32>>5))}for(let r in e.sharedLength=e.length,t||[])if(r>=0){let n=e[r],i=t[r];i&&(n&&((e.restoreStructures||(e.restoreStructures=[]))[r]=n),e[r]=i)}return this.structures=e}decode(e,t){return this.unpack(e,t)}}function j(){return y}function B(e){try{let t;if(!E.trusted&&!A){let e=l.sharedLength||0;e<l.length&&(l.length=e)}if(E.randomAccessStructure&&s[y]<64&&s[y]>=32&&d?(t=d(s,y,o,E),s=null,!(e&&e.lazy)&&t&&(t=t.toJSON()),y=o):t=O(),c&&(y=c.postBundlePosition,c=null),A&&(l.restoreStructures=null),y==o)l&&l.restoreStructures&&D(),l=null,s=null,h&&(h=null);else if(y>o)throw Error("Unexpected end of MessagePack data");else if(!A){let e;try{e=JSON.stringify(t,(e,t)=>"bigint"==typeof t?`${t}n`:t).slice(0,100)}catch(t){e="(JSON view not available "+t+")"}throw Error("Data read, but end of buffer not reached "+e)}return t}catch(e){throw l&&l.restoreStructures&&D(),eh(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")||y>o)&&(e.incomplete=!0),e}}function D(){for(let e in l.restoreStructures)l[e]=l.restoreStructures[e];l.restoreStructures=null}function O(){let e=s[y++];if(e<160)if(e<128)if(e<64)return e;else{let t=l[63&e]||E.getStructures&&L()[63&e];return t?(t.read||(t.read=M(t,63&e)),t.read()):e}else if(e<144){if(e-=128,E.mapsAsObjects){let t={};for(let r=0;r<e;r++){let e=er();"__proto__"===e&&(e="__proto_"),t[e]=O()}return t}{let t=new Map;for(let r=0;r<e;r++)t.set(O(),O());return t}}else{let t=Array(e-=144);for(let r=0;r<e;r++)t[r]=O();return E.freezeData?Object.freeze(t):t}if(e<192){let t=e-160;if(S>=y)return a.slice(y-I,(y+=t)-I);if(0==S&&o<140){let e=t<16?K(t):X(t);if(null!=e)return e}return V(t)}{let t;switch(e){case 192:return null;case 193:if(c){if((t=O())>0)return c[1].slice(c.position1,c.position1+=t);return c[0].slice(c.position0,c.position0-=t)}return C;case 194:return!1;case 195:return!0;case 196:if(void 0===(t=s[y++]))throw Error("Unexpected end of buffer");return Q(t);case 197:return t=u.getUint16(y),y+=2,Q(t);case 198:return t=u.getUint32(y),y+=4,Q(t);case 199:return ee(s[y++]);case 200:return t=u.getUint16(y),y+=2,ee(t);case 201:return t=u.getUint32(y),y+=4,ee(t);case 202:if(t=u.getFloat32(y),E.useFloat32>2){let e=ed[(127&s[y])<<1|s[y+1]>>7];return y+=4,(e*t+(t>0?.5:-.5)|0)/e}return y+=4,t;case 203:return t=u.getFloat64(y),y+=8,t;case 204:return s[y++];case 205:return t=u.getUint16(y),y+=2,t;case 206:return t=u.getUint32(y),y+=4,t;case 207:return"number"===E.int64AsType?t=0x100000000*u.getUint32(y)+u.getUint32(y+4):"string"===E.int64AsType?t=u.getBigUint64(y).toString():"auto"===E.int64AsType?(t=u.getBigUint64(y))<=BigInt(2)<<BigInt(52)&&(t=Number(t)):t=u.getBigUint64(y),y+=8,t;case 208:return u.getInt8(y++);case 209:return t=u.getInt16(y),y+=2,t;case 210:return t=u.getInt32(y),y+=4,t;case 211:return"number"===E.int64AsType?t=0x100000000*u.getInt32(y)+u.getUint32(y+4):"string"===E.int64AsType?t=u.getBigInt64(y).toString():"auto"===E.int64AsType?(t=u.getBigInt64(y))>=BigInt(-2)<<BigInt(52)&&t<=BigInt(2)<<BigInt(52)&&(t=Number(t)):t=u.getBigInt64(y),y+=8,t;case 212:if(114==(t=s[y++]))return ei(63&s[y++]);{let e=v[t];if(e)if(e.read)return y++,e.read(O());else if(e.noBuffer)return y++,e();else return e(s.subarray(y,++y));throw Error("Unknown extension "+t)}case 213:if(114==(t=s[y]))return y++,ei(63&s[y++],s[y++]);return ee(2);case 214:return ee(4);case 215:return ee(8);case 216:return ee(16);case 217:if(t=s[y++],S>=y)return a.slice(y-I,(y+=t)-I);return F(t);case 218:if(t=u.getUint16(y),y+=2,S>=y)return a.slice(y-I,(y+=t)-I);return P(t);case 219:if(t=u.getUint32(y),y+=4,S>=y)return a.slice(y-I,(y+=t)-I);return $(t);case 220:return t=u.getUint16(y),y+=2,G(t);case 221:return t=u.getUint32(y),y+=4,G(t);case 222:return t=u.getUint16(y),y+=2,Y(t);case 223:return t=u.getUint32(y),y+=4,Y(t);default:if(e>=224)return e-256;if(void 0===e){let e=Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}throw Error("Unknown MessagePack token "+e)}}}let R=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function M(e,t){function r(){if(r.count++>_){let r=e.read=Function("r","return function(){return "+(E.freezeData?"Object.freeze":"")+"({"+e.map(e=>"__proto__"===e?"__proto_:r()":R.test(e)?e+":r()":"["+JSON.stringify(e)+"]:r()").join(",")+"})}")(O);return 0===e.highByte&&(e.read=N(t,e.read)),r()}let n={};for(let t=0,r=e.length;t<r;t++){let r=e[t];"__proto__"===r&&(r="__proto_"),n[r]=O()}return E.freezeData?Object.freeze(n):n}return(r.count=0,0===e.highByte)?N(t,r):r}let N=(e,t)=>function(){let r=s[y++];if(0===r)return t();let n=e<32?-(e+(r<<5)):e+(r<<5),i=l[n]||L()[n];if(!i)throw Error("Record id is not defined for "+n);return i.read||(i.read=M(i,e)),i.read()};function L(){let e=ec(()=>(s=null,E.getStructures()));return l=E._mergeStructures(e,l)}var V=J,F=J,P=J,$=J;let z=!1;function q(e){function t(t){return function(r){let n=x[b++];if(null==n){if(c)return J(r);let i=s.byteOffset,l=e(y-t+i,o+i,s.buffer);if("string"==typeof l)n=l,x=w;else if(b=1,S=1,void 0===(n=(x=l)[0]))throw Error("Unexpected end of buffer")}let i=n.length;return i<=r?(y+=r,n):(a=n,I=y,S=y+i,y+=r,n.slice(0,r))}}z=!0,V=t(1),F=t(2),P=t(3),$=t(5)}function J(e){let t;if(e<16&&(t=K(e)))return t;if(e>64&&i)return i.decode(s.subarray(y,y+=e));let r=y+e,n=[];for(t="";y<r;){let e=s[y++];if((128&e)==0)n.push(e);else if((224&e)==192){let t=63&s[y++];n.push((31&e)<<6|t)}else if((240&e)==224){let t=63&s[y++],r=63&s[y++];n.push((31&e)<<12|t<<6|r)}else if((248&e)==240){let t=63&s[y++],r=(7&e)<<18|t<<12|(63&s[y++])<<6|63&s[y++];r>65535&&(r-=65536,n.push(r>>>10&1023|55296),r=56320|1023&r),n.push(r)}else n.push(e);n.length>=4096&&(t+=H.apply(String,n),n.length=0)}return n.length>0&&(t+=H.apply(String,n)),t}function W(e,t,r){let n=s;s=e,y=t;try{return J(r)}finally{s=n}}function G(e){let t=Array(e);for(let r=0;r<e;r++)t[r]=O();return E.freezeData?Object.freeze(t):t}function Y(e){if(E.mapsAsObjects){let t={};for(let r=0;r<e;r++){let e=er();"__proto__"===e&&(e="__proto_"),t[e]=O()}return t}{let t=new Map;for(let r=0;r<e;r++)t.set(O(),O());return t}}var H=String.fromCharCode;function X(e){let t=y,r=Array(e);for(let n=0;n<e;n++){let e=s[y++];if((128&e)>0){y=t;return}r[n]=e}return H.apply(String,r)}function K(e){if(e<4)if(e<2)if(0===e)return"";else{let e=s[y++];if((128&e)>1){y-=1;return}return H(e)}else{let t=s[y++],r=s[y++];if((128&t)>0||(128&r)>0){y-=2;return}if(e<3)return H(t,r);let n=s[y++];if((128&n)>0){y-=3;return}return H(t,r,n)}{let t=s[y++],r=s[y++],n=s[y++],i=s[y++];if((128&t)>0||(128&r)>0||(128&n)>0||(128&i)>0){y-=4;return}if(e<6)if(4===e)return H(t,r,n,i);else{let e=s[y++];if((128&e)>0){y-=5;return}return H(t,r,n,i,e)}if(e<8){let o=s[y++],l=s[y++];if((128&o)>0||(128&l)>0){y-=6;return}if(e<7)return H(t,r,n,i,o,l);let a=s[y++];if((128&a)>0){y-=7;return}return H(t,r,n,i,o,l,a)}{let o=s[y++],l=s[y++],a=s[y++],c=s[y++];if((128&o)>0||(128&l)>0||(128&a)>0||(128&c)>0){y-=8;return}if(e<10)if(8===e)return H(t,r,n,i,o,l,a,c);else{let e=s[y++];if((128&e)>0){y-=9;return}return H(t,r,n,i,o,l,a,c,e)}if(e<12){let h=s[y++],u=s[y++];if((128&h)>0||(128&u)>0){y-=10;return}if(e<11)return H(t,r,n,i,o,l,a,c,h,u);let d=s[y++];if((128&d)>0){y-=11;return}return H(t,r,n,i,o,l,a,c,h,u,d)}{let h=s[y++],u=s[y++],d=s[y++],f=s[y++];if((128&h)>0||(128&u)>0||(128&d)>0||(128&f)>0){y-=12;return}if(e<14)if(12===e)return H(t,r,n,i,o,l,a,c,h,u,d,f);else{let e=s[y++];if((128&e)>0){y-=13;return}return H(t,r,n,i,o,l,a,c,h,u,d,f,e)}{let p=s[y++],g=s[y++];if((128&p)>0||(128&g)>0){y-=14;return}if(e<15)return H(t,r,n,i,o,l,a,c,h,u,d,f,p,g);let m=s[y++];if((128&m)>0){y-=15;return}return H(t,r,n,i,o,l,a,c,h,u,d,f,p,g,m)}}}}}function Z(){let e,t=s[y++];if(t<192)e=t-160;else switch(t){case 217:e=s[y++];break;case 218:e=u.getUint16(y),y+=2;break;case 219:e=u.getUint32(y),y+=4;break;default:throw Error("Expected string")}return J(e)}function Q(e){return E.copyBuffers?Uint8Array.prototype.slice.call(s,y,y+=e):s.subarray(y,y+=e)}function ee(e){let t=s[y++];if(v[t]){let r;return v[t](s.subarray(y,r=y+=e),e=>{y=e;try{return O()}finally{y=r}})}throw Error("Unknown extension type "+t)}var et=Array(4096);function er(){let e,t=s[y++];if(!(t>=160)||!(t<192))return y--,en(O());if(t-=160,S>=y)return a.slice(y-I,(y+=t)-I);if(!(0==S&&o<180))return V(t);let r=(t<<5^(t>1?u.getUint16(y):t>0?s[y]:0))&4095,n=et[r],i=y,l=y+t-3,c=0;if(n&&n.bytes==t){for(;i<l;){if((e=u.getUint32(i))!=n[c++]){i=0x70000000;break}i+=4}for(l+=3;i<l;)if((e=s[i++])!=n[c++]){i=0x70000000;break}if(i===l)return y=i,n.string;l-=3,i=y}for(n=[],et[r]=n,n.bytes=t;i<l;)e=u.getUint32(i),n.push(e),i+=4;for(l+=3;i<l;)e=s[i++],n.push(e);let h=t<16?K(t):X(t);return null!=h?n.string=h:n.string=V(t)}function en(e){if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e||"bigint"==typeof e)return e.toString();if(null==e)return e+"";if(E.allowArraysInMapKeys&&Array.isArray(e)&&e.flat().every(e=>["string","number","boolean","bigint"].includes(typeof e)))return e.flat().toString();throw Error(`Invalid property type for record: ${typeof e}`)}let ei=(e,t)=>{let r=O().map(en),n=e;void 0!==t&&(e=e<32?-((t<<5)+e):(t<<5)+e,r.highByte=t);let i=l[e];return i&&(i.isShared||A)&&((l.restoreStructures||(l.restoreStructures=[]))[e]=i),l[e]=r,r.read=M(r,n),r.read()};v[0]=()=>{},v[0].noBuffer=!0,v[66]=e=>{let t=e.length,r=BigInt(128&e[0]?e[0]-256:e[0]);for(let n=1;n<t;n++)r<<=BigInt(8),r+=BigInt(e[n]);return r};let es={Error,TypeError,ReferenceError};v[101]=()=>{let e=O();return(es[e[0]]||Error)(e[1],{cause:e[2]})},v[105]=e=>{let t;if(!1===E.structuredClone)throw Error("Structured clone extension is disabled");let r=u.getUint32(y-4);h||(h=new Map);let n=s[y],i={target:t=n>=144&&n<160||220==n||221==n?[]:n>=128&&n<144||222==n||223==n?new Map:(n>=199&&n<=201||n>=212&&n<=216)&&115===s[y+1]?new Set:{}};h.set(r,i);let o=O();if(!i.used)return i.target=o;if(Object.assign(t,o),t instanceof Map)for(let[e,r]of o.entries())t.set(e,r);if(t instanceof Set)for(let e of Array.from(o))t.add(e);return t},v[112]=e=>{if(!1===E.structuredClone)throw Error("Structured clone extension is disabled");let t=u.getUint32(y-4),r=h.get(t);return r.used=!0,r.target},v[115]=()=>new Set(O());let eo=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array"),el="object"==typeof globalThis?globalThis:window;v[116]=e=>{let t=e[0],r=Uint8Array.prototype.slice.call(e,1).buffer,n=eo[t];if(!n){if(16===t)return r;if(17===t)return new DataView(r);throw Error("Could not find typed array for code "+t)}return new el[n](r)},v[120]=()=>{let e=O();return new RegExp(e[0],e[1])};let ea=[];function ec(e){p&&p();let t=o,r=y,n=b,i=I,d=S,f=a,g=x,m=h,w=c,v=new Uint8Array(s.slice(0,o)),U=l,k=l.slice(0,l.length),C=E,_=A,T=e();return o=t,y=r,b=n,I=i,S=d,a=f,x=g,h=m,c=w,s=v,A=_,(l=U).splice(0,l.length,...k),E=C,u=new DataView(s.buffer,s.byteOffset,s.byteLength),T}function eh(){s=null,h=null,l=null}function eu(e){e.unpack?v[e.type]=e.unpack:v[e.type]=e}v[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],r=y;return y+=t-e.length,c=ea,(c=[Z(),Z()]).position0=0,c.position1=0,c.postBundlePosition=y,y=r,O()},v[255]=e=>4==e.length?new Date((0x1000000*e[0]+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):8==e.length?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((3&e[3])*0x100000000+0x1000000*e[4]+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):12==e.length?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((128&e[4]?-0x1000000000000:0)+0x10000000000*e[6]+0x100000000*e[7]+0x1000000*e[8]+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");let ed=Array(147);for(let e=0;e<256;e++)ed[e]=+("1e"+Math.floor(45.15-.30103*e));let ef=T;var ep=new T({useRecords:!1});let eg=ep.unpack,em=ep.unpackMultiple,ey=ep.unpack,ew={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4},ex=new Float32Array(1),eb=new Uint8Array(ex.buffer,0,4);function eE(e){ex[0]=e;let t=ed[(127&eb[3])<<1|eb[2]>>7];return(t*e+(e>0?.5:-.5)|0)/t}function eI(e,t,r){d=e,f=t,p=r}},{b5a1b40c14b71778:"b48lF","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"737vE":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"packIter",()=>a),i.export(r,"unpackIter",()=>h),i.export(r,"decodeIter",()=>u),i.export(r,"encodeIter",()=>d);var s=e("./pack.js"),o=e("./unpack.js"),l=e("cf54f4ca76cd8e1c").Buffer;function a(e,t={}){if(e&&"object"==typeof e)if("function"==typeof e[Symbol.iterator])return function*(e,t){let r=new(0,s.Packr)(t);for(let t of e)yield r.pack(t)}(e,t);else if("function"==typeof e.then||"function"==typeof e[Symbol.asyncIterator])return c(e,t);else throw Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a Promise");throw Error("first argument must be an Iterable, Async Iterable, or a Promise for an Async Iterable")}async function*c(e,t){let r=new(0,s.Packr)(t);for await(let t of e)yield r.pack(t)}function h(e,t={}){let r;if(!e||"object"!=typeof e)throw Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a promise");let n=new(0,o.Unpackr)(t),i=e=>{let t;r&&(e=l.concat([r,e]),r=void 0);try{t=n.unpackMultiple(e)}catch(n){if(n.incomplete)r=e.slice(n.lastPosition),t=n.values;else throw n}return t};return"function"==typeof e[Symbol.iterator]?function*(){for(let t of e)yield*i(t)}():"function"==typeof e[Symbol.asyncIterator]?async function*(){for await(let t of e)yield*i(t)}():void 0}let u=h,d=a},{cf54f4ca76cd8e1c:"b48lF","./pack.js":"1Gqa1","./unpack.js":"34MFG","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],blYkP:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");async function s(e,t){for(;!e.remoteDescription;)await new Promise(e=>setTimeout(e,500));if(t.length>0)try{await Promise.all(t.map(t=>e.addIceCandidate(new RTCIceCandidate(t)))),t=[]}catch(e){console.error("Error adding pending ICE candidates:",e)}return t}i.defineInteropFlag(r),i.export(r,"StreamServer",()=>a),i.export(r,"StreamClient",()=>c),i.export(r,"WebSocketStreamServer",()=>h),i.export(r,"WebSocketStreamClient",()=>u);let o=new Map,l=new Map;class a{constructor(e,t,r){this.pendingCandidates=new Map,this.peerConnections=new Map,this.context=e,this.stream=t,this.rtcConfig=r,this.sessionId=Date.now().toString(),o.set(this.sessionId,this),this.setupMessageHandlers(),setTimeout(()=>this.broadcastStreamInfo(),500)}setupMessageHandlers(){this.context.onMessage(({subject:e,from:t})=>{"requestStream"===e&&this.broadcastStreamInfo(t)}),this.context.onMessage(async({subject:e,body:t,from:r})=>{"webrtc-signal"!==e||t.targetPeerId!==this.context.username||t.sessionId!==this.sessionId&&t.sessionId||this.handleSignaling(r,t)})}broadcastStreamInfo(e=null){let t={roomId:this.context.class_id,peerId:this.context.username,sessionId:this.sessionId,settings:{mirrorX:this.context.module.stationConfig?.mirrorX??!1,mirrorY:this.context.module.stationConfig?.mirrorY??!1,rotate:this.context.module.stationConfig?.rotate??0},stream:{id:this.stream.id,tracks:this.stream.getTracks().map(e=>({kind:e.kind,enabled:e.enabled}))}};e?this.context.sendMessage("streamCredentials",t,e):this.context.sendMessage("streamCredentials",t)}async handleSignaling(e,t){let r=this.peerConnections.get(e);try{if("offer"===t.type){if(r)try{r.close()}catch(e){console.warn("Error closing connection:",e)}r=new RTCPeerConnection(this.rtcConfig),this.peerConnections.set(e,r),this.pendingCandidates.set(e,[]),this.stream.getTracks().forEach(e=>{r.addTrack(e,this.stream)}),r.onicecandidate=t=>{t.candidate&&this.context.sendMessage("webrtc-signal",{type:"ice-candidate",candidate:t.candidate,sessionId:this.sessionId,targetPeerId:e,fromPeerId:this.context.username})},r.onconnectionstatechange=()=>{("failed"===r.connectionState||"disconnected"===r.connectionState)&&this.context.sendMessage("webrtc-signal",{type:"reconnect",sessionId:this.sessionId,targetPeerId:e,fromPeerId:this.context.username})},await r.setRemoteDescription(new RTCSessionDescription(t.sdp)),await s(r,this.pendingCandidates.get(e)||[]);let n=await r.createAnswer();await r.setLocalDescription(n),this.context.sendMessage("webrtc-signal",{type:"answer",sdp:n,sessionId:this.sessionId,targetPeerId:e,fromPeerId:this.context.username})}else if("ice-candidate"===t.type){if(!r)return;r.remoteDescription?await r.addIceCandidate(new RTCIceCandidate(t.candidate)).catch(e=>console.warn("Failed to add ICE candidate:",e)):(this.pendingCandidates.has(e)||this.pendingCandidates.set(e,[]),this.pendingCandidates.get(e)?.push(t.candidate))}}catch(t){console.error(`Error in signal handling for peer ${e}:`,t),this.context.sendMessage("webrtc-signal",{type:"error",message:"Connection failed",sessionId:this.sessionId,targetPeerId:e,fromPeerId:this.context.username})}}stop(){this.peerConnections.forEach(e=>{try{e.close()}catch(e){console.warn("Error closing connection:",e)}}),this.peerConnections.clear(),this.pendingCandidates.clear(),this.context.sendMessage("streamStopped",{peerId:this.context.username,sessionId:this.sessionId}),o.delete(this.sessionId)}}class c{constructor(e,t,r){this.peerConnection=null,this.pendingIceCandidates=[],this.reconnectAttempts=0,this.context=e,this.handler=t,this.rtcConfig=r,this.setupMessageHandlers(),this.requestStream()}setupMessageHandlers(){this.context.onMessage(({subject:e,body:t})=>{"streamCredentials"===e?(this.sessionId=t.sessionId,this.peerId=t.peerId,this.connectToPeer(t)):"streamStopped"===e&&t.peerId===this.peerId&&t.sessionId===this.sessionId?this.cleanupAndReconnect():"webrtc-signal"===e&&t.targetPeerId===this.context.username&&t.sessionId===this.sessionId&&("reconnect"===t.type||"error"===t.type?this.cleanupAndReconnect():this.handleSignaling(t))})}cleanupAndReconnect(){if(this.peerConnection){try{this.peerConnection.close()}catch(e){console.error("Error closing connection:",e)}this.peerConnection=null}this.pendingIceCandidates=[],this.reconnectAttempts++;let e=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);console.log(`Reconnecting in ${e} ms (attempt ${this.reconnectAttempts})`),clearTimeout(this.reconnectTimer),this.reconnectTimer=window.setTimeout(()=>{this.requestStream()},e)}requestStream(){this.context.sendMessage("requestStream")}handleSignaling(e){if(this.peerConnection)try{"answer"===e.type?this.peerConnection.setRemoteDescription(new RTCSessionDescription(e.sdp)).then(()=>{if(this.pendingIceCandidates.length>0)return Promise.all(this.pendingIceCandidates.map(e=>this.peerConnection.addIceCandidate(new RTCIceCandidate(e)).catch(e=>console.warn("Failed to add ICE candidate:",e))))}).then(()=>{this.pendingIceCandidates=[]}).catch(e=>{console.error("Error handling answer:",e)}):"ice-candidate"===e.type&&(this.peerConnection.remoteDescription?this.peerConnection.addIceCandidate(new RTCIceCandidate(e.candidate)).catch(e=>console.warn("Failed to add ICE candidate:",e)):this.pendingIceCandidates.push(e.candidate))}catch(e){console.error("Client error handling signal:",e)}}async connectToPeer({peerId:e,settings:t,sessionId:r}){if(this.peerConnection){try{this.peerConnection.close()}catch(e){console.error("Error closing existing connection:",e)}this.pendingIceCandidates=[]}try{this.peerConnection=new RTCPeerConnection(this.rtcConfig),this.peerConnection.onconnectionstatechange=()=>{(this.peerConnection?.connectionState==="failed"||this.peerConnection?.connectionState==="disconnected")&&this.cleanupAndReconnect()},this.peerConnection.oniceconnectionstatechange=()=>{(this.peerConnection?.iceConnectionState==="failed"||this.peerConnection?.iceConnectionState==="disconnected")&&this.cleanupAndReconnect()},this.peerConnection.onicecandidate=e=>{e.candidate&&this.context.sendMessage("webrtc-signal",{type:"ice-candidate",candidate:e.candidate,sessionId:this.sessionId,targetPeerId:this.peerId,fromPeerId:this.context.username})},this.peerConnection.ontrack=e=>{this.handler(e.streams[0],t)};let n=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});await this.peerConnection.setLocalDescription(n),this.context.sendMessage("webrtc-signal",{type:"offer",sdp:n,sessionId:r,targetPeerId:e,fromPeerId:this.context.username}),this.reconnectAttempts=0}catch(e){console.error("Error in connectToPeer:",e),this.cleanupAndReconnect()}}stop(){clearTimeout(this.reconnectTimer),this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),this.pendingIceCandidates=[]}}class h{constructor(e,t,r={}){this.wsConnection=null,this.frameRequestId=null,this.keepAliveInterval=null,this.context=e,this.stream=t,this.sessionId=Date.now().toString(),this.settings={mirrorX:this.context.module.stationConfig?.mirrorX??!1,mirrorY:this.context.module.stationConfig?.mirrorY??!1,rotate:this.context.module.stationConfig?.rotate??0},this.websocketUrl=r.websocketUrl,this.roomId=this.context.class_id||this.context.liveUser?.room||this.sessionId;let n=document.createElement("video");n.srcObject=t,n.muted=!0,n.play(),this.canvas=document.createElement("canvas"),this.canvas.width=640,this.canvas.height=480,this.ctx=this.canvas.getContext("2d"),l.set(this.sessionId,this),n.onloadedmetadata=()=>{this.canvas.width=n.videoWidth,this.canvas.height=n.videoHeight,this.startStreaming(n)}}ensureKeepAlive(){null!==this.keepAliveInterval&&clearInterval(this.keepAliveInterval),this.keepAliveInterval=window.setInterval(()=>{this.wsConnection&&this.wsConnection.readyState===WebSocket.OPEN&&this.wsConnection.send(JSON.stringify({type:"keep-alive",timestamp:Date.now()}))},5e3)}startStreaming(e){this.wsConnection=new WebSocket(this.websocketUrl),this.wsConnection.onopen=()=>{this.wsConnection&&(this.wsConnection.send(JSON.stringify({type:"register-source",roomId:this.roomId,settings:this.settings})),this.ensureKeepAlive(),this.startFrameCapture(e))},this.wsConnection.onclose=()=>{this.stopFrameCapture()},this.wsConnection.onerror=e=>{console.error("WebSocket error:",e),this.stopFrameCapture()}}startFrameCapture(e){let t=0,r=n=>{if(!this.wsConnection||this.wsConnection.readyState!==WebSocket.OPEN)return void this.stopFrameCapture();if(n-t>66.66666666666667&&e.readyState===e.HAVE_ENOUGH_DATA){t=n;try{let t=e.videoWidth,r=e.videoHeight;(this.canvas.width!==t||this.canvas.height!==r)&&(this.canvas.width=t,this.canvas.height=r),this.ctx.drawImage(e,0,0,t,r);let n=this.canvas.toDataURL("image/jpeg",.7);this.wsConnection.send(JSON.stringify({type:"frame",data:n,settings:this.settings,timestamp:Date.now(),frameRate:15}))}catch(e){console.error("Error capturing frame:",e)}}this.frameRequestId=requestAnimationFrame(r)};this.frameRequestId=requestAnimationFrame(r)}stopFrameCapture(){null!==this.frameRequestId&&(cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)}stop(){this.stopFrameCapture(),null!==this.keepAliveInterval&&(clearInterval(this.keepAliveInterval),this.keepAliveInterval=null),this.wsConnection&&(this.wsConnection.close(),this.wsConnection=null),l.delete(this.sessionId)}}class u{constructor(e,t,r={}){this.wsConnection=null,this.reconnectTimer=null,this.reconnectAttempts=0,this.stream=null,this.frameBuffer=[],this.maxBufferSize=3,this.processingFrame=!1,this.sourceAvailable=!1,this.context=e,this.handler=t,this.websocketUrl=r.websocketUrl,this.roomId=this.context.class_id||this.context.liveUser?.room||null,this.streamCanvas=document.createElement("canvas"),this.streamCanvas.width=640,this.streamCanvas.height=480,this.streamCtx=this.streamCanvas.getContext("2d"),this.img=new Image,this.setupImageHandlers(),this.connect()}setupImageHandlers(){let e=()=>{if(this.processingFrame||0===this.frameBuffer.length)return;this.processingFrame=!0;let t=this.frameBuffer.shift();t?(this.img.onload=()=>{try{(this.streamCanvas.width!==this.img.width||this.streamCanvas.height!==this.img.height)&&(this.streamCanvas.width=this.img.width,this.streamCanvas.height=this.img.height),this.streamCtx.clearRect(0,0,this.streamCanvas.width,this.streamCanvas.height),this.streamCtx.drawImage(this.img,0,0),this.stream||(this.stream=this.streamCanvas.captureStream(30),this.handler(this.stream,this.context.module.stationConfig)),this.processingFrame=!1,this.frameBuffer.length>0&&window.setTimeout(e,10)}catch(e){console.error("Error displaying frame:",e),this.processingFrame=!1}},this.img.onerror=()=>{console.error("Error loading image"),this.processingFrame=!1,window.setTimeout(e,10)},this.img.src=t):this.processingFrame=!1};setInterval(()=>{!this.processingFrame&&this.frameBuffer.length>0&&e()},16)}connect(){this.wsConnection=new WebSocket(this.websocketUrl),this.wsConnection.onopen=()=>{this.reconnectAttempts=0,console.log("WebSocket client connected"),this.roomId?this.wsConnection.send(JSON.stringify({type:"join-room",roomId:this.roomId})):console.warn("No room ID available for WebSocket streaming")},this.wsConnection.onmessage=e=>{try{let t=JSON.parse(e.data);"source-available"===t.type&&t.roomId===this.roomId?this.sourceAvailable=!0:"source-disconnected"===t.type&&t.roomId===this.roomId?(this.sourceAvailable=!1,this.frameBuffer=[]):"frame"===t.type&&t.data&&this.sourceAvailable?(this.frameBuffer.length<this.maxBufferSize||this.frameBuffer.shift(),this.frameBuffer.push(t.data)):"info"===t.type&&console.log("WebSocket info:",t.message)}catch(e){console.error("Error processing message:",e)}},this.wsConnection.onclose=()=>{this.reconnect()},this.wsConnection.onerror=e=>{console.error("WebSocket error:",e)}}reconnect(){this.wsConnection&&(this.wsConnection.close(),this.wsConnection=null),this.reconnectAttempts++;let e=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);null!==this.reconnectTimer&&window.clearTimeout(this.reconnectTimer),this.reconnectTimer=window.setTimeout(()=>{this.connect()},e)}stop(){null!==this.reconnectTimer&&(window.clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.wsConnection&&(this.wsConnection.close(),this.wsConnection=null),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null)}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}]},["5Hf22"],"5Hf22","parcelRequiredcf9",{});