!function(e,t,r,n,i,s,o,a){var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},c="function"==typeof l[n]&&l[n],h=c.i||{},u=c.cache||{},d="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function p(t,r){if(!u[t]){if(!e[t]){if(i[t])return i[t];var s="function"==typeof l[n]&&l[n];if(!r&&s)return s(t,!0);if(c)return c(t,!0);if(d&&"string"==typeof t)return d(t);var o=Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}h.resolve=function(r){var n=e[t][1][r];return null!=n?n:r},h.cache={};var a=u[t]=new p.Module(t);e[t][0].call(a.exports,h,a,a.exports,l)}return u[t].exports;function h(e){var t=h.resolve(e);return!1===t?{}:p(t)}}p.isParcelRequire=!0,p.Module=function(e){this.id=e,this.bundle=p,this.require=d,this.exports={}},p.modules=e,p.cache=u,p.parent=c,p.distDir=void 0,p.publicUrl=void 0,p.devServer=void 0,p.i=h,p.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(p,"root",{get:function(){return l[n]}}),l[n]=p;for(var f=0;f<t.length;f++)p(t[f]);if(r){var g=p(r);"object"==typeof exports&&"undefined"!=typeof module?module.exports=g:"function"==typeof define&&define.amd&&define(function(){return g})}}({"5Hf22":[function(e,t,r,n){var i,s=e("yjs"),o=e("msgpackr"),a=e("./streamHandler"),l=e("./debugHandler");let c="extern";var h=!1,u={onReady:!1,onUpdate:!1};function d(...e){window.Edrys.debug&&l.debug.api.general(`Edrys (${window.Edrys.module.name||"not ready"}):`,...e)}function p(...e){let t=window.Edrys?.module?.name||"not ready";l.debug.api.general(`Edrys (${t}):`,...e)}window.addEventListener("unload",()=>{window.parent.postMessage({event:"reload",module:window.Edrys?.module?.url||"*"},window.Edrys?.origin||"*")}),window.Edrys={origin:"*",ready:!1,role:void 0,username:void 0,liveClass:void 0,liveRoom:void 0,liveUser:void 0,module:void 0,class_id:void 0,_debug:!1,rtcConfig:null,get debug(){return this._debug},set debug(value){this._debug=value,value?(0,l.enableDebug)("edrysModule,api:*"):(0,l.disableSpecificDebug)("edrysModule,api:*")},onReady(e){u.onReady=!0,window.Edrys.ready?(d("READY"),e(window.Edrys)):window.addEventListener("$Edrys.ready",t=>{d("READY"),e(window.Edrys)})},onUpdate(e){u.onUpdate=!0,window.addEventListener("$Edrys.update",t=>{window.Edrys.ready&&(d("UPDATE"),e(window.Edrys))})},onMessage(e,t=!1){window.addEventListener("$Edrys.message",r=>{if(!t&&r.detail.module!=window.Edrys.module?.url)return;let n=r.detail;if(!n?._decoded)try{n.body=function(e){try{let t=atob(e),r=new Uint8Array([...t].map(e=>e.charCodeAt(0)));return(0,o.unpack)(r)}catch(e){throw e}}(n.body),n._decoded=!0}catch(e){p("Error decoding message =>",n,e);return}d("RECEIVED MESSAGE",n.subject,n.body),e(n)})},sendMessage:(e,t,r)=>{"string"!=typeof e&&(e=JSON.stringify(e)),d("SENDING MESSAGE",e,t);try{t=function(e){try{let t=(0,o.pack)(e);return btoa(String.fromCharCode(...t))}catch(e){throw e}}(t)}catch(e){l.debug.api.general("Edrys: Error encoding message =>",t,e);return}window.parent.postMessage({event:"message",subject:e,body:t,module:window.Edrys.module.url,user:r},window.Edrys.origin)},setItem(e,t){localStorage.setItem(`${window.Edrys.class_id}.${window.Edrys.liveUser.room}.${e}`,t)},getItem:e=>localStorage.getItem(`${window.Edrys.class_id}.${window.Edrys.liveUser.room}.${e}`),clearState(e){i.getMap("rooms").get(window.Edrys.liveUser.room).delete(e)},updateState(e,t){i.transact(e,t)},getState(e,t,r){let n,o=i.getMap("rooms").get(window.Edrys.liveUser.room);if(!e)return o;if(o.has(e)&&("Value"!==t||"Value"===t&&void 0===r))return o.get(e);switch(t){case"Map":n=new s.Map;break;case"Array":n=new s.Array;break;case"Text":n=new s.Text;break;case"XmlFragment":n=new s.XmlFragment;break;case"XmlText":n=new s.XmlText;break;case"XmlElement":n=new s.XmlElement;break;case"Value":if(void 0===r)return;let a=o.get(e);if(JSON.stringify(a)===JSON.stringify(r))return a;n=r;break;default:p("Unknown type =>",t);return}return o.set(e,n),n},async sendStream(e,t={}){let r=t.method||"webrtc";if(l.debug.api.general(`Streaming using method: ${r}`),"websocket"===r){let r=new(0,a.WebSocketStreamServer)(this,e,t);return{stop:()=>r.stop()}}{let r=await this.getWebRTCConfig(),n=t.streamName||this.module.stationConfig?.streamName,i=new(0,a.StreamServer)(this,e,r,n);return{stop:()=>i.stop(),updateStream:e=>i.updateStream(e)}}},onStream(e,t={}){let r=t.method||"webrtc";if(l.debug.api.general(`Receiving stream using method: ${r}`),"websocket"!==r)return this.getWebRTCConfig().then(async r=>{let n=t.streamName||this.module.stationConfig?.streamName||"Camera 1",i=new(0,a.StreamClient)(this,e,r,n);return{stop:()=>i.stop()}});{let r=new(0,a.WebSocketStreamClient)(this,e,t);return Promise.resolve({stop:()=>r.stop()})}},async getWebRTCConfig(){return this.rtcConfig||(window.parent.postMessage({event:"requestWebRTCConfig"},this.origin),this.rtcConfig=await new Promise(e=>{let t=r=>{"webrtcConfig"===r.data.event&&(window.removeEventListener("message",t),e(r.data.config))};window.addEventListener("message",t)})),this.rtcConfig},importDebug:()=>l.debug.edrysModule};let f=e=>({get(t,r){if("isProxy"==r)return!0;let n=t[r];if(void 0!==n)return n.isProxy||"object"!=typeof n||(t[r]=new Proxy(n,f([...e,r]))),t[r]},set(t,r,n){if(!e.includes("__ob__")){let t=[...e,r];window.parent.postMessage({event:"update",path:t,value:n},window.Edrys.origin)}return t[r]=n,!0}});function g(){let e={users:i.getMap("users").toJSON(),rooms:i.getMap("rooms").toJSON()};Object.entries(e.rooms).forEach(([e,t])=>({name:e,data:t})),Object.entries(e.users).forEach(([e,t])=>{t.name=e}),window.Edrys.liveClass=new Proxy(e,f("")),window.Edrys.liveUser=e.users[window.Edrys.username],window.Edrys.liveRoom=e.rooms[window.Edrys.liveUser.room]}function m(){g(),dispatchEvent(new CustomEvent("$Edrys.update",{bubbles:!1}))}window.addEventListener("message",function(e){switch(e.data.event){case"update":window.Edrys.origin=e.data.origin,window.Edrys.role=e.data.role,window.Edrys.username=e.data.username,window.Edrys.module=e.data.module,i||((i=new s.Doc).getMap("users"),i.getMap("rooms"),i.on("update",(t,r)=>{if(g(),d("DOC",t,r),r===c){!window.Edrys.ready&&h&&(this.setTimeout(()=>{window.Edrys.ready=!0,u.onReady?dispatchEvent(new CustomEvent("$Edrys.ready",{bubbles:!1,detail:e.data})):u.onUpdate&&m()},1e3),i.getMap("rooms").observeDeep((e,t)=>{m()}),i.getMap("users").observeDeep((e,t)=>{m()}),setTimeout(function(){m()},500));return}window.parent.postMessage({event:"state",data:t},window.Edrys.origin)}));try{window.Edrys.module.config=JSON.parse(e.data.module.config)}catch(e){}try{window.Edrys.module.studentConfig=JSON.parse(e.data.module.studentConfig)}catch(e){}try{window.Edrys.module.teacherConfig=JSON.parse(e.data.module.teacherConfig)}catch(e){}try{window.Edrys.module.stationConfig=JSON.parse(e.data.module.stationConfig)}catch(e){}window.Edrys.class_id=e.data.class_id,e.data.liveClass&&(h=!0,s.applyUpdate(i,e.data.liveClass,c));break;case"message":break;case"echo":l.debug.api.general("ECHO:",e.data);break;case"webrtcConfig":window.Edrys.rtcConfig=e.data.config}"update"!==e.data.event&&dispatchEvent(new CustomEvent("$Edrys."+e.data.event,{bubbles:!1,detail:e.data}))},!1),window.addEventListener("load",()=>{setTimeout(function(){!function e(){window.Edrys.ready||(p("Module not ready yet ..."),window.parent.postMessage({event:"reload",module:window.Edrys?.module?.url||"*"},window.Edrys?.origin||"*"),setTimeout(function(){e()},5e3))}()},2e3)})},{yjs:"dTroZ",msgpackr:"jCq4q","./streamHandler":"blYkP","./debugHandler":"imzZk"}],dTroZ:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"AbsolutePosition",()=>e_),i.export(r,"AbstractConnector",()=>S),i.export(r,"AbstractStruct",()=>rw),i.export(r,"AbstractType",()=>tM),i.export(r,"Array",()=>t8),i.export(r,"ContentAny",()=>rI),i.export(r,"ContentBinary",()=>rx),i.export(r,"ContentDeleted",()=>rv),i.export(r,"ContentDoc",()=>r_),i.export(r,"ContentEmbed",()=>rE),i.export(r,"ContentFormat",()=>rS),i.export(r,"ContentJSON",()=>rT),i.export(r,"ContentString",()=>rU),i.export(r,"ContentType",()=>rL),i.export(r,"Doc",()=>N),i.export(r,"GC",()=>rb),i.export(r,"ID",()=>eu),i.export(r,"Item",()=>rW),i.export(r,"Map",()=>t6),i.export(r,"PermanentUserData",()=>eb),i.export(r,"RelativePosition",()=>ex),i.export(r,"Skip",()=>rH),i.export(r,"Snapshot",()=>ej),i.export(r,"Text",()=>ru),i.export(r,"Transaction",()=>eQ),i.export(r,"UndoManager",()=>tt),i.export(r,"UpdateDecoderV1",()=>z),i.export(r,"UpdateDecoderV2",()=>W),i.export(r,"UpdateEncoderV1",()=>J),i.export(r,"UpdateEncoderV2",()=>q),i.export(r,"XmlElement",()=>rf),i.export(r,"XmlFragment",()=>rp),i.export(r,"XmlHook",()=>rm),i.export(r,"XmlText",()=>ry),i.export(r,"YArrayEvent",()=>t2),i.export(r,"YEvent",()=>tk),i.export(r,"YMapEvent",()=>t3),i.export(r,"YTextEvent",()=>rh),i.export(r,"YXmlEvent",()=>rg),i.export(r,"applyUpdate",()=>Q),i.export(r,"applyUpdateV2",()=>Z),i.export(r,"cleanupYTextFormatting",()=>ra),i.export(r,"compareIDs",()=>ed),i.export(r,"compareRelativePositions",()=>eU),i.export(r,"convertUpdateFormatV1ToV2",()=>tE),i.export(r,"convertUpdateFormatV2ToV1",()=>tS),i.export(r,"createAbsolutePositionFromRelativePosition",()=>eI),i.export(r,"createDeleteSet",()=>R),i.export(r,"createDeleteSetFromStructStore",()=>B),i.export(r,"createDocFromSnapshot",()=>eV),i.export(r,"createID",()=>ep),i.export(r,"createRelativePositionFromJSON",()=>eC),i.export(r,"createRelativePositionFromTypeIndex",()=>eS),i.export(r,"createSnapshot",()=>eO),i.export(r,"decodeRelativePosition",()=>ek),i.export(r,"decodeSnapshot",()=>eP),i.export(r,"decodeSnapshotV2",()=>eB),i.export(r,"decodeStateVector",()=>en),i.export(r,"decodeUpdate",()=>ts),i.export(r,"decodeUpdateV2",()=>to),i.export(r,"diffUpdate",()=>tm),i.export(r,"diffUpdateV2",()=>tg),i.export(r,"emptySnapshot",()=>eM),i.export(r,"encodeRelativePosition",()=>eT),i.export(r,"encodeSnapshot",()=>eR),i.export(r,"encodeSnapshotV2",()=>eD),i.export(r,"encodeStateAsUpdate",()=>et),i.export(r,"encodeStateAsUpdateV2",()=>ee),i.export(r,"encodeStateVector",()=>es),i.export(r,"encodeStateVectorFromUpdate",()=>th),i.export(r,"encodeStateVectorFromUpdateV2",()=>tc),i.export(r,"equalDeleteSets",()=>L),i.export(r,"equalSnapshots",()=>eA),i.export(r,"findIndexSS",()=>eH),i.export(r,"findRootTypeKey",()=>em),i.export(r,"getItem",()=>eq),i.export(r,"getItemCleanEnd",()=>eX),i.export(r,"getItemCleanStart",()=>eK),i.export(r,"getState",()=>eG),i.export(r,"getTypeChildren",()=>tP),i.export(r,"isDeleted",()=>U),i.export(r,"isParentOf",()=>ey),i.export(r,"iterateDeletedStructs",()=>I),i.export(r,"logType",()=>ew),i.export(r,"logUpdate",()=>tn),i.export(r,"logUpdateV2",()=>ti),i.export(r,"mergeDeleteSets",()=>A),i.export(r,"mergeUpdates",()=>tl),i.export(r,"mergeUpdatesV2",()=>tf),i.export(r,"obfuscateUpdate",()=>tC),i.export(r,"obfuscateUpdateV2",()=>t_),i.export(r,"parseUpdateMeta",()=>td),i.export(r,"parseUpdateMetaV2",()=>tu),i.export(r,"readUpdate",()=>X),i.export(r,"readUpdateV2",()=>K),i.export(r,"relativePositionToJSON",()=>ev),i.export(r,"snapshot",()=>eL),i.export(r,"snapshotContainsUpdate",()=>ez),i.export(r,"transact",()=>e4),i.export(r,"tryGc",()=>e6),i.export(r,"typeListToArraySnapshot",()=>tN),i.export(r,"typeMapGetAllSnapshot",()=>t0),i.export(r,"typeMapGetSnapshot",()=>tQ);var s=e("lib0/observable"),o=e("lib0/array"),a=e("lib0/math"),l=e("lib0/map"),c=e("lib0/encoding"),h=e("lib0/decoding"),u=e("lib0/random"),d=e("lib0/promise"),p=e("lib0/buffer"),f=e("lib0/error"),g=e("lib0/binary"),m=e("lib0/function"),y=e("lib0/set"),w=e("lib0/logging"),b=e("lib0/time"),x=e("lib0/string"),v=e("lib0/iterator"),C=e("lib0/object"),_=e("lib0/environment"),E=arguments[3];class S extends s.ObservableV2{constructor(e,t){super(),this.doc=e,this.awareness=t}}class T{constructor(e,t){this.clock=e,this.len=t}}class k{constructor(){this.clients=new Map}}let I=(e,t,r)=>t.clients.forEach((t,n)=>{let i=e.doc.store.clients.get(n);if(null!=i){let n=i[i.length-1],s=n.id.clock+n.length;for(let n=0,o=t[n];n<t.length&&o.clock<s;o=t[++n])eZ(e,i,o.clock,o.len,r)}}),U=(e,t)=>{let r=e.clients.get(t.client);return void 0!==r&&null!==((e,t)=>{let r=0,n=e.length-1;for(;r<=n;){let i=a.floor((r+n)/2),s=e[i],o=s.clock;if(o<=t){if(t<o+s.len)return i;r=i+1}else n=i-1}return null})(r,t.clock)},j=e=>{e.clients.forEach(e=>{let t,r;for(e.sort((e,t)=>e.clock-t.clock),t=1,r=1;t<e.length;t++){let n=e[r-1],i=e[t];n.clock+n.len>=i.clock?n.len=a.max(n.len,i.clock+i.len-n.clock):(r<t&&(e[r]=i),r++)}e.length=r})},A=e=>{let t=new k;for(let r=0;r<e.length;r++)e[r].clients.forEach((n,i)=>{if(!t.clients.has(i)){let s=n.slice();for(let t=r+1;t<e.length;t++)o.appendTo(s,e[t].clients.get(i)||[]);t.clients.set(i,s)}});return j(t),t},D=(e,t,r,n)=>{l.setIfUndefined(e.clients,t,()=>[]).push(new T(r,n))},R=()=>new k,B=e=>{let t=R();return e.clients.forEach((e,r)=>{let n=[];for(let t=0;t<e.length;t++){let r=e[t];if(r.deleted){let i=r.id.clock,s=r.length;if(t+1<e.length)for(let r=e[t+1];t+1<e.length&&r.deleted;r=e[++t+1])s+=r.length;n.push(new T(i,s))}}n.length>0&&t.clients.set(r,n)}),t},P=(e,t)=>{c.writeVarUint(e.restEncoder,t.clients.size),o.from(t.clients.entries()).sort((e,t)=>t[0]-e[0]).forEach(([t,r])=>{e.resetDsCurVal(),c.writeVarUint(e.restEncoder,t);let n=r.length;c.writeVarUint(e.restEncoder,n);for(let t=0;t<n;t++){let n=r[t];e.writeDsClock(n.clock),e.writeDsLen(n.len)}})},O=e=>{let t=new k,r=h.readVarUint(e.restDecoder);for(let n=0;n<r;n++){e.resetDsCurVal();let r=h.readVarUint(e.restDecoder),n=h.readVarUint(e.restDecoder);if(n>0){let i=l.setIfUndefined(t.clients,r,()=>[]);for(let t=0;t<n;t++)i.push(new T(e.readDsClock(),e.readDsLen()))}}return t},M=(e,t,r)=>{let n=new k,i=h.readVarUint(e.restDecoder);for(let s=0;s<i;s++){e.resetDsCurVal();let i=h.readVarUint(e.restDecoder),s=h.readVarUint(e.restDecoder),o=r.clients.get(i)||[],a=eG(r,i);for(let r=0;r<s;r++){let r=e.readDsClock(),s=r+e.readDsLen();if(r<a){a<s&&D(n,i,a,s-a);let e=eH(o,r),l=o[e];for(!l.deleted&&l.id.clock<r&&(o.splice(e+1,0,rV(t,l,r-l.id.clock)),e++);e<o.length;)if((l=o[e++]).id.clock<s)l.deleted||(s<l.id.clock+l.length&&o.splice(e,0,rV(t,l,s-l.id.clock)),l.delete(t));else break}else D(n,i,r,s-r)}}if(n.clients.size>0){let e=new q;return c.writeVarUint(e.restEncoder,0),P(e,n),e.toUint8Array()}return null},L=(e,t)=>{if(e.clients.size!==t.clients.size)return!1;for(let[r,n]of e.clients.entries()){let e=t.clients.get(r);if(void 0===e||n.length!==e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],i=e[t];if(r.clock!==i.clock||r.len!==i.len)return!1}}return!0},F=u.uint32;class N extends s.ObservableV2{constructor({guid:e=u.uuidv4(),collectionid:t=null,gc:r=!0,gcFilter:n=()=>!0,meta:i=null,autoLoad:s=!1,shouldLoad:o=!0}={}){super(),this.gc=r,this.gcFilter=n,this.clientID=F(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new e$,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=o,this.autoLoad=s,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=d.create(e=>{this.on("load",()=>{this.isLoaded=!0,e(this)})});let a=()=>d.create(e=>{let t=r=>{(void 0===r||!0===r)&&(this.off("sync",t),e())};this.on("sync",t)});this.on("sync",e=>{!1===e&&this.isSynced&&(this.whenSynced=a()),this.isSynced=void 0===e||!0===e,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=a()}load(){let e=this._item;null===e||this.shouldLoad||e4(e.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(o.from(this.subdocs).map(e=>e.guid))}transact(e,t=null){return e4(this,e,t)}get(e,t=tM){let r=l.setIfUndefined(this.share,e,()=>{let e=new t;return e._integrate(this,null),e}),n=r.constructor;if(t!==tM&&n!==t)if(n===tM){let n=new t;n._map=r._map,r._map.forEach(e=>{for(;null!==e;e=e.left)e.parent=n}),n._start=r._start;for(let e=n._start;null!==e;e=e.right)e.parent=n;return n._length=r._length,this.share.set(e,n),n._integrate(this,null),n}else throw Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,t8)}getText(e=""){return this.get(e,ru)}getMap(e=""){return this.get(e,t6)}getXmlElement(e=""){return this.get(e,rf)}getXmlFragment(e=""){return this.get(e,rp)}toJSON(){let e={};return this.share.forEach((t,r)=>{e[r]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,o.from(this.subdocs).forEach(e=>e.destroy());let e=this._item;if(null!==e){this._item=null;let t=e.content;t.doc=new N({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,e4(e.parent.doc,r=>{let n=t.doc;e.deleted||r.subdocsAdded.add(n),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class V{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return h.readVarUint(this.restDecoder)}readDsLen(){return h.readVarUint(this.restDecoder)}}class z extends V{readLeftID(){return ep(h.readVarUint(this.restDecoder),h.readVarUint(this.restDecoder))}readRightID(){return ep(h.readVarUint(this.restDecoder),h.readVarUint(this.restDecoder))}readClient(){return h.readVarUint(this.restDecoder)}readInfo(){return h.readUint8(this.restDecoder)}readString(){return h.readVarString(this.restDecoder)}readParentInfo(){return 1===h.readVarUint(this.restDecoder)}readTypeRef(){return h.readVarUint(this.restDecoder)}readLen(){return h.readVarUint(this.restDecoder)}readAny(){return h.readAny(this.restDecoder)}readBuf(){return p.copyUint8Array(h.readVarUint8Array(this.restDecoder))}readJSON(){return JSON.parse(h.readVarString(this.restDecoder))}readKey(){return h.readVarString(this.restDecoder)}}class ${constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=h.readVarUint(this.restDecoder),this.dsCurrVal}readDsLen(){let e=h.readVarUint(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class W extends ${constructor(e){super(e),this.keys=[],h.readVarUint(e),this.keyClockDecoder=new h.IntDiffOptRleDecoder(h.readVarUint8Array(e)),this.clientDecoder=new h.UintOptRleDecoder(h.readVarUint8Array(e)),this.leftClockDecoder=new h.IntDiffOptRleDecoder(h.readVarUint8Array(e)),this.rightClockDecoder=new h.IntDiffOptRleDecoder(h.readVarUint8Array(e)),this.infoDecoder=new h.RleDecoder(h.readVarUint8Array(e),h.readUint8),this.stringDecoder=new h.StringDecoder(h.readVarUint8Array(e)),this.parentInfoDecoder=new h.RleDecoder(h.readVarUint8Array(e),h.readUint8),this.typeRefDecoder=new h.UintOptRleDecoder(h.readVarUint8Array(e)),this.lenDecoder=new h.UintOptRleDecoder(h.readVarUint8Array(e))}readLeftID(){return new eu(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new eu(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return h.readAny(this.restDecoder)}readBuf(){return h.readVarUint8Array(this.restDecoder)}readJSON(){return h.readAny(this.restDecoder)}readKey(){let e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{let e=this.stringDecoder.read();return this.keys.push(e),e}}}class G{constructor(){this.restEncoder=c.createEncoder()}toUint8Array(){return c.toUint8Array(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){c.writeVarUint(this.restEncoder,e)}writeDsLen(e){c.writeVarUint(this.restEncoder,e)}}class J extends G{writeLeftID(e){c.writeVarUint(this.restEncoder,e.client),c.writeVarUint(this.restEncoder,e.clock)}writeRightID(e){c.writeVarUint(this.restEncoder,e.client),c.writeVarUint(this.restEncoder,e.clock)}writeClient(e){c.writeVarUint(this.restEncoder,e)}writeInfo(e){c.writeUint8(this.restEncoder,e)}writeString(e){c.writeVarString(this.restEncoder,e)}writeParentInfo(e){c.writeVarUint(this.restEncoder,+!!e)}writeTypeRef(e){c.writeVarUint(this.restEncoder,e)}writeLen(e){c.writeVarUint(this.restEncoder,e)}writeAny(e){c.writeAny(this.restEncoder,e)}writeBuf(e){c.writeVarUint8Array(this.restEncoder,e)}writeJSON(e){c.writeVarString(this.restEncoder,JSON.stringify(e))}writeKey(e){c.writeVarString(this.restEncoder,e)}}class H{constructor(){this.restEncoder=c.createEncoder(),this.dsCurrVal=0}toUint8Array(){return c.toUint8Array(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){let t=e-this.dsCurrVal;this.dsCurrVal=e,c.writeVarUint(this.restEncoder,t)}writeDsLen(e){0===e&&f.unexpectedCase(),c.writeVarUint(this.restEncoder,e-1),this.dsCurrVal+=e}}class q extends H{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new c.IntDiffOptRleEncoder,this.clientEncoder=new c.UintOptRleEncoder,this.leftClockEncoder=new c.IntDiffOptRleEncoder,this.rightClockEncoder=new c.IntDiffOptRleEncoder,this.infoEncoder=new c.RleEncoder(c.writeUint8),this.stringEncoder=new c.StringEncoder,this.parentInfoEncoder=new c.RleEncoder(c.writeUint8),this.typeRefEncoder=new c.UintOptRleEncoder,this.lenEncoder=new c.UintOptRleEncoder}toUint8Array(){let e=c.createEncoder();return c.writeVarUint(e,0),c.writeVarUint8Array(e,this.keyClockEncoder.toUint8Array()),c.writeVarUint8Array(e,this.clientEncoder.toUint8Array()),c.writeVarUint8Array(e,this.leftClockEncoder.toUint8Array()),c.writeVarUint8Array(e,this.rightClockEncoder.toUint8Array()),c.writeVarUint8Array(e,c.toUint8Array(this.infoEncoder)),c.writeVarUint8Array(e,this.stringEncoder.toUint8Array()),c.writeVarUint8Array(e,c.toUint8Array(this.parentInfoEncoder)),c.writeVarUint8Array(e,this.typeRefEncoder.toUint8Array()),c.writeVarUint8Array(e,this.lenEncoder.toUint8Array()),c.writeUint8Array(e,c.toUint8Array(this.restEncoder)),c.toUint8Array(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(+!!e)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){c.writeAny(this.restEncoder,e)}writeBuf(e){c.writeVarUint8Array(this.restEncoder,e)}writeJSON(e){c.writeAny(this.restEncoder,e)}writeKey(e){let t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}let Y=(e,t,r)=>{let n=new Map;r.forEach((e,r)=>{eG(t,r)>e&&n.set(r,e)}),eW(t).forEach((e,t)=>{r.has(t)||n.set(t,0)}),c.writeVarUint(e.restEncoder,n.size),o.from(n.entries()).sort((e,t)=>t[0]-e[0]).forEach(([r,n])=>{((e,t,r,n)=>{n=a.max(n,t[0].id.clock);let i=eH(t,n);c.writeVarUint(e.restEncoder,t.length-i),e.writeClient(r),c.writeVarUint(e.restEncoder,n);let s=t[i];s.write(e,n-s.id.clock);for(let r=i+1;r<t.length;r++)t[r].write(e,0)})(e,t.clients.get(r),r,n)})},K=(e,t,r,n=new W(e))=>e4(t,e=>{e.local=!1;let t=!1,r=e.doc,i=r.store,s=((e,t,r)=>{let n=[],i=o.from(r.keys()).sort((e,t)=>e-t);if(0===i.length)return null;let s=()=>{if(0===i.length)return null;let e=r.get(i[i.length-1]);for(;e.refs.length===e.i;){if(i.pop(),!(i.length>0))return null;e=r.get(i[i.length-1])}return e},a=s();if(null===a)return null;let h=new e$,u=new Map,d=(e,t)=>{let r=u.get(e);(null==r||r>t)&&u.set(e,t)},p=a.refs[a.i++],f=new Map,g=()=>{for(let e of n){let t=e.id.client,n=r.get(t);n?(n.i--,h.clients.set(t,n.refs.slice(n.i)),r.delete(t),n.i=0,n.refs=[]):h.clients.set(t,[e]),i=i.filter(e=>e!==t)}n.length=0};for(;;){if(p.constructor!==rH){let i=l.setIfUndefined(f,p.id.client,()=>eG(t,p.id.client))-p.id.clock;if(i<0)n.push(p),d(p.id.client,p.id.clock-1),g();else{let s=p.getMissing(e,t);if(null!==s){n.push(p);let e=r.get(s)||{refs:[],i:0};if(e.refs.length===e.i)d(s,eG(t,s)),g();else{p=e.refs[e.i++];continue}}else(0===i||i<p.length)&&(p.integrate(e,i),f.set(p.id.client,p.id.clock+p.length))}}if(n.length>0)p=n.pop();else if(null!==a&&a.i<a.refs.length)p=a.refs[a.i++];else{if(null===(a=s()))break;p=a.refs[a.i++]}}if(h.clients.size>0){let e=new q;return Y(e,h,new Map),c.writeVarUint(e.restEncoder,0),{missing:u,update:e.toUint8Array()}}return null})(e,i,((e,t)=>{let r=l.create(),n=h.readVarUint(e.restDecoder);for(let i=0;i<n;i++){let n=h.readVarUint(e.restDecoder),i=Array(n),s=e.readClient(),o=h.readVarUint(e.restDecoder);r.set(s,{i:0,refs:i});for(let r=0;r<n;r++){let n=e.readInfo();switch(g.BITS5&n){case 0:{let t=e.readLen();i[r]=new rb(ep(s,o),t),o+=t;break}case 10:{let t=h.readVarUint(e.restDecoder);i[r]=new rH(ep(s,o),t),o+=t;break}default:{let a=(n&(g.BIT7|g.BIT8))==0,l=new rW(ep(s,o),null,(n&g.BIT8)===g.BIT8?e.readLeftID():null,null,(n&g.BIT7)===g.BIT7?e.readRightID():null,a?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,a&&(n&g.BIT6)===g.BIT6?e.readString():null,rG(e,n));i[r]=l,o+=l.length}}}}return r})(n,r)),a=i.pendingStructs;if(a){for(let[e,r]of a.missing)if(r<eG(i,e)){t=!0;break}if(s){for(let[e,t]of s.missing){let r=a.missing.get(e);(null==r||r>t)&&a.missing.set(e,t)}a.update=tf([a.update,s.update])}}else i.pendingStructs=s;let u=M(n,e,i);if(i.pendingDs){let t=new W(h.createDecoder(i.pendingDs));h.readVarUint(t.restDecoder);let r=M(t,e,i);u&&r?i.pendingDs=tf([u,r]):i.pendingDs=u||r}else i.pendingDs=u;if(t){let t=i.pendingStructs.update;i.pendingStructs=null,Z(e.doc,t)}},r,!1),X=(e,t,r)=>K(e,t,r,new z(e)),Z=(e,t,r,n=W)=>{let i=h.createDecoder(t);K(i,e,r,new n(i))},Q=(e,t,r)=>Z(e,t,r,z),ee=(e,t=new Uint8Array([0]),r=new q)=>{((e,t,r=new Map)=>{Y(e,t.store,r),P(e,B(t.store))})(r,e,en(t));let n=[r.toUint8Array()];if(e.store.pendingDs&&n.push(e.store.pendingDs),e.store.pendingStructs&&n.push(tg(e.store.pendingStructs.update,t)),n.length>1){if(r.constructor===J)return tl(n.map((e,t)=>0===t?e:tS(e)));else if(r.constructor===q)return tf(n)}return n[0]},et=(e,t)=>ee(e,t,new J),er=e=>{let t=new Map,r=h.readVarUint(e.restDecoder);for(let n=0;n<r;n++){let r=h.readVarUint(e.restDecoder),n=h.readVarUint(e.restDecoder);t.set(r,n)}return t},en=e=>er(new V(h.createDecoder(e))),ei=(e,t)=>(c.writeVarUint(e.restEncoder,t.size),o.from(t.entries()).sort((e,t)=>t[0]-e[0]).forEach(([t,r])=>{c.writeVarUint(e.restEncoder,t),c.writeVarUint(e.restEncoder,r)}),e),es=e=>((e,t=new H)=>(e instanceof Map?ei(t,e):ei(t,eW(e.store)),t.toUint8Array()))(e,new G);class eo{constructor(){this.l=[]}}let ea=()=>new eo,el=(e,t)=>e.l.push(t),ec=(e,t)=>{let r=e.l,n=r.length;e.l=r.filter(e=>t!==e),n===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},eh=(e,t,r)=>m.callAll(e.l,[t,r]);class eu{constructor(e,t){this.client=e,this.clock=t}}let ed=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,ep=(e,t)=>new eu(e,t),ef=(e,t)=>{c.writeVarUint(e,t.client),c.writeVarUint(e,t.clock)},eg=e=>ep(h.readVarUint(e),h.readVarUint(e)),em=e=>{for(let[t,r]of e.doc.share.entries())if(r===e)return t;throw f.unexpectedCase()},ey=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1},ew=e=>{let t=[],r=e._start;for(;r;)t.push(r),r=r.right;console.log("Children: ",t),console.log("Children content: ",t.filter(e=>!e.deleted).map(e=>e.content))};class eb{constructor(e,t=e.getMap("users")){let r=new Map;this.yusers=t,this.doc=e,this.clients=new Map,this.dss=r;let n=(e,t)=>{let r=e.get("ds"),n=e.get("ids"),i=e=>this.clients.set(e,t);r.observe(e=>{e.changes.added.forEach(e=>{e.content.getContent().forEach(e=>{e instanceof Uint8Array&&this.dss.set(t,A([this.dss.get(t)||R(),O(new V(h.createDecoder(e)))]))})})}),this.dss.set(t,A(r.map(e=>O(new V(h.createDecoder(e)))))),n.observe(e=>e.changes.added.forEach(e=>e.content.getContent().forEach(i))),n.forEach(i)};t.observe(e=>{e.keysChanged.forEach(e=>n(t.get(e),e))}),t.forEach(n)}setUserMapping(e,t,r,{filter:n=()=>!0}={}){let i=this.yusers,s=i.get(r);s||((s=new t6).set("ids",new t8),s.set("ds",new t8),i.set(r,s)),s.get("ids").push([t]),i.observe(e=>{setTimeout(()=>{let e=i.get(r);if(e!==s){s=e,this.clients.forEach((e,t)=>{r===e&&s.get("ids").push([t])});let t=new G,n=this.dss.get(r);n&&(P(t,n),s.get("ds").push([t.toUint8Array()]))}},0)}),e.on("afterTransaction",e=>{setTimeout(()=>{let t=s.get("ds"),r=e.deleteSet;if(e.local&&r.clients.size>0&&n(e,r)){let e=new G;P(e,r),t.push([e.toUint8Array()])}})})}getUserByClientId(e){return this.clients.get(e)||null}getUserByDeletedId(e){for(let[t,r]of this.dss.entries())if(U(r,e))return t;return null}}class ex{constructor(e,t,r,n=0){this.type=e,this.tname=t,this.item=r,this.assoc=n}}let ev=e=>{let t={};return e.type&&(t.type=e.type),e.tname&&(t.tname=e.tname),e.item&&(t.item=e.item),null!=e.assoc&&(t.assoc=e.assoc),t},eC=e=>new ex(null==e.type?null:ep(e.type.client,e.type.clock),e.tname??null,null==e.item?null:ep(e.item.client,e.item.clock),null==e.assoc?0:e.assoc);class e_{constructor(e,t,r=0){this.type=e,this.index=t,this.assoc=r}}let eE=(e,t,r)=>{let n=null,i=null;return null===e._item?i=em(e):n=ep(e._item.id.client,e._item.id.clock),new ex(n,i,t,r)},eS=(e,t,r=0)=>{let n=e._start;if(r<0){if(0===t)return eE(e,null,r);t--}for(;null!==n;){if(!n.deleted&&n.countable){if(n.length>t)return eE(e,ep(n.id.client,n.id.clock+t),r);t-=n.length}if(null===n.right&&r<0)return eE(e,n.lastId,r);n=n.right}return eE(e,null,r)},eT=e=>{let t=c.createEncoder();return((e,t)=>{let{type:r,tname:n,item:i,assoc:s}=t;if(null!==i)c.writeVarUint(e,0),ef(e,i);else if(null!==n)c.writeUint8(e,1),c.writeVarString(e,n);else if(null!==r)c.writeUint8(e,2),ef(e,r);else throw f.unexpectedCase();return c.writeVarInt(e,s)})(t,e),c.toUint8Array(t)},ek=e=>(e=>{let t=null,r=null,n=null;switch(h.readVarUint(e)){case 0:n=eg(e);break;case 1:r=h.readVarString(e);break;case 2:t=eg(e)}return new ex(t,r,n,h.hasContent(e)?h.readVarInt(e):0)})(h.createDecoder(e)),eI=(e,t,r=!0)=>{let n=t.store,i=e.item,s=e.type,o=e.tname,a=e.assoc,l=null,c=0;if(null!==i){if(eG(n,i.client)<=i.clock)return null;let e=r?rF(n,i):((e,t)=>{let r=eq(e,t),n=t.clock-r.id.clock;return{item:r,diff:n}})(n,i),t=e.item;if(!(t instanceof rW))return null;if(null===(l=t.parent)._item||!l._item.deleted){c=t.deleted||!t.countable?0:e.diff+(a>=0?0:1);let r=t.left;for(;null!==r;)!r.deleted&&r.countable&&(c+=r.length),r=r.left}}else{if(null!==o)l=t.get(o);else if(null!==s){if(eG(n,s.client)<=s.clock)return null;let{item:e}=r?rF(n,s):{item:eq(n,s)};if(!(e instanceof rW)||!(e.content instanceof rL))return null;l=e.content.type}else throw f.unexpectedCase();c=a>=0?l._length:0}return((e,t,r=0)=>new e_(e,t,r))(l,c,e.assoc)},eU=(e,t)=>e===t||null!==e&&null!==t&&e.tname===t.tname&&ed(e.item,t.item)&&ed(e.type,t.type)&&e.assoc===t.assoc;class ej{constructor(e,t){this.ds=e,this.sv=t}}let eA=(e,t)=>{let r=e.ds.clients,n=t.ds.clients,i=e.sv,s=t.sv;if(i.size!==s.size||r.size!==n.size)return!1;for(let[e,t]of i.entries())if(s.get(e)!==t)return!1;for(let[e,t]of r.entries()){let r=n.get(e)||[];if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++){let n=t[e],i=r[e];if(n.clock!==i.clock||n.len!==i.len)return!1}}return!0},eD=(e,t=new H)=>(P(t,e.ds),ei(t,e.sv),t.toUint8Array()),eR=e=>eD(e,new G),eB=(e,t=new $(h.createDecoder(e)))=>new ej(O(t),er(t)),eP=e=>eB(e,new V(h.createDecoder(e))),eO=(e,t)=>new ej(e,t),eM=eO(R(),new Map),eL=e=>eO(B(e.store),eW(e.store)),eF=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!U(t.ds,e.id),eN=(e,t)=>{let r=l.setIfUndefined(e.meta,eN,y.create),n=e.doc.store;r.has(t)||(t.sv.forEach((t,r)=>{t<eG(n,r)&&eK(e,ep(r,t))}),I(e,t.ds,e=>{}),r.add(t))},eV=(e,t,r=new N)=>{if(e.gc)throw Error("Garbage-collection must be disabled in `originDoc`!");let{sv:n,ds:i}=t,s=new q;return e.transact(t=>{let r=0;for(let[i,o]of(n.forEach(e=>{e>0&&r++}),c.writeVarUint(s.restEncoder,r),n)){if(0===o)continue;o<eG(e.store,i)&&eK(t,ep(i,o));let r=e.store.clients.get(i)||[],n=eH(r,o-1);c.writeVarUint(s.restEncoder,n+1),s.writeClient(i),c.writeVarUint(s.restEncoder,0);for(let e=0;e<=n;e++)r[e].write(s,0)}P(s,i)}),Z(r,s.toUint8Array(),"snapshot"),r},ez=(e,t)=>((e,t,r=W)=>{let n=new r(h.createDecoder(t)),i=new tr(n,!1);for(let t=i.curr;null!==t;t=i.next())if((e.sv.get(t.id.client)||0)<t.id.clock+t.length)return!1;let s=A([e.ds,O(n)]);return L(e.ds,s)})(e,t,z);class e${constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}let eW=e=>{let t=new Map;return e.clients.forEach((e,r)=>{let n=e[e.length-1];t.set(r,n.id.clock+n.length)}),t},eG=(e,t)=>{let r=e.clients.get(t);if(void 0===r)return 0;let n=r[r.length-1];return n.id.clock+n.length},eJ=(e,t)=>{let r=e.clients.get(t.id.client);if(void 0===r)r=[],e.clients.set(t.id.client,r);else{let e=r[r.length-1];if(e.id.clock+e.length!==t.id.clock)throw f.unexpectedCase()}r.push(t)},eH=(e,t)=>{let r=0,n=e.length-1,i=e[n],s=i.id.clock;if(s===t)return n;let o=a.floor(t/(s+i.length-1)*n);for(;r<=n;){if((s=(i=e[o]).id.clock)<=t){if(t<s+i.length)return o;r=o+1}else n=o-1;o=a.floor((r+n)/2)}throw f.unexpectedCase()},eq=(e,t)=>{let r=e.clients.get(t.client);return r[eH(r,t.clock)]},eY=(e,t,r)=>{let n=eH(t,r),i=t[n];return i.id.clock<r&&i instanceof rW?(t.splice(n+1,0,rV(e,i,r-i.id.clock)),n+1):n},eK=(e,t)=>{let r=e.doc.store.clients.get(t.client);return r[eY(e,r,t.clock)]},eX=(e,t,r)=>{let n=t.clients.get(r.client),i=eH(n,r.clock),s=n[i];return r.clock!==s.id.clock+s.length-1&&s.constructor!==rb&&n.splice(i+1,0,rV(e,s,r.clock-s.id.clock+1)),s},eZ=(e,t,r,n,i)=>{let s;if(0===n)return;let o=r+n,a=eY(e,t,r);do o<(s=t[a++]).id.clock+s.length&&eY(e,t,o),i(s);while(a<t.length&&t[a].id.clock<o)};class eQ{constructor(e,t,r){this.doc=e,this.deleteSet=new k,this.beforeState=eW(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}let e0=(e,t)=>(0!==t.deleteSet.clients.size||!!l.any(t.afterState,(e,r)=>t.beforeState.get(r)!==e))&&(j(t.deleteSet),Y(e,t.doc.store,t.beforeState),P(e,t.deleteSet),!0),e1=(e,t,r)=>{let n=t._item;(null===n||n.id.clock<(e.beforeState.get(n.id.client)||0)&&!n.deleted)&&l.setIfUndefined(e.changed,t,y.create).add(r)},e2=(e,t)=>{let r=e[t],n=e[t-1],i=t;for(;i>0;r=n,n=e[--i-1]){if(n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)){r instanceof rW&&null!==r.parentSub&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n);continue}break}let s=t-i;return s&&e.splice(t+1-s,s),s},e8=(e,t,r)=>{for(let[n,i]of e.clients.entries()){let e=t.clients.get(n);for(let n=i.length-1;n>=0;n--){let s=i[n],o=s.clock+s.len;for(let n=eH(e,s.clock),i=e[n];n<e.length&&i.id.clock<o;i=e[++n]){let i=e[n];if(s.clock+s.len<=i.id.clock)break;i instanceof rW&&i.deleted&&!i.keep&&r(i)&&i.gc(t,!1)}}}},e3=(e,t)=>{e.clients.forEach((e,r)=>{let n=t.clients.get(r);for(let t=e.length-1;t>=0;t--){let r=e[t],i=a.min(n.length-1,1+eH(n,r.clock+r.len-1));for(let e=i,t=n[e];e>0&&t.id.clock>=r.clock;t=n[e])e-=1+e2(n,e)}})},e6=(e,t,r)=>{e8(e,t,r),e3(e,t)},e5=(e,t)=>{if(t<e.length){let r=e[t],n=r.doc,i=n.store,s=r.deleteSet,o=r._mergeStructs;try{j(s),r.afterState=eW(r.doc.store),n.emit("beforeObserverCalls",[r,n]);let e=[];r.changed.forEach((t,n)=>e.push(()=>{null!==n._item&&n._item.deleted||n._callObserver(r,t)})),e.push(()=>{r.changedParentTypes.forEach((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter(e=>null===e.target._item||!e.target._item.deleted)).forEach(e=>{e.currentTarget=t,e._path=null}),e.sort((e,t)=>e.path.length-t.path.length),eh(t._dEH,e,r))})}),e.push(()=>n.emit("afterTransaction",[r,n])),(0,m.callAll)(e,[]),r._needFormattingCleanup&&rl(r)}finally{n.gc&&e8(s,i,n.gcFilter),e3(s,i),r.afterState.forEach((e,t)=>{let n=r.beforeState.get(t)||0;if(n!==e){let e=i.clients.get(t),r=a.max(eH(e,n),1);for(let t=e.length-1;t>=r;)t-=1+e2(e,t)}});for(let e=o.length-1;e>=0;e--){let{client:t,clock:r}=o[e].id,n=i.clients.get(t),s=eH(n,r);!(s+1<n.length&&e2(n,s+1)>1)&&s>0&&e2(n,s)}if(r.local||r.afterState.get(n.clientID)===r.beforeState.get(n.clientID)||(w.print(w.ORANGE,w.BOLD,"[yjs] ",w.UNBOLD,w.RED,"Changed the client-id because another client seems to be using it."),n.clientID=F()),n.emit("afterTransactionCleanup",[r,n]),n._observers.has("update")){let e=new J;e0(e,r)&&n.emit("update",[e.toUint8Array(),r.origin,n,r])}if(n._observers.has("updateV2")){let e=new q;e0(e,r)&&n.emit("updateV2",[e.toUint8Array(),r.origin,n,r])}let{subdocsAdded:l,subdocsLoaded:c,subdocsRemoved:h}=r;(l.size>0||h.size>0||c.size>0)&&(l.forEach(e=>{e.clientID=n.clientID,null==e.collectionid&&(e.collectionid=n.collectionid),n.subdocs.add(e)}),h.forEach(e=>n.subdocs.delete(e)),n.emit("subdocs",[{loaded:c,added:l,removed:h},n,r]),h.forEach(e=>e.destroy())),e.length<=t+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,e])):e5(e,t+1)}}},e4=(e,t,r=null,n=!0)=>{let i=e._transactionCleanups,s=!1,o=null;null===e._transaction&&(s=!0,e._transaction=new eQ(e,r,n),i.push(e._transaction),1===i.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{o=t(e._transaction)}finally{if(s){let t=e._transaction===i[0];e._transaction=null,t&&e5(i,0)}}return o};class e9{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}let e7=(e,t,r)=>{I(e,r.deletions,r=>{r instanceof rW&&t.scope.some(t=>t===e.doc||ey(t,r))&&rN(r,!1)})},te=(e,t,r)=>{let n=null,i=e.doc,s=e.scope;e4(i,r=>{for(;t.length>0&&null===e.currStackItem;){let n=i.store,o=t.pop(),a=new Set,l=[],c=!1;I(r,o.insertions,e=>{if(e instanceof rW){if(null!==e.redone){let{item:t,diff:i}=rF(n,e.id);i>0&&(t=eK(r,ep(t.id.client,t.id.clock+i))),e=t}!e.deleted&&s.some(t=>t===r.doc||ey(t,e))&&l.push(e)}}),I(r,o.deletions,e=>{e instanceof rW&&s.some(t=>t===r.doc||ey(t,e))&&!U(o.insertions,e.id)&&a.add(e)}),a.forEach(t=>{c=null!==r$(r,t,a,o.insertions,e.ignoreRemoteMapChanges,e)||c});for(let t=l.length-1;t>=0;t--){let n=l[t];e.deleteFilter(n)&&(n.delete(r),c=!0)}e.currStackItem=c?o:null}r.changed.forEach((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)}),n=r},e);let o=e.currStackItem;if(null!=o){let t=n.changedParentTypes;e.emit("stack-item-popped",[{stackItem:o,type:r,changedParentTypes:t,origin:e},e]),e.currStackItem=null}return o};class tt extends s.ObservableV2{constructor(e,{captureTimeout:t=500,captureTransaction:r=e=>!0,deleteFilter:n=()=>!0,trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:s=!1,doc:a=o.isArray(e)?e[0].doc:e instanceof N?e:e.doc}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=n,i.add(this),this.trackedOrigins=i,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=s,this.captureTimeout=t,this.afterTransactionHandler=e=>{if(!this.captureTransaction(e)||!this.scope.some(t=>e.changedParentTypes.has(t)||t===this.doc)||!this.trackedOrigins.has(e.origin)&&(!e.origin||!this.trackedOrigins.has(e.origin.constructor)))return;let t=this.undoing,r=this.redoing,n=t?this.redoStack:this.undoStack;t?this.stopCapturing():r||this.clear(!1,!0);let i=new k;e.afterState.forEach((t,r)=>{let n=e.beforeState.get(r)||0,s=t-n;s>0&&D(i,r,n,s)});let s=b.getUnixTime(),o=!1;if(this.lastChange>0&&s-this.lastChange<this.captureTimeout&&n.length>0&&!t&&!r){let t=n[n.length-1];t.deletions=A([t.deletions,e.deleteSet]),t.insertions=A([t.insertions,i])}else n.push(new e9(e.deleteSet,i)),o=!0;t||r||(this.lastChange=s),I(e,e.deleteSet,t=>{t instanceof rW&&this.scope.some(r=>r===e.doc||ey(r,t))&&rN(t,!0)});let a=[{stackItem:n[n.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},this];o?this.emit("stack-item-added",a):this.emit("stack-item-updated",a)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){let t=new Set(this.scope);(e=o.isArray(e)?e:[e]).forEach(e=>{t.has(e)||(t.add(e),(e instanceof tM?e.doc!==this.doc:e!==this.doc)&&w.warn("[yjs#509] Not same Y.Doc"),this.scope.push(e))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(e=>e7(r,this,e)),this.undoStack=[]),t&&(this.redoStack.forEach(e=>e7(r,this,e)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])})}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=te(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=te(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}class tr{constructor(e,t){this.gen=function*(e){let t=h.readVarUint(e.restDecoder);for(let r=0;r<t;r++){let t=h.readVarUint(e.restDecoder),r=e.readClient(),n=h.readVarUint(e.restDecoder);for(let i=0;i<t;i++){let t=e.readInfo();if(10===t){let t=h.readVarUint(e.restDecoder);yield new rH(ep(r,n),t),n+=t}else if((g.BITS5&t)!=0){let i=(t&(g.BIT7|g.BIT8))==0,s=new rW(ep(r,n),null,(t&g.BIT8)===g.BIT8?e.readLeftID():null,null,(t&g.BIT7)===g.BIT7?e.readRightID():null,i?e.readParentInfo()?e.readString():e.readLeftID():null,i&&(t&g.BIT6)===g.BIT6?e.readString():null,rG(e,t));yield s,n+=s.length}else{let t=e.readLen();yield new rb(ep(r,n),t),n+=t}}}}(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&null!==this.curr&&this.curr.constructor===rH)return this.curr}}let tn=e=>ti(e,z),ti=(e,t=W)=>{let r=[],n=new t(h.createDecoder(e)),i=new tr(n,!1);for(let e=i.curr;null!==e;e=i.next())r.push(e);w.print("Structs: ",r);let s=O(n);w.print("DeleteSet: ",s)},ts=e=>to(e,z),to=(e,t=W)=>{let r=[],n=new t(h.createDecoder(e)),i=new tr(n,!1);for(let e=i.curr;null!==e;e=i.next())r.push(e);return{structs:r,ds:O(n)}};class ta{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}let tl=e=>tf(e,z,J),tc=(e,t=H,r=W)=>{let n=new t,i=new tr(new r(h.createDecoder(e)),!1),s=i.curr;if(null===s)return c.writeVarUint(n.restEncoder,0),n.toUint8Array();{let e=0,t=s.id.client,r=0!==s.id.clock,o=r?0:s.id.clock+s.length;for(;null!==s;s=i.next())t!==s.id.client&&(0!==o&&(e++,c.writeVarUint(n.restEncoder,t),c.writeVarUint(n.restEncoder,o)),t=s.id.client,o=0,r=0!==s.id.clock),s.constructor===rH&&(r=!0),r||(o=s.id.clock+s.length);0!==o&&(e++,c.writeVarUint(n.restEncoder,t),c.writeVarUint(n.restEncoder,o));let a=c.createEncoder();return c.writeVarUint(a,e),c.writeBinaryEncoder(a,n.restEncoder),n.restEncoder=a,n.toUint8Array()}},th=e=>tc(e,G,z),tu=(e,t=W)=>{let r=new Map,n=new Map,i=new tr(new t(h.createDecoder(e)),!1),s=i.curr;if(null!==s){let e=s.id.client,t=s.id.clock;for(r.set(e,t);null!==s;s=i.next())e!==s.id.client&&(n.set(e,t),r.set(s.id.client,s.id.clock),e=s.id.client),t=s.id.clock+s.length;n.set(e,t)}return{from:r,to:n}},td=e=>tu(e,z),tp=(e,t)=>{if(e.constructor===rb){let{client:r,clock:n}=e.id;return new rb(ep(r,n+t),e.length-t)}if(e.constructor===rH){let{client:r,clock:n}=e.id;return new rH(ep(r,n+t),e.length-t)}{let{client:r,clock:n}=e.id;return new rW(ep(r,n+t),null,ep(r,n+t-1),null,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t))}},tf=(e,t=W,r=q)=>{if(1===e.length)return e[0];let n=e.map(e=>new t(h.createDecoder(e))),i=n.map(e=>new tr(e,!0)),s=null,o=new r,a=new ta(o);for(;(i=i.filter(e=>null!==e.curr)).sort((e,t)=>{if(e.curr.id.client!==t.curr.id.client)return t.curr.id.client-e.curr.id.client;{let r=e.curr.id.clock-t.curr.id.clock;return 0===r?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===rH?1:-1:r}}),0!==i.length;){let e=i[0],t=e.curr.id.client;if(null!==s){let r=e.curr,n=!1;for(;null!==r&&r.id.clock+r.length<=s.struct.id.clock+s.struct.length&&r.id.client>=s.struct.id.client;)r=e.next(),n=!0;if(null===r||r.id.client!==t||n&&r.id.clock>s.struct.id.clock+s.struct.length)continue;if(t!==s.struct.id.client)tw(a,s.struct,s.offset),s={struct:r,offset:0},e.next();else if(s.struct.id.clock+s.struct.length<r.id.clock)if(s.struct.constructor===rH)s.struct.length=r.id.clock+r.length-s.struct.id.clock;else{tw(a,s.struct,s.offset);let e=r.id.clock-s.struct.id.clock-s.struct.length;s={struct:new rH(ep(t,s.struct.id.clock+s.struct.length),e),offset:0}}else{let t=s.struct.id.clock+s.struct.length-r.id.clock;t>0&&(s.struct.constructor===rH?s.struct.length-=t:r=tp(r,t)),s.struct.mergeWith(r)||(tw(a,s.struct,s.offset),s={struct:r,offset:0},e.next())}}else s={struct:e.curr,offset:0},e.next();for(let r=e.curr;null!==r&&r.id.client===t&&r.id.clock===s.struct.id.clock+s.struct.length&&r.constructor!==rH;r=e.next())tw(a,s.struct,s.offset),s={struct:r,offset:0}}return null!==s&&(tw(a,s.struct,s.offset),s=null),tb(a),P(o,A(n.map(e=>O(e)))),o.toUint8Array()},tg=(e,t,r=W,n=q)=>{let i=en(t),s=new n,o=new ta(s),l=new r(h.createDecoder(e)),c=new tr(l,!1);for(;c.curr;){let e=c.curr,t=e.id.client,r=i.get(t)||0;if(c.curr.constructor===rH){c.next();continue}if(e.id.clock+e.length>r)for(tw(o,e,a.max(r-e.id.clock,0)),c.next();c.curr&&c.curr.id.client===t;)tw(o,c.curr,0),c.next();else for(;c.curr&&c.curr.id.client===t&&c.curr.id.clock+c.curr.length<=r;)c.next()}return tb(o),P(s,O(l)),s.toUint8Array()},tm=(e,t)=>tg(e,t,z,J),ty=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:c.toUint8Array(e.encoder.restEncoder)}),e.encoder.restEncoder=c.createEncoder(),e.written=0)},tw=(e,t,r)=>{e.written>0&&e.currClient!==t.id.client&&ty(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),c.writeVarUint(e.encoder.restEncoder,t.id.clock+r)),t.write(e.encoder,r),e.written++},tb=e=>{ty(e);let t=e.encoder.restEncoder;c.writeVarUint(t,e.clientStructs.length);for(let r=0;r<e.clientStructs.length;r++){let n=e.clientStructs[r];c.writeVarUint(t,n.written),c.writeUint8Array(t,n.restEncoder)}},tx=(e,t,r,n)=>{let i=new r(h.createDecoder(e)),s=new tr(i,!1),o=new n,a=new ta(o);for(let e=s.curr;null!==e;e=s.next())tw(a,t(e),0);return tb(a),P(o,O(i)),o.toUint8Array()},tv=({formatting:e=!0,subdocs:t=!0,yxml:r=!0}={})=>{let n=0,i=l.create(),s=l.create(),o=l.create(),a=l.create();return a.set(null,null),c=>{switch(c.constructor){case rb:case rH:return c;case rW:{let h=c.content;switch(h.constructor){case rv:break;case rL:if(r){let e=h.type;e instanceof rf&&(e.nodeName=l.setIfUndefined(s,e.nodeName,()=>"node-"+n)),e instanceof rm&&(e.hookName=l.setIfUndefined(s,e.hookName,()=>"hook-"+n))}break;case rI:h.arr=h.arr.map(()=>n);break;case rx:h.content=new Uint8Array([n]);break;case r_:t&&(h.opts={},h.doc.guid=n+"");break;case rE:h.embed={};break;case rS:e&&(h.key=l.setIfUndefined(o,h.key,()=>n+""),h.value=l.setIfUndefined(a,h.value,()=>({i:n})));break;case rT:h.arr=h.arr.map(()=>n);break;case rU:h.str=x.repeat(n%10+"",h.str.length);break;default:f.unexpectedCase()}return c.parentSub&&(c.parentSub=l.setIfUndefined(i,c.parentSub,()=>n+"")),n++,c}default:f.unexpectedCase()}}},tC=(e,t)=>tx(e,tv(t),z,J),t_=(e,t)=>tx(e,tv(t),W,q),tE=e=>tx(e,m.id,z,q),tS=e=>tx(e,m.id,W,J),tT="You must not compute changes after the event-handler fired.";class tk{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=tI(this.currentTarget,this.target))}deletes(e){return U(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw f.create(tT);let e=new Map,t=this.target;this.transaction.changed.get(t).forEach(r=>{if(null!==r){let n,i,s=t._map.get(r);if(this.adds(s)){let e=s.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(s))if(!(null!==e&&this.deletes(e)))return;else n="delete",i=o.last(e.content.getContent());else null!==e&&this.deletes(e)?(n="update",i=o.last(e.content.getContent())):(n="add",i=void 0)}else{if(!this.deletes(s))return;n="delete",i=o.last(s.content.getContent())}e.set(r,{action:n,oldValue:i})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw f.create(tT);let t=this.target,r=y.create(),n=y.create(),i=[];if(e={added:r,deleted:n,delta:i,keys:this.keys},this.transaction.changed.get(t).has(null)){let e=null,s=()=>{e&&i.push(e)};for(let i=t._start;null!==i;i=i.right)i.deleted?this.deletes(i)&&!this.adds(i)&&((null===e||void 0===e.delete)&&(s(),e={delete:0}),e.delete+=i.length,n.add(i)):this.adds(i)?((null===e||void 0===e.insert)&&(s(),e={insert:[]}),e.insert=e.insert.concat(i.content.getContent()),r.add(i)):((null===e||void 0===e.retain)&&(s(),e={retain:0}),e.retain+=i.length);null!==e&&void 0===e.retain&&s()}this._changes=e}return e}}let tI=(e,t)=>{let r=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)r.unshift(t._item.parentSub);else{let e=0,n=t._item.parent._start;for(;n!==t._item&&null!==n;)!n.deleted&&n.countable&&(e+=n.length),n=n.right;r.unshift(e)}t=t._item.parent}return r},tU=()=>{w.warn("Invalid access: Add Yjs type to a document before reading data.")},tj=0;class tA{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=tj++}}let tD=(e,t,r)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=r,e.timestamp=tj++},tR=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;let r=0===e._searchMarker.length?null:e._searchMarker.reduce((e,r)=>a.abs(t-e.index)<a.abs(t-r.index)?e:r),n=e._start,i=0;for(null!==r&&(n=r.p,i=r.index,r.timestamp=tj++);null!==n.right&&i<t;){if(!n.deleted&&n.countable){if(t<i+n.length)break;i+=n.length}n=n.right}for(;null!==n.left&&i>t;)!(n=n.left).deleted&&n.countable&&(i-=n.length);for(;null!==n.left&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)!(n=n.left).deleted&&n.countable&&(i-=n.length);if(null!==r&&a.abs(r.index-i)<n.parent.length/80)return tD(r,n,i),r;var s=e._searchMarker,o=n,l=i;if(s.length>=80){let e=s.reduce((e,t)=>e.timestamp<t.timestamp?e:t);return tD(e,o,l),e}{let e=new tA(o,l);return s.push(e),e}},tB=(e,t,r)=>{for(let n=e.length-1;n>=0;n--){let i=e[n];if(r>0){let t=i.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)(t=t.left)&&!t.deleted&&t.countable&&(i.index-=t.length);if(null===t||!0===t.marker){e.splice(n,1);continue}i.p=t,t.marker=!0}(t<i.index||r>0&&t===i.index)&&(i.index=a.max(t,i.index+r))}},tP=e=>{e.doc??tU();let t=e._start,r=[];for(;t;)r.push(t),t=t.right;return r},tO=(e,t,r)=>{let n=e,i=t.changedParentTypes;for(;l.setIfUndefined(i,e,()=>[]).push(r),null!==e._item;)e=e._item.parent;eh(n._eH,r,t)};class tM{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=ea(),this._dEH=ea(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw f.methodUnimplemented()}clone(){throw f.methodUnimplemented()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){el(this._eH,e)}observeDeep(e){el(this._dEH,e)}unobserve(e){ec(this._eH,e)}unobserveDeep(e){ec(this._dEH,e)}toJSON(){}}let tL=(e,t,r)=>{e.doc??tU(),t<0&&(t=e._length+t),r<0&&(r=e._length+r);let n=r-t,i=[],s=e._start;for(;null!==s&&n>0;){if(s.countable&&!s.deleted){let e=s.content.getContent();if(e.length<=t)t-=e.length;else{for(let r=t;r<e.length&&n>0;r++)i.push(e[r]),n--;t=0}}s=s.right}return i},tF=e=>{e.doc??tU();let t=[],r=e._start;for(;null!==r;){if(r.countable&&!r.deleted){let e=r.content.getContent();for(let r=0;r<e.length;r++)t.push(e[r])}r=r.right}return t},tN=(e,t)=>{let r=[],n=e._start;for(;null!==n;){if(n.countable&&eF(n,t)){let e=n.content.getContent();for(let t=0;t<e.length;t++)r.push(e[t])}n=n.right}return r},tV=(e,t)=>{let r=0,n=e._start;for(e.doc??tU();null!==n;){if(n.countable&&!n.deleted){let i=n.content.getContent();for(let n=0;n<i.length;n++)t(i[n],r++,e)}n=n.right}},tz=(e,t)=>{let r=[];return tV(e,(n,i)=>{r.push(t(n,i,e))}),r},t$=(e,t)=>{e.doc??tU();let r=tR(e,t),n=e._start;for(null!==r&&(n=r.p,t-=r.index);null!==n;n=n.right)if(!n.deleted&&n.countable){if(t<n.length)return n.content.getContent()[t];t-=n.length}},tW=(e,t,r,n)=>{let i=r,s=e.doc,o=s.clientID,a=s.store,l=null===r?t._start:r.right,c=[],h=()=>{c.length>0&&((i=new rW(ep(o,eG(a,o)),i,i&&i.lastId,l,l&&l.id,t,null,new rI(c))).integrate(e,0),c=[])};n.forEach(r=>{if(null===r)c.push(r);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(r);break;default:switch(h(),r.constructor){case Uint8Array:case ArrayBuffer:(i=new rW(ep(o,eG(a,o)),i,i&&i.lastId,l,l&&l.id,t,null,new rx(new Uint8Array(r)))).integrate(e,0);break;case N:(i=new rW(ep(o,eG(a,o)),i,i&&i.lastId,l,l&&l.id,t,null,new r_(r))).integrate(e,0);break;default:if(r instanceof tM)(i=new rW(ep(o,eG(a,o)),i,i&&i.lastId,l,l&&l.id,t,null,new rL(r))).integrate(e,0);else throw Error("Unexpected content type in insert operation")}}}),h()},tG=()=>f.create("Length exceeded!"),tJ=(e,t,r,n)=>{if(r>t._length)throw tG();if(0===r)return t._searchMarker&&tB(t._searchMarker,r,n.length),tW(e,t,null,n);let i=r,s=tR(t,r),o=t._start;for(null!==s&&(o=s.p,0==(r-=s.index)&&(r+=(o=o.prev)&&o.countable&&!o.deleted?o.length:0));null!==o;o=o.right)if(!o.deleted&&o.countable){if(r<=o.length){r<o.length&&eK(e,ep(o.id.client,o.id.clock+r));break}r-=o.length}return t._searchMarker&&tB(t._searchMarker,i,n.length),tW(e,t,o,n)},tH=(e,t,r,n)=>{if(0===n)return;let i=r,s=n,o=tR(t,r),a=t._start;for(null!==o&&(a=o.p,r-=o.index);null!==a&&r>0;a=a.right)!a.deleted&&a.countable&&(r<a.length&&eK(e,ep(a.id.client,a.id.clock+r)),r-=a.length);for(;n>0&&null!==a;)a.deleted||(n<a.length&&eK(e,ep(a.id.client,a.id.clock+n)),a.delete(e),n-=a.length),a=a.right;if(n>0)throw tG();t._searchMarker&&tB(t._searchMarker,i,-s+n)},tq=(e,t,r)=>{let n=t._map.get(r);void 0!==n&&n.delete(e)},tY=(e,t,r,n)=>{let i,s=t._map.get(r)||null,o=e.doc,a=o.clientID;if(null==n)i=new rI([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:i=new rI([n]);break;case Uint8Array:i=new rx(n);break;case N:i=new r_(n);break;default:if(n instanceof tM)i=new rL(n);else throw Error("Unexpected content type")}new rW(ep(a,eG(o.store,a)),s,s&&s.lastId,null,null,t,r,i).integrate(e,0)},tK=(e,t)=>{e.doc??tU();let r=e._map.get(t);return void 0===r||r.deleted?void 0:r.content.getContent()[r.length-1]},tX=e=>{let t={};return e.doc??tU(),e._map.forEach((e,r)=>{e.deleted||(t[r]=e.content.getContent()[e.length-1])}),t},tZ=(e,t)=>{e.doc??tU();let r=e._map.get(t);return void 0!==r&&!r.deleted},tQ=(e,t,r)=>{let n=e._map.get(t)||null;for(;null!==n&&(!r.sv.has(n.id.client)||n.id.clock>=(r.sv.get(n.id.client)||0));)n=n.left;return null!==n&&eF(n,r)?n.content.getContent()[n.length-1]:void 0},t0=(e,t)=>{let r={};return e._map.forEach((e,n)=>{let i=e;for(;null!==i&&(!t.sv.has(i.id.client)||i.id.clock>=(t.sv.get(i.id.client)||0));)i=i.left;null!==i&&eF(i,t)&&(r[n]=i.content.getContent()[i.length-1])}),r},t1=e=>(e.doc??tU(),v.iteratorFilter(e._map.entries(),e=>!e[1].deleted));class t2 extends tk{}class t8 extends tM{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){let t=new t8;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new t8}clone(){let e=new t8;return e.insert(0,this.toArray().map(e=>e instanceof tM?e.clone():e)),e}get length(){return this.doc??tU(),this._length}_callObserver(e,t){super._callObserver(e,t),tO(this,e,new t2(this,e))}insert(e,t){null!==this.doc?e4(this.doc,r=>{tJ(r,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?e4(this.doc,t=>{((e,t,r)=>{let n=(t._searchMarker||[]).reduce((e,t)=>t.index>e.index?t:e,{index:0,p:t._start}).p;if(n)for(;n.right;)n=n.right;return tW(e,t,n,r)})(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?e4(this.doc,r=>{tH(r,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return t$(this,e)}toArray(){return tF(this)}slice(e=0,t=this.length){return tL(this,e,t)}toJSON(){return this.map(e=>e instanceof tM?e.toJSON():e)}map(e){return tz(this,e)}forEach(e){tV(this,e)}[Symbol.iterator](){let e,t,r;return e=this._start,t=null,r=0,{[Symbol.iterator](){return this},next:()=>{if(null===t){for(;null!==e&&e.deleted;)e=e.right;if(null===e)return{done:!0,value:void 0};t=e.content.getContent(),r=0,e=e.right}let n=t[r++];return t.length<=r&&(t=null),{done:!1,value:n}}}}_write(e){e.writeTypeRef(rA)}}class t3 extends tk{constructor(e,t,r){super(e,t),this.keysChanged=r}}class t6 extends tM{constructor(e){super(),this._prelimContent=null,void 0===e?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((e,t)=>{this.set(t,e)}),this._prelimContent=null}_copy(){return new t6}clone(){let e=new t6;return this.forEach((t,r)=>{e.set(r,t instanceof tM?t.clone():t)}),e}_callObserver(e,t){tO(this,e,new t3(this,e,t))}toJSON(){this.doc??tU();let e={};return this._map.forEach((t,r)=>{if(!t.deleted){let n=t.content.getContent()[t.length-1];e[r]=n instanceof tM?n.toJSON():n}}),e}get size(){return[...t1(this)].length}keys(){return v.iteratorMap(t1(this),e=>e[0])}values(){return v.iteratorMap(t1(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return v.iteratorMap(t1(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??tU(),this._map.forEach((t,r)=>{t.deleted||e(t.content.getContent()[t.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?e4(this.doc,t=>{tq(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?e4(this.doc,r=>{tY(r,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return tK(this,e)}has(e){return tZ(this,e)}clear(){null!==this.doc?e4(this.doc,e=>{this.forEach(function(t,r,n){tq(e,n,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(rD)}}let t5=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&C.equalFlat(e,t);class t4{constructor(e,t,r,n){this.left=e,this.right=t,this.index=r,this.currentAttributes=n}forward(){null===this.right&&f.unexpectedCase(),this.right.content.constructor===rS?this.right.deleted||rt(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}}let t9=(e,t,r)=>{for(;null!==t.right&&r>0;)t.right.content.constructor===rS?t.right.deleted||rt(t.currentAttributes,t.right.content):t.right.deleted||(r<t.right.length&&eK(e,ep(t.right.id.client,t.right.id.clock+r)),t.index+=t.right.length,r-=t.right.length),t.left=t.right,t.right=t.right.right;return t},t7=(e,t,r,n)=>{let i=new Map,s=n?tR(t,r):null;return s?t9(e,new t4(s.p.left,s.p,s.index,i),r-s.index):t9(e,new t4(null,t._start,0,i),r)},re=(e,t,r,n)=>{for(;null!==r.right&&(!0===r.right.deleted||r.right.content.constructor===rS&&t5(n.get(r.right.content.key),r.right.content.value));)r.right.deleted||n.delete(r.right.content.key),r.forward();let i=e.doc,s=i.clientID;n.forEach((n,o)=>{let a=r.left,l=r.right,c=new rW(ep(s,eG(i.store,s)),a,a&&a.lastId,l,l&&l.id,t,null,new rS(o,n));c.integrate(e,0),r.right=c,r.forward()})},rt=(e,t)=>{let{key:r,value:n}=t;null===n?e.delete(r):e.set(r,n)},rr=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===rS&&t5(t[e.right.content.key]??null,e.right.content.value));){;e.forward()}},rn=(e,t,r,n)=>{let i=e.doc,s=i.clientID,o=new Map;for(let a in n){let l=n[a],c=r.currentAttributes.get(a)??null;if(!t5(c,l)){o.set(a,c);let{left:n,right:h}=r;r.right=new rW(ep(s,eG(i.store,s)),n,n&&n.lastId,h,h&&h.id,t,null,new rS(a,l)),r.right.integrate(e,0),r.forward()}}return o},ri=(e,t,r,n,i)=>{r.currentAttributes.forEach((e,t)=>{void 0===i[t]&&(i[t]=null)});let s=e.doc,o=s.clientID;rr(r,i);let a=rn(e,t,r,i),l=n.constructor===String?new rU(n):n instanceof tM?new rL(n):new rE(n),{left:c,right:h,index:u}=r;t._searchMarker&&tB(t._searchMarker,r.index,l.getLength()),(h=new rW(ep(o,eG(s.store,o)),c,c&&c.lastId,h,h&&h.id,t,null,l)).integrate(e,0),r.right=h,r.index=u,r.forward(),re(e,t,r,a)},rs=(e,t,r,n,i)=>{let s=e.doc,o=s.clientID;rr(r,i);let a=rn(e,t,r,i);for(;null!==r.right&&(n>0||a.size>0&&(r.right.deleted||r.right.content.constructor===rS));){if(!r.right.deleted)if(r.right.content.constructor===rS){let{key:t,value:s}=r.right.content,o=i[t];if(void 0!==o){if(t5(o,s))a.delete(t);else{if(0===n)break;a.set(t,s)}r.right.delete(e)}else r.currentAttributes.set(t,s)}else n<r.right.length&&eK(e,ep(r.right.id.client,r.right.id.clock+n)),n-=r.right.length;r.forward()}if(n>0){let i="";for(;n>0;n--)i+="\n";r.right=new rW(ep(o,eG(s.store,o)),r.left,r.left&&r.left.lastId,r.right,r.right&&r.right.id,t,null,new rU(i)),r.right.integrate(e,0),r.forward()}re(e,t,r,a)},ro=(e,t,r,n,i)=>{let s=t,o=l.create();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===rS){let e=s.content;o.set(e.key,e)}s=s.right}let a=0,c=!1;for(;t!==s;){if(r===t&&(c=!0),!t.deleted){let r=t.content;if(r.constructor===rS){let{key:s,value:l}=r,h=n.get(s)??null;(o.get(s)!==r||h===l)&&(t.delete(e),a++,c||(i.get(s)??null)!==l||h===l||(null===h?i.delete(s):i.set(s,h))),c||t.deleted||rt(i,r)}}t=t.right}return a},ra=e=>{let t=0;return e4(e.doc,r=>{let n=e._start,i=e._start,s=l.create(),o=l.copy(s);for(;i;)!1===i.deleted&&(i.content.constructor===rS?rt(o,i.content):(t+=ro(r,n,i,s,o),s=l.copy(o),n=i)),i=i.right}),t},rl=e=>{let t=new Set,r=e.doc;for(let[n,i]of e.afterState.entries()){let s=e.beforeState.get(n)||0;i!==s&&eZ(e,r.store.clients.get(n),s,i,e=>{e.deleted||e.content.constructor!==rS||e.constructor===rb||t.add(e.parent)})}e4(r,r=>{for(let n of(I(e,e.deleteSet,e=>{if(e instanceof rb||!e.parent._hasFormatting||t.has(e.parent))return;let n=e.parent;if(e.content.constructor===rS)t.add(n);else{for(var i=e;i&&i.right&&(i.right.deleted||!i.right.countable);)i=i.right;let t=new Set;for(;i&&(i.deleted||!i.countable);){if(!i.deleted&&i.content.constructor===rS){let e=i.content.key;t.has(e)?i.delete(r):t.add(e)}i=i.left}}}),t))ra(n)})},rc=(e,t,r)=>{let n=r,i=l.copy(t.currentAttributes),s=t.right;for(;r>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case rL:case rE:case rU:r<t.right.length&&eK(e,ep(t.right.id.client,t.right.id.clock+r)),r-=t.right.length,t.right.delete(e)}t.forward()}s&&ro(e,s,t.right,i,t.currentAttributes);let o=(t.left||t.right).parent;return o._searchMarker&&tB(o._searchMarker,t.index,-n+r),t};class rh extends tk{constructor(e,t,r){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)})}get changes(){if(null===this._changes){let e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){let e=this.target.doc,t=[];e4(e,e=>{let r=new Map,n=new Map,i=this.target._start,s=null,o={},a="",l=0,c=0,h=()=>{if(null!==s){let e=null;switch(s){case"delete":c>0&&(e={delete:c}),c=0;break;case"insert":("object"==typeof a||a.length>0)&&(e={insert:a},r.size>0&&(e.attributes={},r.forEach((t,r)=>{null!==t&&(e.attributes[r]=t)}))),a="";break;case"retain":l>0&&(e={retain:l},C.isEmpty(o)||(e.attributes=C.assign({},o))),l=0}e&&t.push(e),s=null}};for(;null!==i;){switch(i.content.constructor){case rL:case rE:this.adds(i)?this.deletes(i)||(h(),s="insert",a=i.content.getContent()[0],h()):this.deletes(i)?("delete"!==s&&(h(),s="delete"),c+=1):i.deleted||("retain"!==s&&(h(),s="retain"),l+=1);break;case rU:this.adds(i)?this.deletes(i)||("insert"!==s&&(h(),s="insert"),a+=i.content.str):this.deletes(i)?("delete"!==s&&(h(),s="delete"),c+=i.length):i.deleted||("retain"!==s&&(h(),s="retain"),l+=i.length);break;case rS:{let{key:t,value:a}=i.content;if(this.adds(i))this.deletes(i)||(t5(r.get(t)??null,a)?null!==a&&i.delete(e):("retain"===s&&h(),t5(a,n.get(t)??null)?delete o[t]:o[t]=a));else if(this.deletes(i)){n.set(t,a);let e=r.get(t)??null;t5(e,a)||("retain"===s&&h(),o[t]=e)}else if(!i.deleted){n.set(t,a);let r=o[t];void 0!==r&&(t5(r,a)?null!==r&&i.delete(e):("retain"===s&&h(),null===a?delete o[t]:o[t]=a))}i.deleted||("insert"===s&&h(),rt(r,i.content))}}i=i.right}for(h();t.length>0;){let e=t[t.length-1];if(void 0!==e.retain&&void 0===e.attributes)t.pop();else break}}),this._delta=t}return this._delta}}class ru extends tM{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??tU(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(e=>e())}catch(e){console.error(e)}this._pending=null}_copy(){return new ru}clone(){let e=new ru;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);let r=new rh(this,e,t);tO(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??tU();let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===rU&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?e4(this.doc,r=>{let n=new t4(null,this._start,0,new Map);for(let i=0;i<e.length;i++){let s=e[i];if(void 0!==s.insert){let o=t||"string"!=typeof s.insert||i!==e.length-1||null!==n.right||"\n"!==s.insert.slice(-1)?s.insert:s.insert.slice(0,-1);("string"!=typeof o||o.length>0)&&ri(r,this,n,o,s.attributes||{})}else void 0!==s.retain?rs(r,this,n,s.retain,s.attributes||{}):void 0!==s.delete&&rc(r,n,s.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,r){this.doc??tU();let n=[],i=new Map,s=this.doc,o="",a=this._start;function l(){if(o.length>0){let e={},t=!1;i.forEach((r,n)=>{t=!0,e[n]=r});let r={insert:o};t&&(r.attributes=e),n.push(r),o=""}}let c=()=>{for(;null!==a;){if(eF(a,e)||void 0!==t&&eF(a,t))switch(a.content.constructor){case rU:{let n=i.get("ychange");void 0===e||eF(a,e)?void 0===t||eF(a,t)?void 0!==n&&(l(),i.delete("ychange")):(void 0===n||n.user!==a.id.client||"added"!==n.type)&&(l(),i.set("ychange",r?r("added",a.id):{type:"added"})):(void 0===n||n.user!==a.id.client||"removed"!==n.type)&&(l(),i.set("ychange",r?r("removed",a.id):{type:"removed"})),o+=a.content.str;break}case rL:case rE:{l();let e={insert:a.content.getContent()[0]};if(i.size>0){let t={};e.attributes=t,i.forEach((e,r)=>{t[r]=e})}n.push(e);break}case rS:eF(a,e)&&(l(),rt(i,a.content))}a=a.right}l()};return e||t?e4(s,r=>{e&&eN(r,e),t&&eN(r,t),c()},"cleanup"):c(),n}insert(e,t,r){if(t.length<=0)return;let n=this.doc;null!==n?e4(n,n=>{let i=t7(n,this,e,!r);r||(r={},i.currentAttributes.forEach((e,t)=>{r[t]=e})),ri(n,this,i,t,r)}):this._pending.push(()=>this.insert(e,t,r))}insertEmbed(e,t,r){let n=this.doc;null!==n?e4(n,n=>{let i=t7(n,this,e,!r);ri(n,this,i,t,r||{})}):this._pending.push(()=>this.insertEmbed(e,t,r||{}))}delete(e,t){if(0===t)return;let r=this.doc;null!==r?e4(r,r=>{rc(r,t7(r,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,r){if(0===t)return;let n=this.doc;null!==n?e4(n,n=>{let i=t7(n,this,e,!1);null!==i.right&&rs(n,this,i,t,r)}):this._pending.push(()=>this.format(e,t,r))}removeAttribute(e){null!==this.doc?e4(this.doc,t=>{tq(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){null!==this.doc?e4(this.doc,r=>{tY(r,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return tK(this,e)}getAttributes(){return tX(this)}_write(e){e.writeTypeRef(rR)}}class rd{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??tU()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do if(t=e.content.type,e.deleted||t.constructor!==rf&&t.constructor!==rp||null===t._start)for(;null!==e;){let t=e.next;if(null!==t){e=t;break}e=e.parent===this._root?null:e.parent._item}else e=t._start;while(null!==e&&(e.deleted||!this._filter(e.content.type)))return(this._firstCall=!1,null===e)?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class rp extends tM{constructor(){super(),this._prelimContent=[]}get firstChild(){let e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new rp}clone(){let e=new rp;return e.insert(0,this.toArray().map(e=>e instanceof tM?e.clone():e)),e}get length(){return this.doc??tU(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new rd(this,e)}querySelector(e){e=e.toUpperCase();let t=new rd(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),o.from(new rd(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){tO(this,e,new rg(this,t,e))}toString(){return tz(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},r){let n=e.createDocumentFragment();return void 0!==r&&r._createAssociation(n,this),tV(this,i=>{n.insertBefore(i.toDOM(e,t,r),null)}),n}insert(e,t){null!==this.doc?e4(this.doc,r=>{tJ(r,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)e4(this.doc,r=>{tW(r,this,e&&e instanceof tM?e._item:e,t)});else{let r=this._prelimContent,n=null===e?0:r.findIndex(t=>t===e)+1;if(0===n&&null!==e)throw f.create("Reference item not found");r.splice(n,0,...t)}}delete(e,t=1){null!==this.doc?e4(this.doc,r=>{tH(r,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return tF(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return t$(this,e)}slice(e=0,t=this.length){return tL(this,e,t)}forEach(e){tV(this,e)}_write(e){e.writeTypeRef(rP)}}class rf extends rp{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((e,t)=>{this.setAttribute(t,e)}),this._prelimAttrs=null}_copy(){return new rf(this.nodeName)}clone(){let e=new rf(this.nodeName),t=this.getAttributes();return C.forEach(t,(t,r)=>{"string"==typeof t&&e.setAttribute(r,t)}),e.insert(0,this.toArray().map(e=>e instanceof tM?e.clone():e)),e}toString(){let e=this.getAttributes(),t=[],r=[];for(let t in e)r.push(t);r.sort();let n=r.length;for(let i=0;i<n;i++){let n=r[i];t.push(n+'="'+e[n]+'"')}let i=this.nodeName.toLocaleLowerCase(),s=t.length>0?" "+t.join(" "):"";return`<${i}${s}>${super.toString()}</${i}>`}removeAttribute(e){null!==this.doc?e4(this.doc,t=>{tq(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?e4(this.doc,r=>{tY(r,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return tK(this,e)}hasAttribute(e){return tZ(this,e)}getAttributes(e){return e?t0(this,e):tX(this)}toDOM(e=document,t={},r){let n=e.createElement(this.nodeName),i=this.getAttributes();for(let e in i){let t=i[e];"string"==typeof t&&n.setAttribute(e,t)}return tV(this,i=>{n.appendChild(i.toDOM(e,t,r))}),void 0!==r&&r._createAssociation(n,this),n}_write(e){e.writeTypeRef(rB),e.writeKey(this.nodeName)}}class rg extends tk{constructor(e,t,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)})}}class rm extends t6{constructor(e){super(),this.hookName=e}_copy(){return new rm(this.hookName)}clone(){let e=new rm(this.hookName);return this.forEach((t,r)=>{e.set(r,t)}),e}toDOM(e=document,t={},r){let n,i=t[this.hookName];return(n=void 0!==i?i.createDom(this):document.createElement(this.hookName)).setAttribute("data-yjs-hook",this.hookName),void 0!==r&&r._createAssociation(n,this),n}_write(e){e.writeTypeRef(rO),e.writeKey(this.hookName)}}class ry extends ru{get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new ry}clone(){let e=new ry;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,r){let n=e.createTextNode(this.toString());return void 0!==r&&r._createAssociation(n,this),n}toString(){return this.toDelta().map(e=>{let t=[];for(let r in e.attributes){let n=[];for(let t in e.attributes[r])n.push({key:t,value:e.attributes[r][t]});n.sort((e,t)=>e.key<t.key?-1:1),t.push({nodeName:r,attrs:n})}t.sort((e,t)=>e.nodeName<t.nodeName?-1:1);let r="";for(let e=0;e<t.length;e++){let n=t[e];r+=`<${n.nodeName}`;for(let e=0;e<n.attrs.length;e++){let t=n.attrs[e];r+=` ${t.key}="${t.value}"`}r+=">"}r+=e.insert;for(let e=t.length-1;e>=0;e--)r+=`</${t[e].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(rM)}}class rw{constructor(e,t){this.id=e,this.length=t}get deleted(){throw f.methodUnimplemented()}mergeWith(e){return!1}write(e,t,r){throw f.methodUnimplemented()}integrate(e,t){throw f.methodUnimplemented()}}class rb extends rw{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),eJ(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class rx{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new rx(this.content)}splice(e){throw f.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class rv{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new rv(this.len)}splice(e){let t=new rv(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){D(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}let rC=(e,t)=>new N({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class r_{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;let t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new r_(rC(this.doc.guid,this.opts))}splice(e){throw f.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class rE{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new rE(this.embed)}splice(e){throw f.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class rS{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new rS(this.key,this.value)}splice(e){throw f.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){let r=t.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class rT{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new rT(this.arr)}splice(e){let t=new rT(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){let r=this.arr.length;e.writeLen(r-t);for(let n=t;n<r;n++){let t=this.arr[n];e.writeString(void 0===t?"undefined":JSON.stringify(t))}}getRef(){return 2}}let rk="development"===_.getVariable("node_env");class rI{constructor(e){this.arr=e,rk&&C.deepFreeze(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new rI(this.arr)}splice(e){let t=new rI(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){let r=this.arr.length;e.writeLen(r-t);for(let n=t;n<r;n++){let t=this.arr[n];e.writeAny(t)}}getRef(){return 8}}class rU{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new rU(this.str)}splice(e){let t=new rU(this.str.slice(e));this.str=this.str.slice(0,e);let r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"",t.str=""+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}let rj=[e=>new t8,e=>new t6,e=>new ru,e=>new rf(e.readKey()),e=>new rp,e=>new rm(e.readKey()),e=>new ry],rA=0,rD=1,rR=2,rB=3,rP=4,rO=5,rM=6;class rL{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new rL(this.type._copy())}splice(e){throw f.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(t=>{for(;null!==t;)t.gc(e,!0),t=t.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}let rF=(e,t)=>{let r,n=t,i=0;do i>0&&(n=ep(n.client,n.clock+i)),r=eq(e,n),i=n.clock-r.id.clock,n=r.redone;while(null!==n&&r instanceof rW)return{item:r,diff:i}},rN=(e,t)=>{for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},rV=(e,t,r)=>{let{client:n,clock:i}=t.id,s=new rW(ep(n,i+r),t,ep(n,i+r-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(r));return t.deleted&&s.markDeleted(),t.keep&&(s.keep=!0),null!==t.redone&&(s.redone=ep(t.redone.client,t.redone.clock+r)),t.right=s,null!==s.right&&(s.right.left=s),e._mergeStructs.push(s),null!==s.parentSub&&null===s.right&&s.parent._map.set(s.parentSub,s),t.length=r,s},rz=(e,t)=>o.some(e,e=>U(e.deletions,t)),r$=(e,t,r,n,i,s)=>{let o,a=e.doc,l=a.store,c=a.clientID,h=t.redone;if(null!==h)return eK(e,h);let u=t.parent._item,d=null;if(null!==u&&!0===u.deleted){if(null===u.redone&&(!r.has(u)||null===r$(e,u,r,n,i,s)))return null;for(;null!==u.redone;)u=eK(e,u.redone)}let p=null===u?t.parent:u.content.type;if(null===t.parentSub){for(d=t.left,o=t;null!==d;){let t=d;for(;null!==t&&t.parent._item!==u;)t=null===t.redone?null:eK(e,t.redone);if(null!==t&&t.parent._item===u){d=t;break}d=d.left}for(;null!==o;){let t=o;for(;null!==t&&t.parent._item!==u;)t=null===t.redone?null:eK(e,t.redone);if(null!==t&&t.parent._item===u){o=t;break}o=o.right}}else if(o=null,t.right&&!i){for(d=t;null!==d&&null!==d.right&&(d.right.redone||U(n,d.right.id)||rz(s.undoStack,d.right.id)||rz(s.redoStack,d.right.id));)for(d=d.right;d.redone;)d=eK(e,d.redone);if(d&&null!==d.right)return null}else d=p._map.get(t.parentSub)||null;let f=eG(l,c),g=ep(c,f),m=new rW(g,d,d&&d.lastId,o,o&&o.id,p,t.parentSub,t.content.copy());return t.redone=g,rN(m,!0),m.integrate(e,0),m};class rW extends rw{constructor(e,t,r,n,i,s,o,a){super(e,a.getLength()),this.origin=r,this.left=t,this.right=n,this.rightOrigin=i,this.parent=s,this.parentSub=o,this.redone=null,this.content=a,this.info=this.content.isCountable()?g.BIT2:0}set marker(e){(this.info&g.BIT4)>0!==e&&(this.info^=g.BIT4)}get marker(){return(this.info&g.BIT4)>0}get keep(){return(this.info&g.BIT1)>0}set keep(e){this.keep!==e&&(this.info^=g.BIT1)}get countable(){return(this.info&g.BIT2)>0}get deleted(){return(this.info&g.BIT3)>0}set deleted(e){this.deleted!==e&&(this.info^=g.BIT3)}markDeleted(){this.info|=g.BIT3}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=eG(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=eG(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===eu&&this.id.client!==this.parent.client&&this.parent.clock>=eG(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=eX(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=eK(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===rb||this.right&&this.right.constructor===rb)this.parent=null;else if(this.parent){if(this.parent.constructor===eu){let e=eq(t,this.parent);e.constructor===rb?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===rW?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===rW&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=eX(e,e.doc.store,ep(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,r=this.left;if(null!==r)t=r.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;let n=new Set,i=new Set;for(;null!==t&&t!==this.right;){if(i.add(t),n.add(t),ed(this.origin,t.origin)){if(t.id.client<this.id.client)r=t,n.clear();else if(ed(this.rightOrigin,t.rightOrigin))break}else if(null!==t.origin&&i.has(eq(e.doc.store,t.origin)))n.has(eq(e.doc.store,t.origin))||(r=t,n.clear());else break;t=t.right}this.left=r}if(null!==this.left){let e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),eJ(e.doc.store,this),this.content.integrate(e,this),e1(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new rb(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:ep(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&ed(e.origin,this.lastId)&&this.right===e&&ed(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){let t=this.parent._searchMarker;return t&&t.forEach(t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){let t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),D(e.deleteSet,this.id.client,this.id.clock,this.length),e1(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw f.unexpectedCase();this.content.gc(e),t?((e,t,r)=>{let n=e.clients.get(t.id.client);n[eH(n,t.id.clock)]=r})(e,this,new rb(this.id,this.length)):this.content=new rv(this.length)}write(e,t){let r=t>0?ep(this.id.client,this.id.clock+t-1):this.origin,n=this.rightOrigin,i=this.parentSub,s=this.content.getRef()&g.BITS5|(null===r?0:g.BIT8)|(null===n?0:g.BIT7)|(null===i?0:g.BIT6);if(e.writeInfo(s),null!==r&&e.writeLeftID(r),null!==n&&e.writeRightID(n),null===r&&null===n){let t=this.parent;if(void 0!==t._item){let r=t._item;if(null===r){let r=em(t);e.writeParentInfo(!0),e.writeString(r)}else e.writeParentInfo(!1),e.writeLeftID(r.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===eu?(e.writeParentInfo(!1),e.writeLeftID(t)):f.unexpectedCase();null!==i&&e.writeString(i)}this.content.write(e,t)}}let rG=(e,t)=>rJ[t&g.BITS5](e),rJ=[()=>{f.unexpectedCase()},e=>new rv(e.readLen()),e=>{let t=e.readLen(),r=[];for(let n=0;n<t;n++){let t=e.readString();"undefined"===t?r.push(void 0):r.push(JSON.parse(t))}return new rT(r)},e=>new rx(e.readBuf()),e=>new rU(e.readString()),e=>new rE(e.readJSON()),e=>new rS(e.readKey(),e.readJSON()),e=>new rL(rj[e.readTypeRef()](e)),e=>{let t=e.readLen(),r=[];for(let n=0;n<t;n++)r.push(e.readAny());return new rI(r)},e=>new r_(rC(e.readString(),e.readAny())),()=>{f.unexpectedCase()}];class rH extends rw{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){f.unexpectedCase()}write(e,t){e.writeInfo(10),c.writeVarUint(e.restEncoder,this.length-t)}getMissing(e,t){return null}}let rq="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==E?E:{},rY="__ $YJS$ __";!0===rq[rY]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),rq[rY]=!0},{"lib0/observable":"9aNB9","lib0/array":"kcR8B","lib0/math":"icsnC","lib0/map":"gsPjK","lib0/encoding":"jAo8y","lib0/decoding":"2MQNo","lib0/random":"6zQml","lib0/promise":"98Jbs","lib0/buffer":"ezlBF","lib0/error":"gsHuq","lib0/binary":"c3vnv","lib0/function":"5S3AJ","lib0/set":"5gNQm","lib0/logging":"blwZs","lib0/time":"b6cMp","lib0/string":"l5ap6","lib0/iterator":"dOXgT","lib0/object":"eUSla","lib0/environment":"8YiHn","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"9aNB9":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"ObservableV2",()=>l),i.export(r,"Observable",()=>c);var s=e("./map.js"),o=e("./set.js"),a=e("./array.js");class l{constructor(){this._observers=s.create()}on(e,t){return s.setIfUndefined(this._observers,e,o.create).add(t),t}once(e,t){let r=(...n)=>{this.off(e,r),t(...n)};this.on(e,r)}off(e,t){let r=this._observers.get(e);void 0!==r&&(r.delete(t),0===r.size&&this._observers.delete(e))}emit(e,t){return a.from((this._observers.get(e)||s.create()).values()).forEach(e=>e(...t))}destroy(){this._observers=s.create()}}class c{constructor(){this._observers=s.create()}on(e,t){s.setIfUndefined(this._observers,e,o.create).add(t)}once(e,t){let r=(...n)=>{this.off(e,r),t(...n)};this.on(e,r)}off(e,t){let r=this._observers.get(e);void 0!==r&&(r.delete(t),0===r.size&&this._observers.delete(e))}emit(e,t){return a.from((this._observers.get(e)||s.create()).values()).forEach(e=>e(...t))}destroy(){this._observers=s.create()}}},{"./map.js":"gsPjK","./set.js":"5gNQm","./array.js":"kcR8B","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],gsPjK:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"create",()=>s),i.export(r,"copy",()=>o),i.export(r,"setIfUndefined",()=>a),i.export(r,"map",()=>l),i.export(r,"any",()=>c),i.export(r,"all",()=>h);let s=()=>new Map,o=e=>{let t=s();return e.forEach((e,r)=>{t.set(r,e)}),t},a=(e,t,r)=>{let n=e.get(t);return void 0===n&&e.set(t,n=r()),n},l=(e,t)=>{let r=[];for(let[n,i]of e)r.push(t(i,n));return r},c=(e,t)=>{for(let[r,n]of e)if(t(n,r))return!0;return!1},h=(e,t)=>{for(let[r,n]of e)if(!t(n,r))return!1;return!0}},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],j9EeU:[function(e,t,r,n){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach(function(r){"default"===r||"__esModule"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}],"5gNQm":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"create",()=>s),i.export(r,"toArray",()=>o),i.export(r,"first",()=>a),i.export(r,"from",()=>l);let s=()=>new Set,o=e=>Array.from(e),a=e=>e.values().next().value??void 0,l=e=>new Set(e)},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],kcR8B:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"last",()=>o),i.export(r,"create",()=>a),i.export(r,"copy",()=>l),i.export(r,"appendTo",()=>c),i.export(r,"from",()=>h),i.export(r,"every",()=>u),i.export(r,"some",()=>d),i.export(r,"equalFlat",()=>p),i.export(r,"flatten",()=>f),i.export(r,"unfold",()=>g),i.export(r,"fold",()=>m),i.export(r,"isArray",()=>y),i.export(r,"unique",()=>w),i.export(r,"uniqueBy",()=>b),i.export(r,"map",()=>x),i.export(r,"bubblesortItem",()=>v);var s=e("./set.js");let o=e=>e[e.length-1],a=()=>[],l=e=>e.slice(),c=(e,t)=>{for(let r=0;r<t.length;r++)e.push(t[r])},h=Array.from,u=(e,t)=>{for(let r=0;r<e.length;r++)if(!t(e[r],r,e))return!1;return!0},d=(e,t)=>{for(let r=0;r<e.length;r++)if(t(e[r],r,e))return!0;return!1},p=(e,t)=>e.length===t.length&&u(e,(e,r)=>e===t[r]),f=e=>m(e,[],(e,t)=>e.concat(t)),g=(e,t)=>{let r=Array(e);for(let n=0;n<e;n++)r[n]=t(n,r);return r},m=(e,t,r)=>e.reduce(r,t),y=Array.isArray,w=e=>h(s.from(e)),b=(e,t)=>{let r=s.create(),n=[];for(let i=0;i<e.length;i++){let s=e[i],o=t(s);r.has(o)||(r.add(o),n.push(s))}return n},x=(e,t)=>{let r=Array(e.length);for(let n=0;n<e.length;n++)r[n]=t(e[n],n,e);return r},v=(e,t,r)=>{let n=e[t],i=t;for(;r(n,e[i+1])>0;)e[i]=e[i+1],e[++i]=n;if(t===i&&i>0)for(;r(e[i-1],n)>0;)e[i]=e[i-1],e[--i]=n;return i}},{"./set.js":"5gNQm","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],icsnC:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"floor",()=>s),i.export(r,"ceil",()=>o),i.export(r,"abs",()=>a),i.export(r,"imul",()=>l),i.export(r,"round",()=>c),i.export(r,"log10",()=>h),i.export(r,"log2",()=>u),i.export(r,"log",()=>d),i.export(r,"sqrt",()=>p),i.export(r,"add",()=>f),i.export(r,"min",()=>g),i.export(r,"max",()=>m),i.export(r,"isNaN",()=>y),i.export(r,"pow",()=>w),i.export(r,"exp10",()=>b),i.export(r,"sign",()=>x),i.export(r,"isNegativeZero",()=>v);let s=Math.floor,o=Math.ceil,a=Math.abs,l=Math.imul,c=Math.round,h=Math.log10,u=Math.log2,d=Math.log,p=Math.sqrt,f=(e,t)=>e+t,g=(e,t)=>e<t?e:t,m=(e,t)=>e>t?e:t,y=Number.isNaN,w=Math.pow,b=e=>Math.pow(10,e),x=Math.sign,v=e=>0!==e?e<0:1/e<0},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],jAo8y:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"Encoder",()=>h),i.export(r,"createEncoder",()=>u),i.export(r,"encode",()=>d),i.export(r,"length",()=>p),i.export(r,"hasContent",()=>f),i.export(r,"toUint8Array",()=>g),i.export(r,"verifyLen",()=>m),i.export(r,"write",()=>y),i.export(r,"set",()=>w),i.export(r,"writeUint8",()=>b),i.export(r,"setUint8",()=>x),i.export(r,"writeUint16",()=>v),i.export(r,"setUint16",()=>C),i.export(r,"writeUint32",()=>_),i.export(r,"writeUint32BigEndian",()=>E),i.export(r,"setUint32",()=>S),i.export(r,"writeVarUint",()=>T),i.export(r,"writeVarInt",()=>k),i.export(r,"_writeVarStringNative",()=>j),i.export(r,"_writeVarStringPolyfill",()=>A),i.export(r,"writeVarString",()=>D),i.export(r,"writeTerminatedString",()=>R),i.export(r,"writeTerminatedUint8Array",()=>B),i.export(r,"writeBinaryEncoder",()=>P),i.export(r,"writeUint8Array",()=>O),i.export(r,"writeVarUint8Array",()=>M),i.export(r,"writeOnDataView",()=>L),i.export(r,"writeFloat32",()=>F),i.export(r,"writeFloat64",()=>N),i.export(r,"writeBigInt64",()=>V),i.export(r,"writeBigUint64",()=>z),i.export(r,"writeAny",()=>W),i.export(r,"RleEncoder",()=>G),i.export(r,"IntDiffEncoder",()=>J),i.export(r,"RleIntDiffEncoder",()=>H),i.export(r,"UintOptRleEncoder",()=>Y),i.export(r,"IncUintOptRleEncoder",()=>K),i.export(r,"IntDiffOptRleEncoder",()=>Z),i.export(r,"StringEncoder",()=>Q);var s=e("./math.js"),o=e("./number.js"),a=e("./binary.js"),l=e("./string.js"),c=e("./array.js");class h{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}let u=()=>new h,d=e=>{let t=u();return e(t),g(t)},p=e=>{let t=e.cpos;for(let r=0;r<e.bufs.length;r++)t+=e.bufs[r].length;return t},f=e=>e.cpos>0||e.bufs.length>0,g=e=>{let t=new Uint8Array(p(e)),r=0;for(let n=0;n<e.bufs.length;n++){let i=e.bufs[n];t.set(i,r),r+=i.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),r),t},m=(e,t)=>{let r=e.cbuf.length;r-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*s.max(r,t)),e.cpos=0)},y=(e,t)=>{let r=e.cbuf.length;e.cpos===r&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*r),e.cpos=0),e.cbuf[e.cpos++]=t},w=(e,t,r)=>{let n=null;for(let r=0;r<e.bufs.length&&null===n;r++){let i=e.bufs[r];t<i.length?n=i:t-=i.length}null===n&&(n=e.cbuf),n[t]=r},b=y,x=w,v=(e,t)=>{y(e,t&a.BITS8),y(e,t>>>8&a.BITS8)},C=(e,t,r)=>{w(e,t,r&a.BITS8),w(e,t+1,r>>>8&a.BITS8)},_=(e,t)=>{for(let r=0;r<4;r++)y(e,t&a.BITS8),t>>>=8},E=(e,t)=>{for(let r=3;r>=0;r--)y(e,t>>>8*r&a.BITS8)},S=(e,t,r)=>{for(let n=0;n<4;n++)w(e,t+n,r&a.BITS8),r>>>=8},T=(e,t)=>{for(;t>a.BITS7;)y(e,a.BIT8|a.BITS7&t),t=s.floor(t/128);y(e,a.BITS7&t)},k=(e,t)=>{let r=s.isNegativeZero(t);for(r&&(t=-t),y(e,(t>a.BITS6?a.BIT8:0)|(r?a.BIT7:0)|a.BITS6&t),t=s.floor(t/64);t>0;)y(e,(t>a.BITS7?a.BIT8:0)|a.BITS7&t),t=s.floor(t/128)},I=new Uint8Array(3e4),U=I.length/3,j=(e,t)=>{if(t.length<U){let r=l.utf8TextEncoder.encodeInto(t,I).written||0;T(e,r);for(let t=0;t<r;t++)y(e,I[t])}else M(e,l.encodeUtf8(t))},A=(e,t)=>{let r=unescape(encodeURIComponent(t)),n=r.length;T(e,n);for(let t=0;t<n;t++)y(e,r.codePointAt(t))},D=l.utf8TextEncoder&&l.utf8TextEncoder.encodeInto?j:A,R=(e,t)=>B(e,l.encodeUtf8(t)),B=(e,t)=>{for(let r=0;r<t.length;r++){let n=t[r];(0===n||1===n)&&y(e,1),y(e,t[r])}y(e,0)},P=(e,t)=>O(e,g(t)),O=(e,t)=>{let r=e.cbuf.length,n=e.cpos,i=s.min(r-n,t.length),o=t.length-i;e.cbuf.set(t.subarray(0,i),n),e.cpos+=i,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(s.max(2*r,o)),e.cbuf.set(t.subarray(i)),e.cpos=o)},M=(e,t)=>{T(e,t.byteLength),O(e,t)},L=(e,t)=>{m(e,t);let r=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,r},F=(e,t)=>L(e,4).setFloat32(0,t,!1),N=(e,t)=>L(e,8).setFloat64(0,t,!1),V=(e,t)=>L(e,8).setBigInt64(0,t,!1),z=(e,t)=>L(e,8).setBigUint64(0,t,!1),$=new DataView(new ArrayBuffer(4)),W=(e,t)=>{switch(typeof t){case"string":y(e,119),D(e,t);break;case"number":if(o.isInteger(t)&&s.abs(t)<=a.BITS31)y(e,125),k(e,t);else($.setFloat32(0,t),$.getFloat32(0)===t)?(y(e,124),F(e,t)):(y(e,123),N(e,t));break;case"bigint":y(e,122),V(e,t);break;case"object":if(null===t)y(e,126);else if(c.isArray(t)){y(e,117),T(e,t.length);for(let r=0;r<t.length;r++)W(e,t[r])}else if(t instanceof Uint8Array)y(e,116),M(e,t);else{y(e,118);let r=Object.keys(t);T(e,r.length);for(let n=0;n<r.length;n++){let i=r[n];D(e,i),W(e,t[i])}}break;case"boolean":y(e,t?120:121);break;default:y(e,127)}};class G extends h{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&T(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}class J extends h{constructor(e){super(),this.s=e}write(e){k(this,e-this.s),this.s=e}}class H extends h{constructor(e){super(),this.s=e,this.count=0}write(e){this.s===e&&this.count>0?this.count++:(this.count>0&&T(this,this.count-1),this.count=1,k(this,e-this.s),this.s=e)}}let q=e=>{e.count>0&&(k(e.encoder,1===e.count?e.s:-e.s),e.count>1&&T(e.encoder,e.count-2))};class Y{constructor(){this.encoder=new h,this.s=0,this.count=0}write(e){this.s===e?this.count++:(q(this),this.count=1,this.s=e)}toUint8Array(){return q(this),g(this.encoder)}}class K{constructor(){this.encoder=new h,this.s=0,this.count=0}write(e){this.s+this.count===e?this.count++:(q(this),this.count=1,this.s=e)}toUint8Array(){return q(this),g(this.encoder)}}let X=e=>{if(e.count>0){let t=2*e.diff+ +(1!==e.count);k(e.encoder,t),e.count>1&&T(e.encoder,e.count-2)}};class Z{constructor(){this.encoder=new h,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(X(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return X(this),g(this.encoder)}}class Q{constructor(){this.sarr=[],this.s="",this.lensE=new Y}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){let e=new h;return this.sarr.push(this.s),this.s="",D(e,this.sarr.join("")),O(e,this.lensE.toUint8Array()),g(e)}}},{"./math.js":"icsnC","./number.js":"64qVp","./binary.js":"c3vnv","./string.js":"l5ap6","./array.js":"kcR8B","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"64qVp":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"MAX_SAFE_INTEGER",()=>a),i.export(r,"MIN_SAFE_INTEGER",()=>l),i.export(r,"LOWEST_INT32",()=>c),i.export(r,"HIGHEST_INT32",()=>h),i.export(r,"HIGHEST_UINT32",()=>u),i.export(r,"isInteger",()=>d),i.export(r,"isNaN",()=>p),i.export(r,"parseInt",()=>f),i.export(r,"countBits",()=>g);var s=e("./math.js"),o=e("./binary.js");let a=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER,c=-0x80000000,h=o.BITS31,u=o.BITS32,d=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&s.floor(e)===e),p=Number.isNaN,f=Number.parseInt,g=e=>{e&=o.BITS32;let t=0;for(;e;)e&=e-1,t++;return t}},{"./math.js":"icsnC","./binary.js":"c3vnv","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],c3vnv:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"BIT1",()=>s),i.export(r,"BIT2",()=>o),i.export(r,"BIT3",()=>a),i.export(r,"BIT4",()=>l),i.export(r,"BIT5",()=>c),i.export(r,"BIT6",()=>h),i.export(r,"BIT7",()=>u),i.export(r,"BIT8",()=>d),i.export(r,"BIT9",()=>p),i.export(r,"BIT10",()=>f),i.export(r,"BIT11",()=>g),i.export(r,"BIT12",()=>m),i.export(r,"BIT13",()=>y),i.export(r,"BIT14",()=>w),i.export(r,"BIT15",()=>b),i.export(r,"BIT16",()=>x),i.export(r,"BIT17",()=>v),i.export(r,"BIT18",()=>C),i.export(r,"BIT19",()=>_),i.export(r,"BIT20",()=>E),i.export(r,"BIT21",()=>S),i.export(r,"BIT22",()=>T),i.export(r,"BIT23",()=>k),i.export(r,"BIT24",()=>I),i.export(r,"BIT25",()=>U),i.export(r,"BIT26",()=>j),i.export(r,"BIT27",()=>A),i.export(r,"BIT28",()=>D),i.export(r,"BIT29",()=>R),i.export(r,"BIT30",()=>B),i.export(r,"BIT31",()=>P),i.export(r,"BIT32",()=>O),i.export(r,"BITS0",()=>M),i.export(r,"BITS1",()=>L),i.export(r,"BITS2",()=>F),i.export(r,"BITS3",()=>N),i.export(r,"BITS4",()=>V),i.export(r,"BITS5",()=>z),i.export(r,"BITS6",()=>$),i.export(r,"BITS7",()=>W),i.export(r,"BITS8",()=>G),i.export(r,"BITS9",()=>J),i.export(r,"BITS10",()=>H),i.export(r,"BITS11",()=>q),i.export(r,"BITS12",()=>Y),i.export(r,"BITS13",()=>K),i.export(r,"BITS14",()=>X),i.export(r,"BITS15",()=>Z),i.export(r,"BITS16",()=>Q),i.export(r,"BITS17",()=>ee),i.export(r,"BITS18",()=>et),i.export(r,"BITS19",()=>er),i.export(r,"BITS20",()=>en),i.export(r,"BITS21",()=>ei),i.export(r,"BITS22",()=>es),i.export(r,"BITS23",()=>eo),i.export(r,"BITS24",()=>ea),i.export(r,"BITS25",()=>el),i.export(r,"BITS26",()=>ec),i.export(r,"BITS27",()=>eh),i.export(r,"BITS28",()=>eu),i.export(r,"BITS29",()=>ed),i.export(r,"BITS30",()=>ep),i.export(r,"BITS31",()=>ef),i.export(r,"BITS32",()=>eg);let s=1,o=2,a=4,l=8,c=16,h=32,u=64,d=128,p=256,f=512,g=1024,m=2048,y=4096,w=8192,b=16384,x=32768,v=65536,C=131072,_=262144,E=524288,S=1048576,T=2097152,k=4194304,I=8388608,U=0x1000000,j=0x2000000,A=0x4000000,D=0x8000000,R=0x10000000,B=0x20000000,P=0x40000000,O=-0x80000000,M=0,L=1,F=3,N=7,V=15,z=31,$=63,W=127,G=255,J=511,H=1023,q=2047,Y=4095,K=8191,X=16383,Z=32767,Q=65535,ee=131071,et=262143,er=524287,en=1048575,ei=2097151,es=4194303,eo=8388607,ea=0xffffff,el=0x1ffffff,ec=0x3ffffff,eh=0x7ffffff,eu=0xfffffff,ed=0x1fffffff,ep=0x3fffffff,ef=0x7fffffff,eg=0xffffffff},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],l5ap6:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"fromCharCode",()=>o),i.export(r,"fromCodePoint",()=>a),i.export(r,"MAX_UTF16_CHARACTER",()=>l),i.export(r,"trimLeft",()=>h),i.export(r,"fromCamelCase",()=>d),i.export(r,"utf8ByteLength",()=>p),i.export(r,"_encodeUtf8Polyfill",()=>f),i.export(r,"utf8TextEncoder",()=>g),i.export(r,"_encodeUtf8Native",()=>m),i.export(r,"encodeUtf8",()=>y),i.export(r,"_decodeUtf8Polyfill",()=>w),i.export(r,"utf8TextDecoder",()=>b),i.export(r,"_decodeUtf8Native",()=>x),i.export(r,"decodeUtf8",()=>v),i.export(r,"splice",()=>C),i.export(r,"repeat",()=>_);var s=e("./array.js");let o=String.fromCharCode,a=String.fromCodePoint,l=o(65535),c=/^\s*/g,h=e=>e.replace(c,""),u=/([A-Z])/g,d=(e,t)=>h(e.replace(u,e=>`${t}${e.toLowerCase()}`)),p=e=>unescape(encodeURIComponent(e)).length,f=e=>{let t=unescape(encodeURIComponent(e)),r=t.length,n=new Uint8Array(r);for(let e=0;e<r;e++)n[e]=t.codePointAt(e);return n},g="undefined"!=typeof TextEncoder?new TextEncoder:null,m=e=>g.encode(e),y=g?m:f,w=e=>{let t=e.length,r="",n=0;for(;t>0;){let i=t<1e4?t:1e4,s=e.subarray(n,n+i);n+=i,r+=String.fromCodePoint.apply(null,s),t-=i}return decodeURIComponent(escape(r))},b="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});b&&1===b.decode(new Uint8Array).length&&(b=null);let x=e=>b.decode(e),v=b?x:w,C=(e,t,r,n="")=>e.slice(0,t)+n+e.slice(t+r),_=(e,t)=>s.unfold(t,()=>e).join("")},{"./array.js":"kcR8B","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"2MQNo":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"Decoder",()=>p),i.export(r,"createDecoder",()=>f),i.export(r,"hasContent",()=>g),i.export(r,"clone",()=>m),i.export(r,"readUint8Array",()=>y),i.export(r,"readVarUint8Array",()=>w),i.export(r,"readTailAsUint8Array",()=>b),i.export(r,"skip8",()=>x),i.export(r,"readUint8",()=>v),i.export(r,"readUint16",()=>C),i.export(r,"readUint32",()=>_),i.export(r,"readUint32BigEndian",()=>E),i.export(r,"peekUint8",()=>S),i.export(r,"peekUint16",()=>T),i.export(r,"peekUint32",()=>k),i.export(r,"readVarUint",()=>I),i.export(r,"readVarInt",()=>U),i.export(r,"peekVarUint",()=>j),i.export(r,"peekVarInt",()=>A),i.export(r,"_readVarStringPolyfill",()=>D),i.export(r,"_readVarStringNative",()=>R),i.export(r,"readVarString",()=>B),i.export(r,"readTerminatedUint8Array",()=>P),i.export(r,"readTerminatedString",()=>O),i.export(r,"peekVarString",()=>M),i.export(r,"readFromDataView",()=>L),i.export(r,"readFloat32",()=>F),i.export(r,"readFloat64",()=>N),i.export(r,"readBigInt64",()=>V),i.export(r,"readBigUint64",()=>z),i.export(r,"readAny",()=>W),i.export(r,"RleDecoder",()=>G),i.export(r,"IntDiffDecoder",()=>J),i.export(r,"RleIntDiffDecoder",()=>H),i.export(r,"UintOptRleDecoder",()=>q),i.export(r,"IncUintOptRleDecoder",()=>Y),i.export(r,"IntDiffOptRleDecoder",()=>K),i.export(r,"StringDecoder",()=>X);var s=e("./binary.js"),o=e("./math.js"),a=e("./number.js"),l=e("./string.js"),c=e("./error.js"),h=e("./encoding.js");let u=c.create("Unexpected end of array"),d=c.create("Integer out of Range");class p{constructor(e){this.arr=e,this.pos=0}}let f=e=>new p(e),g=e=>e.pos!==e.arr.length,m=(e,t=e.pos)=>{let r=f(e.arr);return r.pos=t,r},y=(e,t)=>{let r=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,r},w=e=>y(e,I(e)),b=e=>y(e,e.arr.length-e.pos),x=e=>e.pos++,v=e=>e.arr[e.pos++],C=e=>{let t=e.arr[e.pos]+(e.arr[e.pos+1]<<8);return e.pos+=2,t},_=e=>{let t=e.arr[e.pos]+(e.arr[e.pos+1]<<8)+(e.arr[e.pos+2]<<16)+(e.arr[e.pos+3]<<24)>>>0;return e.pos+=4,t},E=e=>{let t=e.arr[e.pos+3]+(e.arr[e.pos+2]<<8)+(e.arr[e.pos+1]<<16)+(e.arr[e.pos]<<24)>>>0;return e.pos+=4,t},S=e=>e.arr[e.pos],T=e=>e.arr[e.pos]+(e.arr[e.pos+1]<<8),k=e=>e.arr[e.pos]+(e.arr[e.pos+1]<<8)+(e.arr[e.pos+2]<<16)+(e.arr[e.pos+3]<<24)>>>0,I=e=>{let t=0,r=1,n=e.arr.length;for(;e.pos<n;){let n=e.arr[e.pos++];if(t+=(n&s.BITS7)*r,r*=128,n<s.BIT8)return t;if(t>a.MAX_SAFE_INTEGER)throw d}throw u},U=e=>{let t=e.arr[e.pos++],r=t&s.BITS6,n=64,i=(t&s.BIT7)>0?-1:1;if((t&s.BIT8)==0)return i*r;let o=e.arr.length;for(;e.pos<o;){if(r+=((t=e.arr[e.pos++])&s.BITS7)*n,n*=128,t<s.BIT8)return i*r;if(r>a.MAX_SAFE_INTEGER)throw d}throw u},j=e=>{let t=e.pos,r=I(e);return e.pos=t,r},A=e=>{let t=e.pos,r=U(e);return e.pos=t,r},D=e=>{let t=I(e);if(0===t)return"";{let r=String.fromCodePoint(v(e));if(--t<100)for(;t--;)r+=String.fromCodePoint(v(e));else for(;t>0;){let n=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+n);e.pos+=n,r+=String.fromCodePoint.apply(null,i),t-=n}return decodeURIComponent(escape(r))}},R=e=>l.utf8TextDecoder.decode(w(e)),B=l.utf8TextDecoder?R:D,P=e=>{let t,r=h.createEncoder();for(;;){if(0===(t=v(e)))return h.toUint8Array(r);1===t&&(t=v(e)),h.write(r,t)}},O=e=>l.decodeUtf8(P(e)),M=e=>{let t=e.pos,r=B(e);return e.pos=t,r},L=(e,t)=>{let r=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,r},F=e=>L(e,4).getFloat32(0,!1),N=e=>L(e,8).getFloat64(0,!1),V=e=>L(e,8).getBigInt64(0,!1),z=e=>L(e,8).getBigUint64(0,!1),$=[e=>void 0,e=>null,U,F,N,V,e=>!1,e=>!0,B,e=>{let t=I(e),r={};for(let n=0;n<t;n++)r[B(e)]=W(e);return r},e=>{let t=I(e),r=[];for(let n=0;n<t;n++)r.push(W(e));return r},w],W=e=>$[127-v(e)](e);class G extends p{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),g(this)?this.count=I(this)+1:this.count=-1),this.count--,this.s}}class J extends p{constructor(e,t){super(e),this.s=t}read(){return this.s+=U(this),this.s}}class H extends p{constructor(e,t){super(e),this.s=t,this.count=0}read(){return 0===this.count&&(this.s+=U(this),g(this)?this.count=I(this)+1:this.count=-1),this.count--,this.s}}class q extends p{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=U(this);let e=o.isNegativeZero(this.s);this.count=1,e&&(this.s=-this.s,this.count=I(this)+2)}return this.count--,this.s}}class Y extends p{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=U(this);let e=o.isNegativeZero(this.s);this.count=1,e&&(this.s=-this.s,this.count=I(this)+2)}return this.count--,this.s++}}class K extends p{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){let e=U(this);this.diff=o.floor(e/2),this.count=1,1&e&&(this.count=I(this)+2)}return this.s+=this.diff,this.count--,this.s}}class X{constructor(e){this.decoder=new q(e),this.str=B(this.decoder),this.spos=0}read(){let e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}},{"./binary.js":"c3vnv","./math.js":"icsnC","./number.js":"64qVp","./string.js":"l5ap6","./error.js":"gsHuq","./encoding.js":"jAo8y","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],gsHuq:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"create",()=>s),i.export(r,"methodUnimplemented",()=>o),i.export(r,"unexpectedCase",()=>a);let s=e=>Error(e),o=()=>{throw s("Method unimplemented")},a=()=>{throw s("Unexpected case")}},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"6zQml":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"rand",()=>l),i.export(r,"uint32",()=>c),i.export(r,"uint53",()=>h),i.export(r,"oneOf",()=>u),i.export(r,"uuidv4",()=>d);var s=e("./math.js"),o=e("./binary.js"),a=e("lib0/webcrypto");let l=Math.random,c=()=>(0,a.getRandomValues)(new Uint32Array(1))[0],h=()=>{let e=(0,a.getRandomValues)(new Uint32Array(8));return(e[0]&o.BITS21)*(o.BITS32+1)+(e[1]>>>0)},u=e=>e[s.floor(l()*e.length)],d=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^c()&15>>e/4).toString(16))},{"./math.js":"icsnC","./binary.js":"c3vnv","lib0/webcrypto":"g4bLl","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],g4bLl:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"subtle",()=>s),i.export(r,"getRandomValues",()=>o);let s=crypto.subtle,o=crypto.getRandomValues.bind(crypto)},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"98Jbs":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"create",()=>o),i.export(r,"createEmpty",()=>a),i.export(r,"all",()=>l),i.export(r,"reject",()=>c),i.export(r,"resolve",()=>h),i.export(r,"resolveWith",()=>u),i.export(r,"until",()=>d),i.export(r,"untilAsync",()=>p),i.export(r,"wait",()=>f),i.export(r,"isPromise",()=>g);var s=e("./time.js");let o=e=>new Promise(e),a=e=>new Promise(e),l=Promise.all.bind(Promise),c=e=>Promise.reject(e),h=e=>Promise.resolve(e),u=e=>Promise.resolve(e),d=(e,t,r=10)=>o((n,i)=>{let o=s.getUnixTime(),a=e>0,l=setInterval(()=>{t()?(clearInterval(l),n()):a&&s.getUnixTime()-o>e&&(clearInterval(l),i(Error("Timeout")))},r)}),p=async(e,t=0,r=10)=>{let n=s.getUnixTime(),i=t<=0;for(;i||s.getUnixTime()-n<=t;){if(await e())return;await f(r)}throw Error("Timeout")},f=e=>o((t,r)=>setTimeout(t,e)),g=e=>e instanceof Promise||e&&e.then&&e.catch&&e.finally},{"./time.js":"b6cMp","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],b6cMp:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"getDate",()=>a),i.export(r,"getUnixTime",()=>l),i.export(r,"humanizeDuration",()=>c);var s=e("./metric.js"),o=e("./math.js");let a=()=>new Date,l=Date.now,c=e=>{if(e<6e4){let t=s.prefix(e,-1);return o.round(100*t.n)/100+t.prefix+"s"}let t=(e=o.floor(e/1e3))%60,r=o.floor(e/60)%60,n=o.floor(e/3600)%24,i=o.floor(e/86400);return i>0?i+"d"+(n>0||r>30?" "+(r>30?n+1:n)+"h":""):n>0?n+"h"+(r>0||t>30?" "+(t>30?r+1:r)+"min":""):r+"min"+(t>0?" "+t+"s":"")}},{"./metric.js":"2ArNY","./math.js":"icsnC","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"2ArNY":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"yotta",()=>o),i.export(r,"zetta",()=>a),i.export(r,"exa",()=>l),i.export(r,"peta",()=>c),i.export(r,"tera",()=>h),i.export(r,"giga",()=>u),i.export(r,"mega",()=>d),i.export(r,"kilo",()=>p),i.export(r,"hecto",()=>f),i.export(r,"deca",()=>g),i.export(r,"deci",()=>m),i.export(r,"centi",()=>y),i.export(r,"milli",()=>w),i.export(r,"micro",()=>b),i.export(r,"nano",()=>x),i.export(r,"pico",()=>v),i.export(r,"femto",()=>C),i.export(r,"atto",()=>_),i.export(r,"zepto",()=>E),i.export(r,"yocto",()=>S),i.export(r,"prefix",()=>I);var s=e("./math.js");let o=1e24,a=1e21,l=1e18,c=1e15,h=1e12,u=1e9,d=1e6,p=1e3,f=100,g=10,m=.1,y=.01,w=.001,b=1e-6,x=1e-9,v=1e-12,C=1e-15,_=1e-18,E=1e-21,S=1e-24,T=["","k","M","G","T","P","E","Z","Y"],k=["","m","","n","p","f","a","z","y"],I=(e,t=0)=>{let r=0===e?0:s.log10(e),n=0;for(;r<3*n&&t>-8;)t--,n--;for(;r>=3+3*n&&t<8;)t++,n++;let i=t<0?k[-t]:T[t];return{n:s.round((n>0?e/s.exp10(3*n):e*s.exp10(-3*n))*1e12)/1e12,prefix:i}}},{"./math.js":"icsnC","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],ezlBF:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"createUint8ArrayFromLen",()=>d),i.export(r,"createUint8ArrayViewFromArrayBuffer",()=>p),i.export(r,"createUint8ArrayFromArrayBuffer",()=>f),i.export(r,"toBase64",()=>g),i.export(r,"fromBase64",()=>m),i.export(r,"toBase64UrlEncoded",()=>y),i.export(r,"fromBase64UrlEncoded",()=>w),i.export(r,"toHexString",()=>b),i.export(r,"fromHexString",()=>x),i.export(r,"copyUint8Array",()=>v),i.export(r,"encodeAny",()=>C),i.export(r,"decodeAny",()=>_),i.export(r,"shiftNBitsLeft",()=>E);var s=e("./string.js"),o=e("./environment.js"),a=e("./array.js"),l=e("./math.js"),c=e("./encoding.js"),h=e("./decoding.js"),u=e("6475e0e5014d10a8").Buffer;let d=e=>new Uint8Array(e),p=(e,t,r)=>new Uint8Array(e,t,r),f=e=>new Uint8Array(e),g=o.isBrowser?e=>{let t="";for(let r=0;r<e.byteLength;r++)t+=s.fromCharCode(e[r]);return btoa(t)}:e=>u.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),m=o.isBrowser?e=>{let t=atob(e),r=d(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}:e=>{let t=u.from(e,"base64");return p(t.buffer,t.byteOffset,t.byteLength)},y=e=>g(e).replaceAll("+","-").replaceAll("/","_").replaceAll("=",""),w=e=>m(e.replaceAll("-","+").replaceAll("_","/")),b=e=>a.map(e,e=>e.toString(16).padStart(2,"0")).join(""),x=e=>{let t=e.length,r=new Uint8Array(l.ceil(t/2));for(let n=0;n<t;n+=2)r[r.length-n/2-1]=Number.parseInt(e.slice(t-n-2,t-n),16);return r},v=e=>{let t=d(e.byteLength);return t.set(e),t},C=e=>c.encode(t=>c.writeAny(t,e)),_=e=>h.readAny(h.createDecoder(e)),E=(e,t)=>{if(0===t)return e;e=new Uint8Array(e),e[0]<<=t;for(let r=1;r<e.length;r++)e[r-1]|=e[r]>>>8-t,e[r]<<=t;return e}},{"6475e0e5014d10a8":"b48lF","./string.js":"l5ap6","./environment.js":"8YiHn","./array.js":"kcR8B","./math.js":"icsnC","./encoding.js":"jAo8y","./decoding.js":"2MQNo","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],b48lF:[function(e,t,r,n){"use strict";let i=e("9c62938f1dccc73c"),s=e("aceacb6a4531a9d2"),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return u(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e){var n=e,i=t;if(("string"!=typeof i||""===i)&&(i="utf8"),!l.isEncoding(i))throw TypeError("Unknown encoding: "+i);let r=0|g(n,i),s=a(r),o=s.write(n,i);return o!==r&&(s=s.slice(0,o)),s}if(ArrayBuffer.isView(e)){var s=e;if(L(s,Uint8Array)){let e=new Uint8Array(s);return p(e.buffer,e.byteOffset,e.byteLength)}return d(s)}if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(L(e,ArrayBuffer)||e&&L(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(L(e,SharedArrayBuffer)||e&&L(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return l.from(o,t,r);let c=function(e){if(l.isBuffer(e)){let t=0|f(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?a(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(c)return c;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return h(e),a(e<0?0:0|f(e))}function d(e){let t=e.length<0?0:0|f(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){let n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),l.prototype),n}function f(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function g(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||L(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return P(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return O(e).length;default:if(i)return n?-1:P(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=F[e[n]];return i}(this,t,r);case"utf8":case"utf-8":return x(this,t,r);case"ascii":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":var s,o,a;return s=this,o=t,a=r,0===o&&a===s.length?i.fromByteArray(s):i.fromByteArray(s.slice(o,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let n=e.slice(t,r),i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function w(e,t,r,n,i){var s;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(s=r*=1)!=s&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(i)return -1;else r=e.length-1;else if(r<0)if(!i)return -1;else r=0;if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return b(e,[t],r,n,i)}throw TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){let s,o=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;o=2,a/=2,l/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===l)return n*o}else -1!==n&&(s-=s-n),n=-1}else for(r+l>a&&(r=a-l),s=r;s>=0;s--){let r=!0;for(let n=0;n<l;n++)if(c(e,s+n)!==c(t,n)){r=!1;break}if(r)return s}return -1}function x(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let t=e[i],s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,a,l;switch(o){case 1:t<128&&(s=t);break;case 2:(192&(r=e[i+1]))==128&&(l=(31&t)<<6|63&r)>127&&(s=l);break;case 3:r=e[i+1],n=e[i+2],(192&r)==128&&(192&n)==128&&(l=(15&t)<<12|(63&r)<<6|63&n)>2047&&(l<55296||l>57343)&&(s=l);break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],(192&r)==128&&(192&n)==128&&(192&a)==128&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a)>65535&&l<1114112&&(s=l)}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}var s=n;let o=s.length;if(o<=4096)return String.fromCharCode.apply(String,s);let a="",l=0;for(;l<o;)a+=String.fromCharCode.apply(String,s.slice(l,l+=4096));return a}function v(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function C(e,t,r,n,i,s){if(!l.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function _(e,t,r,n,i){A(t,n,i,e,r,7);let s=Number(t&BigInt(0xffffffff));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function E(e,t,r,n,i){A(t,n,i,e,r,7);let s=Number(t&BigInt(0xffffffff));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function S(e,t,r,n,i,s){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function T(e,t,r,n,i){return t*=1,r>>>=0,i||S(e,t,r,4,34028234663852886e22,-34028234663852886e22),s.write(e,t,r,n,23,4),r+4}function k(e,t,r,n,i){return t*=1,r>>>=0,i||S(e,t,r,8,17976931348623157e292,-17976931348623157e292),s.write(e,t,r,n,52,8),r+8}r.Buffer=l,r.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},r.INSPECT_MAX_BYTES=50,r.kMaxLength=0x7fffffff,l.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,r){return(h(e),e<=0)?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)},l.allocUnsafe=function(e){return u(e)},l.allocUnsafeSlow=function(e){return u(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(L(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),L(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:+(n<r)},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let n=l.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){let t=e[r];if(L(t,Uint8Array))i+t.length>n.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else if(l.isBuffer(t))t.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=t.length}return n},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},l.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},l.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},l.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?x(this,0,e):m.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(e,t,r,n,i){if(L(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let s=i-n,o=r-t,a=Math.min(s,o),c=this.slice(n,i),h=e.slice(t,r);for(let e=0;e<a;++e)if(c[e]!==h[e]){s=c[e],o=h[e];break}return s<o?-1:+(o<s)},l.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return w(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return w(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){var i,s,o,a,l,c,h,u;if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let d=this.length-t;if((void 0===r||r>d)&&(r=d),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let p=!1;for(;;)switch(n){case"hex":return function(e,t,r,n){let i;r=Number(r)||0;let s=e.length-r;n?(n=Number(n))>s&&(n=s):n=s;let o=t.length;for(n>o/2&&(n=o/2),i=0;i<n;++i){var a;let n=parseInt(t.substr(2*i,2),16);if((a=n)!=a)break;e[r+i]=n}return i}(this,e,t,r);case"utf8":case"utf-8":return i=t,s=r,M(P(e,this.length-i),this,i,s);case"ascii":case"latin1":case"binary":return o=t,a=r,M(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,o,a);case"base64":return l=t,c=r,M(O(e),this,l,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h=t,u=r,M(function(e,t){let r,n,i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i.push(r%256),i.push(n);return i}(e,this.length-h),this,h,u);default:if(p)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),p=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},l.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,l.prototype),n},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=N(function(e){D(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&R(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*r;return BigInt(n)+(BigInt(i)<<BigInt(32))}),l.prototype.readBigUInt64BE=N(function(e){D(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&R(e,this.length-8);let n=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],i=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),l.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);let n=t,i=1,s=this[e+--n];for(;n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},l.prototype.readInt8=function(e,t){return(e>>>=0,t||v(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||v(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},l.prototype.readInt16BE=function(e,t){e>>>=0,t||v(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=N(function(e){D(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&R(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),l.prototype.readBigInt64BE=N(function(e){D(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&R(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r)}),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||v(e,4,this.length),s.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||v(e,4,this.length),s.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||v(e,8,this.length),s.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||v(e,8,this.length),s.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;C(this,e,t,r,n,0)}let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;C(this,e,t,r,n,0)}let i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||C(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||C(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||C(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=N(function(e,t=0){return _(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=N(function(e,t=0){return E(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}let i=0,s=1,o=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||C(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||C(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=N(function(e,t=0){return _(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=N(function(e,t=0){return E(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeFloatLE=function(e,t,r){return T(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return T(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(!l.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},l.prototype.fill=function(e,t,r,n){let i;if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{let s=l.isBuffer(e)?e:l.from(e,n),o=s.length;if(0===o)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};let I={};function U(e,t,r){I[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function j(e){let t="",r=e.length,n=+("-"===e[0]);for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function A(e,t,r,n,i,s){if(e>r||e<t){let n,i="bigint"==typeof t?"n":"";throw n=s>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${(s+1)*8}${i}`:`>= -(2${i} ** ${(s+1)*8-1}${i}) and < 2 ** ${(s+1)*8-1}${i}`:`>= ${t}${i} and <= ${r}${i}`,new I.ERR_OUT_OF_RANGE("value",n,e)}D(i,"offset"),(void 0===n[i]||void 0===n[i+s])&&R(i,n.length-(s+1))}function D(e,t){if("number"!=typeof e)throw new I.ERR_INVALID_ARG_TYPE(t,"number",e)}function R(e,t,r){if(Math.floor(e)!==e)throw D(e,r),new I.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new I.ERR_BUFFER_OUT_OF_BOUNDS;throw new I.ERR_OUT_OF_RANGE(r||"offset",`>= ${+!!r} and <= ${t}`,e)}U("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),U("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),U("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>0x100000000?i=j(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=j(i)),i+="n"),n+=` It must be ${t}. Received ${i}`},RangeError);let B=/[^+/0-9A-Za-z-_]/g;function P(e,t){let r;t=t||1/0;let n=e.length,i=null,s=[];for(let o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319||o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function O(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function M(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function L(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let F=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function N(e){return"undefined"==typeof BigInt?V:e}function V(){throw Error("BigInt not supported")}},{"9c62938f1dccc73c":"5KmMx",aceacb6a4531a9d2:"9I9TM"}],"5KmMx":[function(e,t,r,n){"use strict";r.byteLength=function(e){var t=h(e),r=t[0],n=t[1];return(r+n)*3/4-n},r.toByteArray=function(e){var t,r,n=h(e),i=n[0],a=n[1],l=new o((i+a)*3/4-a),c=0,u=a>0?i-4:i;for(r=0;r<u;r+=4)t=s[e.charCodeAt(r)]<<18|s[e.charCodeAt(r+1)]<<12|s[e.charCodeAt(r+2)]<<6|s[e.charCodeAt(r+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===a&&(t=s[e.charCodeAt(r)]<<2|s[e.charCodeAt(r+1)]>>4,l[c++]=255&t),1===a&&(t=s[e.charCodeAt(r)]<<10|s[e.charCodeAt(r+1)]<<4|s[e.charCodeAt(r+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},r.fromByteArray=function(e){for(var t,r=e.length,n=r%3,s=[],o=0,a=r-n;o<a;o+=16383)s.push(function(e,t,r){for(var n,s=[],o=t;o<r;o+=3)n=(e[o]<<16&0xff0000)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(i[n>>18&63]+i[n>>12&63]+i[n>>6&63]+i[63&n]);return s.join("")}(e,o,o+16383>a?a:o+16383));return 1===n?s.push(i[(t=e[r-1])>>2]+i[t<<4&63]+"=="):2===n&&s.push(i[(t=(e[r-2]<<8)+e[r-1])>>10]+i[t>>4&63]+i[t<<2&63]+"="),s.join("")};for(var i=[],s=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,c=a.length;l<c;++l)i[l]=a[l],s[a.charCodeAt(l)]=l;function h(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}s[45]=62,s[95]=63},{}],"9I9TM":[function(e,t,r,n){r.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,l=(1<<a)-1,c=l>>1,h=-7,u=r?i-1:0,d=r?-1:1,p=e[t+u];for(u+=d,s=p&(1<<-h)-1,p>>=-h,h+=a;h>0;s=256*s+e[t+u],u+=d,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=n;h>0;o=256*o+e[t+u],u+=d,h-=8);if(0===s)s=1-c;else{if(s===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),s-=c}return(p?-1:1)*o*Math.pow(2,s-n)},r.write=function(e,t,r,n,i,s){var o,a,l,c=8*s-i-1,h=(1<<c)-1,u=h>>1,d=5960464477539062e-23*(23===i),p=n?0:s-1,f=n?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(a=+!!isNaN(t),o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+u>=1?t+=d/l:t+=d*Math.pow(2,1-u),t*l>=2&&(o++,l/=2),o+u>=h?(a=0,o=h):o+u>=1?(a=(t*l-1)*Math.pow(2,i),o+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,i),o=0));i>=8;e[r+p]=255&a,p+=f,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;e[r+p]=255&o,p+=f,o/=256,c-=8);e[r+p-f]|=128*g}},{}],"8YiHn":[function(e,t,r,n){let i;var s=e("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(r),s.export(r,"isNode",()=>d),s.export(r,"isBrowser",()=>p),s.export(r,"isMac",()=>f),s.export(r,"hasParam",()=>y),s.export(r,"getParam",()=>w),s.export(r,"getVariable",()=>b),s.export(r,"getConf",()=>x),s.export(r,"ensureConf",()=>v),s.export(r,"hasConf",()=>C),s.export(r,"production",()=>_),s.export(r,"supportsColor",()=>E);var o=e("./map.js"),a=e("./string.js"),l=e("./conditions.js"),c=e("./storage.js"),h=e("./function.js"),u=e("2cfb8bcef1022e2a");let d=!1,p="undefined"!=typeof window&&"undefined"!=typeof document&&!d,f="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),g=[],m=()=>{if(void 0===i)if(d){i=o.create();let e=u.argv,t=null;for(let r=0;r<e.length;r++){let n=e[r];"-"===n[0]?(null!==t&&i.set(t,""),t=n):null!==t?(i.set(t,n),t=null):g.push(n)}null!==t&&i.set(t,"")}else"object"==typeof location?(i=o.create(),(location.search||"?").slice(1).split("&").forEach(e=>{if(0!==e.length){let[t,r]=e.split("=");i.set(`--${a.fromCamelCase(t,"-")}`,r),i.set(`-${a.fromCamelCase(t,"-")}`,r)}})):i=o.create();return i},y=e=>m().has(e),w=(e,t)=>m().get(e)||t,b=e=>d?l.undefinedToNull(u.env[e.toUpperCase().replaceAll("-","_")]):l.undefinedToNull(c.varStorage.getItem(e)),x=e=>m().get("--"+e)||b(e),v=e=>{let t=x(e);if(null==t)throw Error(`Expected configuration "${e.toUpperCase().replaceAll("-","_")}"`);return t},C=e=>y("--"+e)||null!==b(e),_=C("production"),E=d&&h.isOneOf(void 0,["true","1","2"])||!y("--no-colors")&&!C("no-color")&&(!d||u.stdout.isTTY)&&(!d||y("--color")||null!==b("COLORTERM")||(b("TERM")||"").includes("color"))},{"2cfb8bcef1022e2a":"eFuRA","./map.js":"gsPjK","./string.js":"l5ap6","./conditions.js":"4BJf1","./storage.js":"iLeaV","./function.js":"5S3AJ","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],eFuRA:[function(e,t,r,n){var i,s,o,a=t.exports={};function l(){throw Error("setTimeout has not been defined")}function c(){throw Error("clearTimeout has not been defined")}try{i="function"==typeof setTimeout?setTimeout:l}catch(e){i=l}try{s="function"==typeof clearTimeout?clearTimeout:c}catch(e){s=c}function h(e){if(i===setTimeout)return setTimeout(e,0);if((i===l||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}var u=[],d=!1,p=-1;function f(){d&&o&&(d=!1,o.length?u=o.concat(u):p=-1,u.length&&g())}function g(){if(!d){var e=h(f);d=!0;for(var t=u.length;t;){for(o=u,u=[];++p<t;)o&&o[p].run();p=-1,t=u.length}o=null,d=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===c||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function y(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new m(e,t)),1!==u.length||d||h(g)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=y,a.addListener=y,a.once=y,a.off=y,a.removeListener=y,a.removeAllListeners=y,a.emit=y,a.prependListener=y,a.prependOnceListener=y,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],"4BJf1":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"undefinedToNull",()=>s);let s=e=>void 0===e?null:e},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],iLeaV:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"varStorage",()=>a),i.export(r,"onChange",()=>l),i.export(r,"offChange",()=>c);let s=new class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}},o=!0;try{"undefined"!=typeof localStorage&&localStorage&&(s=localStorage,o=!1)}catch(e){}let a=s,l=e=>o||addEventListener("storage",e),c=e=>o||removeEventListener("storage",e)},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"5S3AJ":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"callAll",()=>a),i.export(r,"nop",()=>l),i.export(r,"apply",()=>c),i.export(r,"id",()=>h),i.export(r,"equalityStrict",()=>u),i.export(r,"equalityFlat",()=>d),i.export(r,"equalityDeep",()=>p),i.export(r,"isOneOf",()=>f),i.export(r,"isArray",()=>g),i.export(r,"isString",()=>m),i.export(r,"isNumber",()=>y),i.export(r,"is",()=>w),i.export(r,"isTemplate",()=>b);var s=e("./array.js"),o=e("./object.js");let a=(e,t,r=0)=>{try{for(;r<e.length;r++)e[r](...t)}finally{r<e.length&&a(e,t,r+1)}},l=()=>{},c=e=>e(),h=e=>e,u=(e,t)=>e===t,d=(e,t)=>e===t||null!=e&&null!=t&&e.constructor===t.constructor&&(s.isArray(e)&&s.equalFlat(e,t)||"object"==typeof e&&o.equalFlat(e,t)),p=(e,t)=>{if(null==e||null==t)return u(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;break;case Set:if(e.size!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;break;case Map:if(e.size!==t.size)return!1;for(let r of e.keys())if(!t.has(r)||!p(e.get(r),t.get(r)))return!1;break;case Object:if(o.length(e)!==o.length(t))return!1;for(let r in e)if(!o.hasProperty(e,r)||!p(e[r],t[r]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!p(e[r],t[r]))return!1;break;default:return!1}return!0},f=(e,t)=>t.includes(e),g=s.isArray,m=e=>e&&e.constructor===String,y=e=>null!=e&&e.constructor===Number,w=(e,t)=>e&&e.constructor===t,b=e=>t=>t&&t.constructor===e},{"./array.js":"kcR8B","./object.js":"eUSla","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],eUSla:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"create",()=>s),i.export(r,"assign",()=>o),i.export(r,"keys",()=>a),i.export(r,"forEach",()=>l),i.export(r,"map",()=>c),i.export(r,"length",()=>h),i.export(r,"size",()=>u),i.export(r,"some",()=>d),i.export(r,"isEmpty",()=>p),i.export(r,"every",()=>f),i.export(r,"hasProperty",()=>g),i.export(r,"equalFlat",()=>m),i.export(r,"freeze",()=>y),i.export(r,"deepFreeze",()=>w);let s=()=>Object.create(null),o=Object.assign,a=Object.keys,l=(e,t)=>{for(let r in e)t(e[r],r)},c=(e,t)=>{let r=[];for(let n in e)r.push(t(e[n],n));return r},h=e=>a(e).length,u=e=>a(e).length,d=(e,t)=>{for(let r in e)if(t(e[r],r))return!0;return!1},p=e=>{for(let t in e)return!1;return!0},f=(e,t)=>{for(let r in e)if(!t(e[r],r))return!1;return!0},g=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),m=(e,t)=>e===t||u(e)===u(t)&&f(e,(e,r)=>(void 0!==e||g(t,r))&&t[r]===e),y=Object.freeze,w=e=>{for(let t in e){let r=e[t];("object"==typeof r||"function"==typeof r)&&w(e[t])}return y(e)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],blwZs:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"BOLD",()=>p.BOLD),i.export(r,"UNBOLD",()=>p.UNBOLD),i.export(r,"BLUE",()=>p.BLUE),i.export(r,"GREY",()=>p.GREY),i.export(r,"GREEN",()=>p.GREEN),i.export(r,"RED",()=>p.RED),i.export(r,"PURPLE",()=>p.PURPLE),i.export(r,"ORANGE",()=>p.ORANGE),i.export(r,"UNCOLOR",()=>p.UNCOLOR),i.export(r,"print",()=>m),i.export(r,"warn",()=>y),i.export(r,"printError",()=>w),i.export(r,"printImg",()=>b),i.export(r,"printImgBase64",()=>x),i.export(r,"group",()=>v),i.export(r,"groupCollapsed",()=>C),i.export(r,"groupEnd",()=>_),i.export(r,"printDom",()=>E),i.export(r,"printCanvas",()=>S),i.export(r,"vconsoles",()=>T),i.export(r,"VConsole",()=>U),i.export(r,"createVConsole",()=>j),i.export(r,"createModuleLogger",()=>A);var s=e("./environment.js"),o=e("./set.js"),a=e("./pair.js"),l=e("./dom.js"),c=e("./json.js"),h=e("./map.js"),u=e("./eventloop.js"),d=e("./math.js"),p=e("./logging.common.js");let f={[p.BOLD]:a.create("font-weight","bold"),[p.UNBOLD]:a.create("font-weight","normal"),[p.BLUE]:a.create("color","blue"),[p.GREEN]:a.create("color","green"),[p.GREY]:a.create("color","grey"),[p.RED]:a.create("color","red"),[p.PURPLE]:a.create("color","purple"),[p.ORANGE]:a.create("color","orange"),[p.UNCOLOR]:a.create("color","black")},g=s.supportsColor?e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());let t=[],r=[],n=h.create(),i=[],s=0;for(;s<e.length;s++){let i=e[s],o=f[i];if(void 0!==o)n.set(o.left,o.right);else{if(void 0===i)break;if(i.constructor===String||i.constructor===Number){let e=l.mapToStyleString(n);s>0||e.length>0?(t.push("%c"+i),r.push(e)):t.push(i)}else break}}for(s>0&&(i=r).unshift(t.join(""));s<e.length;s++){let t=e[s];t instanceof Symbol||i.push(t)}return i}:p.computeNoColorLoggingArgs,m=(...e)=>{console.log(...g(e)),T.forEach(t=>t.print(e))},y=(...e)=>{console.warn(...g(e)),e.unshift(p.ORANGE),T.forEach(t=>t.print(e))},w=e=>{console.error(e),T.forEach(t=>t.printError(e))},b=(e,t)=>{s.isBrowser&&console.log("%c                      ",`font-size: ${t}px; background-size: contain; background-repeat: no-repeat; background-image: url(${e})`),T.forEach(r=>r.printImg(e,t))},x=(e,t)=>b(`data:image/gif;base64,${e}`,t),v=(...e)=>{console.group(...g(e)),T.forEach(t=>t.group(e))},C=(...e)=>{console.groupCollapsed(...g(e)),T.forEach(t=>t.groupCollapsed(e))},_=()=>{console.groupEnd(),T.forEach(e=>e.groupEnd())},E=e=>T.forEach(t=>t.printDom(e())),S=(e,t)=>b(e.toDataURL(),t),T=o.create(),k=e=>{let t=[],r=new Map,n=0;for(;n<e.length;n++){let i=e[n],s=f[i];if(void 0!==s)r.set(s.left,s.right);else if(void 0===i&&(i="undefined "),i.constructor===String||i.constructor===Number){let e=l.element("span",[a.create("style",l.mapToStyleString(r))],[l.text(i.toString())]);""===e.innerHTML&&(e.innerHTML="&nbsp;"),t.push(e)}else break}for(;n<e.length;n++){let r=e[n];r instanceof Symbol||(r.constructor!==String&&r.constructor!==Number&&(r=" "+c.stringify(r)+" "),t.push(l.element("span",[],[l.text(r)])))}return t},I="font-family:monospace;border-bottom:1px solid #e2e2e2;padding:2px;";class U{constructor(e){this.dom=e,this.ccontainer=this.dom,this.depth=0,T.add(this)}group(e,t=!1){u.enqueue(()=>{let r=l.element("span",[a.create("hidden",t),a.create("style","color:grey;font-size:120%;")],[l.text("")]),n=l.element("span",[a.create("hidden",!t),a.create("style","color:grey;font-size:125%;")],[l.text("")]),i=l.element("div",[a.create("style",`${I};padding-left:${10*this.depth}px`)],[r,n,l.text(" ")].concat(k(e))),s=l.element("div",[a.create("hidden",t)]),o=l.element("div",[],[i,s]);l.append(this.ccontainer,[o]),this.ccontainer=s,this.depth++,l.addEventListener(i,"click",e=>{s.toggleAttribute("hidden"),r.toggleAttribute("hidden"),n.toggleAttribute("hidden")})})}groupCollapsed(e){this.group(e,!0)}groupEnd(){u.enqueue(()=>{this.depth>0&&(this.depth--,this.ccontainer=this.ccontainer.parentElement.parentElement)})}print(e){u.enqueue(()=>{l.append(this.ccontainer,[l.element("div",[a.create("style",`${I};padding-left:${10*this.depth}px`)],k(e))])})}printError(e){this.print([p.RED,p.BOLD,e.toString()])}printImg(e,t){u.enqueue(()=>{l.append(this.ccontainer,[l.element("img",[a.create("src",e),a.create("height",`${d.round(1.5*t)}px`)])])})}printDom(e){u.enqueue(()=>{l.append(this.ccontainer,[e])})}destroy(){u.enqueue(()=>{T.delete(this)})}}let j=e=>new U(e),A=e=>p.createModuleLogger(m,e)},{"./environment.js":"8YiHn","./set.js":"5gNQm","./pair.js":"iKw8x","./dom.js":"dpUjQ","./json.js":"jGOoC","./map.js":"gsPjK","./eventloop.js":"hLEBe","./math.js":"icsnC","./logging.common.js":"6FeDb","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],iKw8x:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"Pair",()=>s),i.export(r,"create",()=>o),i.export(r,"createReversed",()=>a),i.export(r,"forEach",()=>l),i.export(r,"map",()=>c);class s{constructor(e,t){this.left=e,this.right=t}}let o=(e,t)=>new s(e,t),a=(e,t)=>new s(t,e),l=(e,t)=>e.forEach(e=>t(e.left,e.right)),c=(e,t)=>e.map(e=>t(e.left,e.right))},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],dpUjQ:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"doc",()=>a),i.export(r,"createElement",()=>l),i.export(r,"createDocumentFragment",()=>c),i.export(r,"createTextNode",()=>h),i.export(r,"domParser",()=>u),i.export(r,"emitCustomEvent",()=>d),i.export(r,"setAttributes",()=>p),i.export(r,"setAttributesMap",()=>f),i.export(r,"fragment",()=>g),i.export(r,"append",()=>m),i.export(r,"remove",()=>y),i.export(r,"addEventListener",()=>w),i.export(r,"removeEventListener",()=>b),i.export(r,"addEventListeners",()=>x),i.export(r,"removeEventListeners",()=>v),i.export(r,"element",()=>C),i.export(r,"canvas",()=>_),i.export(r,"text",()=>E),i.export(r,"pairToStyleString",()=>S),i.export(r,"pairsToStyleString",()=>T),i.export(r,"mapToStyleString",()=>k),i.export(r,"querySelector",()=>I),i.export(r,"querySelectorAll",()=>U),i.export(r,"getElementById",()=>j),i.export(r,"parseFragment",()=>A),i.export(r,"parseElement",()=>D),i.export(r,"replaceWith",()=>R),i.export(r,"insertBefore",()=>B),i.export(r,"appendChild",()=>P),i.export(r,"ELEMENT_NODE",()=>O),i.export(r,"TEXT_NODE",()=>M),i.export(r,"CDATA_SECTION_NODE",()=>L),i.export(r,"COMMENT_NODE",()=>F),i.export(r,"DOCUMENT_NODE",()=>N),i.export(r,"DOCUMENT_TYPE_NODE",()=>V),i.export(r,"DOCUMENT_FRAGMENT_NODE",()=>z),i.export(r,"checkNodeType",()=>$),i.export(r,"isParentOf",()=>W);var s=e("./pair.js"),o=e("./map.js");let a="undefined"!=typeof document?document:{},l=e=>a.createElement(e),c=()=>a.createDocumentFragment(),h=e=>a.createTextNode(e),u="undefined"!=typeof DOMParser?new DOMParser:null,d=(e,t,r)=>e.dispatchEvent(new CustomEvent(t,r)),p=(e,t)=>(s.forEach(t,(t,r)=>{!1===r?e.removeAttribute(t):!0===r?e.setAttribute(t,""):e.setAttribute(t,r)}),e),f=(e,t)=>(t.forEach((t,r)=>{e.setAttribute(r,t)}),e),g=e=>{let t=c();for(let r=0;r<e.length;r++)P(t,e[r]);return t},m=(e,t)=>(P(e,g(t)),e),y=e=>e.remove(),w=(e,t,r)=>e.addEventListener(t,r),b=(e,t,r)=>e.removeEventListener(t,r),x=(e,t)=>(s.forEach(t,(t,r)=>w(e,t,r)),e),v=(e,t)=>(s.forEach(t,(t,r)=>b(e,t,r)),e),C=(e,t=[],r=[])=>m(p(l(e),t),r),_=(e,t)=>{let r=l("canvas");return r.height=t,r.width=e,r},E=h,S=e=>`${e.left}:${e.right};`,T=e=>e.map(S).join(""),k=e=>o.map(e,(e,t)=>`${t}:${e};`).join(""),I=(e,t)=>e.querySelector(t),U=(e,t)=>e.querySelectorAll(t),j=e=>a.getElementById(e),A=e=>g(u.parseFromString(`<html><body>${e}</body></html>`,"text/html").body.childNodes),D=e=>u.parseFromString(`<html><body>${e}</body></html>`,"text/html").body.firstElementChild,R=(e,t)=>e.replaceWith(t),B=(e,t,r)=>e.insertBefore(t,r),P=(e,t)=>e.appendChild(t),O=a.ELEMENT_NODE,M=a.TEXT_NODE,L=a.CDATA_SECTION_NODE,F=a.COMMENT_NODE,N=a.DOCUMENT_NODE,V=a.DOCUMENT_TYPE_NODE,z=a.DOCUMENT_FRAGMENT_NODE,$=(e,t)=>e.nodeType===t,W=(e,t)=>{let r=t.parentNode;for(;r&&r!==e;)r=r.parentNode;return r===e}},{"./pair.js":"iKw8x","./map.js":"gsPjK","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],jGOoC:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"stringify",()=>s),i.export(r,"parse",()=>o);let s=JSON.stringify,o=JSON.parse},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],hLEBe:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"enqueue",()=>l),i.export(r,"timeout",()=>u),i.export(r,"interval",()=>p),i.export(r,"Animation",()=>f),i.export(r,"animationFrame",()=>g),i.export(r,"idleCallback",()=>y),i.export(r,"createDebouncer",()=>w);var s=e("./time.js");let o=[],a=()=>{for(let e=0;e<o.length;e++)o[e]();o=[]},l=e=>{o.push(e),1===o.length&&setTimeout(a,0)},c=e=>class{constructor(e){this._=e}destroy(){e(this._)}},h=c(clearTimeout),u=(e,t)=>new h(setTimeout(t,e)),d=c(clearInterval),p=(e,t)=>new d(setInterval(t,e)),f=c(e=>"undefined"!=typeof requestAnimationFrame&&cancelAnimationFrame(e)),g=e=>"undefined"==typeof requestAnimationFrame?u(0,e):new f(requestAnimationFrame(e)),m=c(e=>"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(e)),y=e=>"undefined"!=typeof requestIdleCallback?new m(requestIdleCallback(e)):u(1e3,e),w=(e,t=-1)=>{let r=-1,n=null;return i=>{if(clearTimeout(r),i){if(t>=0){let e=s.getUnixTime();if(null===n&&(n=e),e-n>t){n=null,r=setTimeout(i,0);return}}r=setTimeout(()=>{n=null,i()},e)}else n=null}}},{"./time.js":"b6cMp","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"6FeDb":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"BOLD",()=>h),i.export(r,"UNBOLD",()=>u),i.export(r,"BLUE",()=>d),i.export(r,"GREY",()=>p),i.export(r,"GREEN",()=>f),i.export(r,"RED",()=>g),i.export(r,"PURPLE",()=>m),i.export(r,"ORANGE",()=>y),i.export(r,"UNCOLOR",()=>w),i.export(r,"computeNoColorLoggingArgs",()=>b),i.export(r,"createModuleLogger",()=>_);var s=e("./symbol.js"),o=e("./time.js"),a=e("./environment.js"),l=e("./function.js"),c=e("./json.js");let h=s.create(),u=s.create(),d=s.create(),p=s.create(),f=s.create(),g=s.create(),m=s.create(),y=s.create(),w=s.create(),b=e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());let t=[],r=[],n=0;for(;n<e.length;n++){let r=e[n];if(void 0===r)break;if(r.constructor===String||r.constructor===Number)t.push(r);else if(r.constructor===Object)break}for(n>0&&r.push(t.join(""));n<e.length;n++){let t=e[n];t instanceof Symbol||r.push(t)}return r},x=[f,m,y,d],v=0,C=o.getUnixTime(),_=(e,t)=>{let r=x[v],n=a.getVariable("log"),i=null!==n&&("*"===n||"true"===n||RegExp(n,"gi").test(t));return v=(v+1)%x.length,t+=": ",i?(...n)=>{1===n.length&&n[0]?.constructor===Function&&(n=n[0]());let i=o.getUnixTime(),s=i-C;C=i,e(r,t,w,...n.map(e=>{switch(null!=e&&e.constructor===Uint8Array&&(e=Array.from(e)),typeof e){case"string":case"symbol":return e;default:return c.stringify(e)}}),r," +"+s+"ms")}:l.nop}},{"./symbol.js":"b8AcA","./time.js":"b6cMp","./environment.js":"8YiHn","./function.js":"5S3AJ","./json.js":"jGOoC","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],b8AcA:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"create",()=>s),i.export(r,"isSymbol",()=>o);let s=Symbol,o=e=>"symbol"==typeof e},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],dOXgT:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"mapIterator",()=>s),i.export(r,"createIterator",()=>o),i.export(r,"iteratorFilter",()=>a),i.export(r,"iteratorMap",()=>l);let s=(e,t)=>({[Symbol.iterator](){return this},next(){let r=e.next();return{value:r.done?void 0:t(r.value),done:r.done}}}),o=e=>({[Symbol.iterator](){return this},next:e}),a=(e,t)=>o(()=>{let r;do r=e.next();while(!r.done&&!t(r.value))return r}),l=(e,t)=>o(()=>{let{done:r,value:n}=e.next();return{done:r,value:r?void 0:t(n)}})},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],jCq4q:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"Packr",()=>s.Packr),i.export(r,"Encoder",()=>s.Encoder),i.export(r,"addExtension",()=>s.addExtension),i.export(r,"pack",()=>s.pack),i.export(r,"encode",()=>s.encode),i.export(r,"NEVER",()=>s.NEVER),i.export(r,"ALWAYS",()=>s.ALWAYS),i.export(r,"DECIMAL_ROUND",()=>s.DECIMAL_ROUND),i.export(r,"DECIMAL_FIT",()=>s.DECIMAL_FIT),i.export(r,"REUSE_BUFFER_MODE",()=>s.REUSE_BUFFER_MODE),i.export(r,"RESET_BUFFER_MODE",()=>s.RESET_BUFFER_MODE),i.export(r,"RESERVE_START_SPACE",()=>s.RESERVE_START_SPACE),i.export(r,"Unpackr",()=>o.Unpackr),i.export(r,"Decoder",()=>o.Decoder),i.export(r,"C1",()=>o.C1),i.export(r,"unpack",()=>o.unpack),i.export(r,"unpackMultiple",()=>o.unpackMultiple),i.export(r,"decode",()=>o.decode),i.export(r,"FLOAT32_OPTIONS",()=>o.FLOAT32_OPTIONS),i.export(r,"clearSource",()=>o.clearSource),i.export(r,"roundFloat32",()=>o.roundFloat32),i.export(r,"isNativeAccelerationEnabled",()=>o.isNativeAccelerationEnabled),i.export(r,"decodeIter",()=>a.decodeIter),i.export(r,"encodeIter",()=>a.encodeIter),i.export(r,"useRecords",()=>l),i.export(r,"mapsAsObjects",()=>c);var s=e("./pack.js"),o=e("./unpack.js"),a=e("./iterators.js");let l=!1,c=!0},{"./pack.js":"1Gqa1","./unpack.js":"34MFG","./iterators.js":"737vE","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"1Gqa1":[function(e,t,r,n){let i,s,o,a,l,c,h,u;var d=e("@parcel/transformer-js/src/esmodule-helpers.js");d.defineInteropFlag(r),d.export(r,"FLOAT32_OPTIONS",()=>p.FLOAT32_OPTIONS),d.export(r,"RECORD_SYMBOL",()=>C),d.export(r,"Packr",()=>_),d.export(r,"addExtension",()=>k),d.export(r,"setWriteStructSlots",()=>U),d.export(r,"pack",()=>A),d.export(r,"encode",()=>D),d.export(r,"Encoder",()=>R),d.export(r,"NEVER",()=>B),d.export(r,"ALWAYS",()=>P),d.export(r,"DECIMAL_ROUND",()=>O),d.export(r,"DECIMAL_FIT",()=>M),d.export(r,"REUSE_BUFFER_MODE",()=>L),d.export(r,"RESET_BUFFER_MODE",()=>F),d.export(r,"RESERVE_START_SPACE",()=>N);var p=e("./unpack.js"),f=e("d39b59f28483d155").Buffer;try{i=new TextEncoder}catch(e){}let g=void 0!==f,m=g?function(e){return f.allocUnsafeSlow(e)}:Uint8Array,y=g?f:Uint8Array,w=g?0x100000000:0x7fd00000,b=0,x=null,v=/[\u0080-\uFFFF]/,C=Symbol("record-id");class _ extends p.Unpackr{constructor(e){let t,r,n,d;super(e),this.offset=0;let f=y.prototype.utf8Write?function(e,t){return a.utf8Write(e,t,a.byteLength-t)}:!!i&&!!i.encodeInto&&function(e,t){return i.encodeInto(e,a.subarray(t)).written},g=this;e||(e={});let _=e&&e.sequential,E=e.structures||e.saveStructures,S=e.maxSharedStructures;if(null==S&&(S=32*!!E),S>8160)throw Error("Maximum maxSharedStructure is 8160");e.structuredClone&&void 0==e.moreTypes&&(this.moreTypes=!0);let k=e.maxOwnStructures;null==k&&(k=E?32:64),this.structures||!1==e.useRecords||(this.structures=[]);let U=S>32||k+S>64,j=S+64,A=S+k+64;if(A>8256)throw Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let D=[],R=0,B=0;this.pack=this.encode=function(e,i){let s;if(a||(c=(a=new m(8192)).dataView||(a.dataView=new DataView(a.buffer,0,8192)),b=0),(h=a.length-10)-b<2048?(c=(a=new m(a.length)).dataView||(a.dataView=new DataView(a.buffer,0,a.length)),h=a.length-10,b=0):b=b+7&0x7ffffff8,t=b,i&N&&(b+=255&i),d=g.structuredClone?new Map:null,g.bundleStrings&&"string"!=typeof e?(x=[]).size=1/0:x=null,n=g.structures){n.uninitialized&&(n=g._mergeStructures(g.getStructures()));let e=n.sharedLength||0;if(e>S)throw Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+n.sharedLength);if(!n.transitions){n.transitions=Object.create(null);for(let t=0;t<e;t++){let e=n[t];if(!e)continue;let r,i=n.transitions;for(let t=0,n=e.length;t<n;t++){let n=e[t];(r=i[n])||(r=i[n]=Object.create(null)),i=r}i[C]=t+64}this.lastNamedStructuresLength=e}_||(n.nextId=e+64)}r&&(r=!1);try{g.randomAccessStructure&&e&&e.constructor&&e.constructor===Object?q(e):M(e);let r=x;if(x&&T(t,M,0),d&&d.idsToInsert){let e=d.idsToInsert.sort((e,t)=>e.offset>t.offset?1:-1),n=e.length,i=-1;for(;r&&n>0;){let s=e[--n].offset+t;s<r.stringsPosition+t&&-1===i&&(i=0),s>r.position+t?i>=0&&(i+=6):(i>=0&&(c.setUint32(r.position+t,c.getUint32(r.position+t)+i),i=-1),r=r.previous,n++)}i>=0&&r&&c.setUint32(r.position+t,c.getUint32(r.position+t)+i),(b+=6*e.length)>h&&G(b),g.offset=b;let s=function(e,t){let r,n=6*t.length,i=e.length-n;for(;r=t.pop();){let t=r.offset,s=r.id;e.copyWithin(t+n,t,i);let o=t+(n-=6);e[o++]=214,e[o++]=105,e[o++]=s>>24,e[o++]=s>>16&255,e[o++]=s>>8&255,e[o++]=255&s,i=t}return e}(a.subarray(t,b),e);return d=null,s}if(g.offset=b,i&L)return a.start=t,a.end=b,a;return a.subarray(t,b)}catch(e){throw s=e,e}finally{if(n&&(P(),r&&g.saveStructures)){let r=n.sharedLength||0,o=a.subarray(t,b),l=I(n,g);if(!s){if(!1===g.saveStructures(l,l.isCompatible))return g.pack(e,i);return g.lastNamedStructuresLength=r,a.length>0x40000000&&(a=null),o}}a.length>0x40000000&&(a=null),i&F&&(b=t)}};let P=()=>{B<10&&B++;let e=n.sharedLength||0;if(n.length>e&&!_&&(n.length=e),R>1e4)n.transitions=null,B=0,R=0,D.length>0&&(D=[]);else if(D.length>0&&!_){for(let e=0,t=D.length;e<t;e++)D[e][C]=0;D=[]}},O=e=>{var t=e.length;t<16?a[b++]=144|t:t<65536?(a[b++]=220,a[b++]=t>>8,a[b++]=255&t):(a[b++]=221,c.setUint32(b,t),b+=4);for(let r=0;r<t;r++)M(e[r])},M=e=>{b>h&&(a=G(b));var r,n=typeof e;if("string"===n){let n,i=e.length;if(x&&i>=4&&i<4096){if((x.size+=i)>21760){let e,r,n=(x[0]?3*x[0].length+x[1].length:0)+10;b+n>h&&(a=G(b+n)),x.position?(r=x,a[b]=200,b+=3,a[b++]=98,e=b-t,b+=4,T(t,M,0),c.setUint16(e+t-3,b-t-e)):(a[b++]=214,a[b++]=98,e=b-t,b+=4),(x=["",""]).previous=r,x.size=0,x.position=e}let r=v.test(e);x[+!r]+=e,a[b++]=193,M(r?-i:i);return}n=i<32?1:i<256?2:i<65536?3:5;let s=3*i;if(b+s>h&&(a=G(b+s)),i<64||!f){let t,s,o,l=b+n;for(t=0;t<i;t++)(s=e.charCodeAt(t))<128?a[l++]=s:(s<2048?a[l++]=s>>6|192:((64512&s)==55296&&(64512&(o=e.charCodeAt(t+1)))==56320?(s=65536+((1023&s)<<10)+(1023&o),t++,a[l++]=s>>18|240,a[l++]=s>>12&63|128):a[l++]=s>>12|224,a[l++]=s>>6&63|128),a[l++]=63&s|128);r=l-b-n}else r=f(e,b+n);r<32?a[b++]=160|r:r<256?(n<2&&a.copyWithin(b+2,b+1,b+1+r),a[b++]=217,a[b++]=r):r<65536?(n<3&&a.copyWithin(b+3,b+2,b+2+r),a[b++]=218,a[b++]=r>>8,a[b++]=255&r):(n<5&&a.copyWithin(b+5,b+3,b+3+r),a[b++]=219,c.setUint32(b,r),b+=4),b+=r}else if("number"===n)if(e>>>0===e)e<32||e<128&&!1===this.useRecords||e<64&&!this.randomAccessStructure?a[b++]=e:e<256?(a[b++]=204,a[b++]=e):e<65536?(a[b++]=205,a[b++]=e>>8,a[b++]=255&e):(a[b++]=206,c.setUint32(b,e),b+=4);else if((0|e)===e)e>=-32?a[b++]=256+e:e>=-128?(a[b++]=208,a[b++]=e+256):e>=-32768?(a[b++]=209,c.setInt16(b,e),b+=2):(a[b++]=210,c.setInt32(b,e),b+=4);else{let t;if((t=this.useFloat32)>0&&e<0x100000000&&e>=-0x80000000){let r;if(a[b++]=202,c.setFloat32(b,e),t<4||(0|(r=e*p.mult10[(127&a[b])<<1|a[b+1]>>7]))===r){b+=4;return}b--}a[b++]=203,c.setFloat64(b,e),b+=8}else if("object"===n||"function"===n)if(e){if(d){let r=d.get(e);if(r){r.id||(r.id=(d.idsToInsert||(d.idsToInsert=[])).push(r)),a[b++]=214,a[b++]=112,c.setUint32(b,r.id),b+=4;return}d.set(e,{offset:b-t})}let i=e.constructor;if(i===Object)W(e);else if(i===Array)O(e);else if(i===Map)if(this.mapAsEmptyObject)a[b++]=128;else for(let[t,n]of((r=e.size)<16?a[b++]=128|r:r<65536?(a[b++]=222,a[b++]=r>>8,a[b++]=255&r):(a[b++]=223,c.setUint32(b,r),b+=4),e))M(t),M(n);else{for(let t=0,r=s.length;t<r;t++)if(e instanceof o[t]){let r,n=s[t];if(n.write){n.type&&(a[b++]=212,a[b++]=n.type,a[b++]=0);let t=n.write.call(this,e);t===e?Array.isArray(e)?O(e):W(e):M(t);return}let i=a,o=c,l=b;a=null;try{r=n.pack.call(this,e,e=>(a=i,i=null,(b+=e)>h&&G(b),{target:a,targetView:c,position:b-e}),M)}finally{i&&(a=i,c=o,b=l,h=a.length-10)}r&&(r.length+b>h&&G(r.length+b),b=function(e,t,r,n){let i=e.length;switch(i){case 1:t[r++]=212;break;case 2:t[r++]=213;break;case 4:t[r++]=214;break;case 8:t[r++]=215;break;case 16:t[r++]=216;break;default:i<256?(t[r++]=199,t[r++]=i):(i<65536?(t[r++]=200,t[r++]=i>>8):(t[r++]=201,t[r++]=i>>24,t[r++]=i>>16&255,t[r++]=i>>8&255),t[r++]=255&i)}return t[r++]=n,t.set(e,r),r+=i}(r,a,b,n.type));return}if(Array.isArray(e))O(e);else{if(e.toJSON){let t=e.toJSON();if(t!==e)return M(t)}if("function"===n)return M(this.writeFunction&&this.writeFunction(e));W(e)}}}else a[b++]=192;else if("boolean"===n)a[b++]=e?195:194;else if("bigint"===n){if(e<0x8000000000000000&&e>=-0x8000000000000000)a[b++]=211,c.setBigInt64(b,e);else if(e<0xffffffffffffffff&&e>0)a[b++]=207,c.setBigUint64(b,e);else if(this.largeBigIntToFloat)a[b++]=203,c.setFloat64(b,Number(e));else if(this.largeBigIntToString)return M(e.toString());else if((this.useBigIntExtension||this.moreTypes)&&e<BigInt(2)**BigInt(1023)&&e>-(BigInt(2)**BigInt(1023))){let t;a[b++]=199,b++,a[b++]=66;let r=[];do{let n=e&BigInt(255);t=(n&BigInt(128))===(e<BigInt(0)?BigInt(128):BigInt(0)),r.push(n),e>>=BigInt(8)}while(!((e===BigInt(0)||e===BigInt(-1))&&t))a[b-2]=r.length;for(let e=r.length;e>0;)a[b++]=Number(r[--e]);return}else throw RangeError(e+" was too large to fit in MessagePack 64-bit integer format, use useBigIntExtension, or set largeBigIntToFloat to convert to float-64, or set largeBigIntToString to convert to string");b+=8}else if("undefined"===n)this.encodeUndefinedAsNil?a[b++]=192:(a[b++]=212,a[b++]=0,a[b++]=0);else throw Error("Unknown type: "+n)},V=this.variableMapSize||this.coercibleKeyAsNumber||this.skipValues?e=>{let t,r;if(this.skipValues)for(let r in t=[],e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(r))&&!this.skipValues.includes(e[r])&&t.push(r);else t=Object.keys(e);let n=t.length;if(n<16?a[b++]=128|n:n<65536?(a[b++]=222,a[b++]=n>>8,a[b++]=255&n):(a[b++]=223,c.setUint32(b,n),b+=4),this.coercibleKeyAsNumber)for(let i=0;i<n;i++){let n=Number(r=t[i]);M(isNaN(n)?r:n),M(e[r])}else for(let i=0;i<n;i++)M(r=t[i]),M(e[r])}:e=>{a[b++]=222;let r=b-t;b+=2;let n=0;for(let t in e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(t))&&(M(t),M(e[t]),n++);if(n>65535)throw Error('Object is too large to serialize with fast 16-bit map size, use the "variableMapSize" option to serialize this object');a[r+++t]=n>>8,a[r+t]=255&n},z=!1===this.useRecords?V:e.progressiveRecords&&!U?e=>{let r,i,s=n.transitions||(n.transitions=Object.create(null)),o=b++-t;for(let a in e)if("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(a)){if(i=s[a])s=i;else{let l=Object.keys(e),c=s;s=n.transitions;let h=0;for(let e=0,t=l.length;e<t;e++){let t=l[e];!(i=s[t])&&(i=s[t]=Object.create(null),h++),s=i}o+t+1==b?(b--,J(s,l,h)):H(s,l,o,h),r=!0,s=c[a]}M(e[a])}if(!r){let r=s[C];r?a[o+t]=r:H(s,Object.keys(e),o,0)}}:e=>{let t,r=n.transitions||(n.transitions=Object.create(null)),i=0;for(let n in e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(n))&&(!(t=r[n])&&(t=r[n]=Object.create(null),i++),r=t);let s=r[C];for(let t in s?s>=96&&U?(a[b++]=(31&(s-=96))+96,a[b++]=s>>5):a[b++]=s:J(r,r.__keys__||Object.keys(e),i),e)("function"!=typeof e.hasOwnProperty||e.hasOwnProperty(t))&&M(e[t])},$="function"==typeof this.useRecords&&this.useRecords,W=$?e=>{$(e)?z(e):V(e)}:z,G=e=>{let r;if(e>0x1000000){if(e-t>w)throw Error("Packed buffer would be larger than maximum buffer size");r=Math.min(w,4096*Math.round(Math.max((e-t)*(e>0x4000000?1.25:2),4194304)/4096))}else r=(Math.max(e-t<<2,a.length-1)>>12)+1<<12;let n=new m(r);return c=n.dataView||(n.dataView=new DataView(n.buffer,0,r)),e=Math.min(e,a.length),a.copy?a.copy(n,0,t,e):n.set(a.slice(t,e)),b-=t,t=0,h=n.length-10,a=n},J=(e,t,i)=>{let s=n.nextId;s||(s=64),s<j&&this.shouldShareStructure&&!this.shouldShareStructure(t)?((s=n.nextOwnId)<A||(s=j),n.nextOwnId=s+1):(s>=A&&(s=j),n.nextId=s+1);let o=t.highByte=s>=96&&U?s-96>>5:-1;e[C]=s,e.__keys__=t,n[s-64]=t,s<j?(t.isShared=!0,n.sharedLength=s-63,r=!0,o>=0?(a[b++]=(31&s)+96,a[b++]=o):a[b++]=s):(o>=0?(a[b++]=213,a[b++]=114,a[b++]=(31&s)+96,a[b++]=o):(a[b++]=212,a[b++]=114,a[b++]=s),i&&(R+=B*i),D.length>=k&&(D.shift()[C]=0),D.push(e),M(t))},H=(e,r,n,i)=>{let s=a,o=b,c=h,u=t;b=0,t=0,(a=l)||(l=a=new m(8192)),h=a.length-10,J(e,r,i),l=a;let d=b;if(a=s,b=o,h=c,t=u,d>1){let e=b+d-1;e>h&&G(e);let r=n+t;a.copyWithin(r+d,r+1,b),a.set(l.slice(0,d),r),b=e}else a[n+t]=l[0]},q=e=>{let i=u(e,a,t,b,n,G,(e,t,n)=>{if(n)return r=!0;b=t;let i=a;return(M(e),P(),i!==a)?{position:b,targetView:c,target:a}:b},this);if(0===i)return W(e);b=i}}useBuffer(e){(a=e).dataView||(a.dataView=new DataView(a.buffer,a.byteOffset,a.byteLength)),b=0}set position(e){b=e}get position(){return b}clearSharedData(){this.structures&&(this.structures=[]),this.typedStructs&&(this.typedStructs=[])}}function E(e,t,r,n){let i=e.byteLength;if(i+1<256){var{target:s,position:o}=r(4+i);s[o++]=199,s[o++]=i+1}else if(i+1<65536){var{target:s,position:o}=r(5+i);s[o++]=200,s[o++]=i+1>>8,s[o++]=i+1&255}else{var{target:s,position:o,targetView:a}=r(7+i);s[o++]=201,a.setUint32(o,i+1),o+=4}s[o++]=116,s[o++]=t,e.buffer||(e=new Uint8Array(e)),s.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o)}function S(e,t){let r=e.byteLength;if(r<256){var n,i,{target:n,position:i}=t(r+2);n[i++]=196,n[i++]=r}else if(r<65536){var{target:n,position:i}=t(r+3);n[i++]=197,n[i++]=r>>8,n[i++]=255&r}else{var{target:n,position:i,targetView:s}=t(r+5);n[i++]=198,s.setUint32(i,r),i+=4}n.set(e,i)}function T(e,t,r){if(x.length>0){c.setUint32(x.position+e,b+r-x.position-e),x.stringsPosition=b-e;let n=x;x=null,t(n[0]),t(n[1])}}function k(e){if(e.Class){if(!e.pack&&!e.write)throw Error("Extension has no pack or write function");if(e.pack&&!e.type)throw Error("Extension has no type (numeric code to identify the extension)");o.unshift(e.Class),s.unshift(e)}(0,p.addExtension)(e)}function I(e,t){return e.isCompatible=e=>{let r=!e||(t.lastNamedStructuresLength||0)===e.length;return r||t._mergeStructures(e),r},e}function U(e,t){u=e,I=t}o=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,DataView,p.C1Type],s=[{pack(e,t,r){let n=e.getTime()/1e3;if((this.useTimestamp32||0===e.getMilliseconds())&&n>=0&&n<0x100000000){let{target:e,targetView:r,position:i}=t(6);e[i++]=214,e[i++]=255,r.setUint32(i,n)}else if(n>0&&n<0x100000000){let{target:r,targetView:i,position:s}=t(10);r[s++]=215,r[s++]=255,i.setUint32(s,4e6*e.getMilliseconds()+(n/1e3/0x100000000|0)),i.setUint32(s+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return t(0),r(this.onInvalidDate());let{target:e,targetView:n,position:i}=t(3);e[i++]=212,e[i++]=255,e[i++]=255}else{let{target:r,targetView:i,position:s}=t(15);r[s++]=199,r[s++]=12,r[s++]=255,i.setUint32(s,1e6*e.getMilliseconds()),i.setBigInt64(s+4,BigInt(Math.floor(n)))}}},{pack(e,t,r){if(this.setAsEmptyObject)return t(0),r({});let n=Array.from(e),{target:i,position:s}=t(3*!!this.moreTypes);this.moreTypes&&(i[s++]=212,i[s++]=115,i[s++]=0),r(n)}},{pack(e,t,r){let{target:n,position:i}=t(3*!!this.moreTypes);this.moreTypes&&(n[i++]=212,n[i++]=101,n[i++]=0),r([e.name,e.message,e.cause])}},{pack(e,t,r){let{target:n,position:i}=t(3*!!this.moreTypes);this.moreTypes&&(n[i++]=212,n[i++]=120,n[i++]=0),r([e.source,e.flags])}},{pack(e,t){this.moreTypes?E(e,16,t):S(g?f.from(e):new Uint8Array(e),t)}},{pack(e,t){let r=e.constructor;r!==y&&this.moreTypes?E(e,p.typedArrays.indexOf(r.name),t):S(e,t)}},{pack(e,t){this.moreTypes?E(e,17,t):S(g?f.from(e):new Uint8Array(e),t)}},{pack(e,t){let{target:r,position:n}=t(1);r[n]=193}}];let j=new _({useRecords:!1}),A=j.pack,D=j.pack,R=_,{NEVER:B,ALWAYS:P,DECIMAL_ROUND:O,DECIMAL_FIT:M}=p.FLOAT32_OPTIONS,L=512,F=1024,N=2048},{d39b59f28483d155:"b48lF","./unpack.js":"34MFG","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"34MFG":[function(e,t,r,n){var i,s,o,a,l,c,h,u,d,p,f,g=e("@parcel/transformer-js/src/esmodule-helpers.js");g.defineInteropFlag(r),g.export(r,"C1Type",()=>T),g.export(r,"C1",()=>k),g.export(r,"Unpackr",()=>j),g.export(r,"getPosition",()=>A),g.export(r,"checkedRead",()=>D),g.export(r,"read",()=>B),g.export(r,"loadStructures",()=>L),g.export(r,"isNativeAccelerationEnabled",()=>$),g.export(r,"setExtractor",()=>W),g.export(r,"readString",()=>J),g.export(r,"typedArrays",()=>eo),g.export(r,"clearSource",()=>eh),g.export(r,"addExtension",()=>eu),g.export(r,"mult10",()=>ed),g.export(r,"Decoder",()=>ep),g.export(r,"unpack",()=>eg),g.export(r,"unpackMultiple",()=>em),g.export(r,"decode",()=>ey),g.export(r,"FLOAT32_OPTIONS",()=>ew),g.export(r,"roundFloat32",()=>ev),g.export(r,"setReadStruct",()=>eC);var m=e("b5a1b40c14b71778").Buffer;try{i=new TextDecoder}catch(e){}var y=0;let w=[];var b=w,x=0,v={},C=0,_=0,E=[],S={useRecords:!1,mapsAsObjects:!0};class T{}let k=new T;k.name="MessagePack 0xC1";var I=!1,U=2;try{Function("")}catch(e){U=1/0}class j{constructor(e){e&&(!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),e.sequential&&!1!==e.trusted&&(e.trusted=!0,!e.structures&&!1!=e.useRecords&&(e.structures=[],e.maxSharedStructures||(e.maxSharedStructures=0))),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0),e.int64AsNumber&&(e.int64AsType="number")),Object.assign(this,e)}unpack(e,t){if(s)return ec(()=>(eh(),this?this.unpack(e,t):j.prototype.unpack.call(S,e,t)));e.buffer||e.constructor!==ArrayBuffer||(e=void 0!==m?m.from(e):new Uint8Array(e)),"object"==typeof t?(o=t.end||e.length,y=t.start||0):(y=0,o=t>-1?t:e.length),x=0,_=0,l=null,b=w,c=null,s=e;try{u=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(t){if(s=null,e instanceof Uint8Array)throw t;throw Error("Source must be a Uint8Array or Buffer but was a "+(e&&"object"==typeof e?e.constructor.name:typeof e))}return this instanceof j?(v=this,this.structures?a=this.structures:(!a||a.length>0)&&(a=[])):(v=S,(!a||a.length>0)&&(a=[])),D(t)}unpackMultiple(e,t){let r,n=0;try{I=!0;let i=e.length,s=this?this.unpack(e,i):ef.unpack(e,i);if(t){if(!1===t(s,n,y))return;for(;y<i;)if(n=y,!1===t(D(),n,y))return}else{for(r=[s];y<i;)n=y,r.push(D());return r}}catch(e){throw e.lastPosition=n,e.values=r,e}finally{I=!1,eh()}}_mergeStructures(e,t){p&&(e=p.call(this,e)),Object.isFrozen(e=e||[])&&(e=e.map(e=>e.slice(0)));for(let t=0,r=e.length;t<r;t++){let r=e[t];r&&(r.isShared=!0,t>=32&&(r.highByte=t-32>>5))}for(let r in e.sharedLength=e.length,t||[])if(r>=0){let n=e[r],i=t[r];i&&(n&&((e.restoreStructures||(e.restoreStructures=[]))[r]=n),e[r]=i)}return this.structures=e}decode(e,t){return this.unpack(e,t)}}function A(){return y}function D(e){try{let t;if(!v.trusted&&!I){let e=a.sharedLength||0;e<a.length&&(a.length=e)}if(v.randomAccessStructure&&s[y]<64&&s[y]>=32&&d?(t=d(s,y,o,v),s=null,!(e&&e.lazy)&&t&&(t=t.toJSON()),y=o):t=B(),c&&(y=c.postBundlePosition,c=null),I&&(a.restoreStructures=null),y==o)a&&a.restoreStructures&&R(),a=null,s=null,h&&(h=null);else if(y>o)throw Error("Unexpected end of MessagePack data");else if(!I){let e;try{e=JSON.stringify(t,(e,t)=>"bigint"==typeof t?`${t}n`:t).slice(0,100)}catch(t){e="(JSON view not available "+t+")"}throw Error("Data read, but end of buffer not reached "+e)}return t}catch(e){throw a&&a.restoreStructures&&R(),eh(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")||y>o)&&(e.incomplete=!0),e}}function R(){for(let e in a.restoreStructures)a[e]=a.restoreStructures[e];a.restoreStructures=null}function B(){let e=s[y++];if(e<160)if(e<128)if(e<64)return e;else{let t=a[63&e]||v.getStructures&&L()[63&e];return t?(t.read||(t.read=O(t,63&e)),t.read()):e}else if(e<144){if(e-=128,v.mapsAsObjects){let t={};for(let r=0;r<e;r++){let e=er();"__proto__"===e&&(e="__proto_"),t[e]=B()}return t}{let t=new Map;for(let r=0;r<e;r++)t.set(B(),B());return t}}else{let t=Array(e-=144);for(let r=0;r<e;r++)t[r]=B();return v.freezeData?Object.freeze(t):t}if(e<192){let t=e-160;if(_>=y)return l.slice(y-C,(y+=t)-C);if(0==_&&o<140){let e=t<16?X(t):K(t);if(null!=e)return e}return F(t)}{let t;switch(e){case 192:return null;case 193:if(c){if((t=B())>0)return c[1].slice(c.position1,c.position1+=t);return c[0].slice(c.position0,c.position0-=t)}return k;case 194:return!1;case 195:return!0;case 196:if(void 0===(t=s[y++]))throw Error("Unexpected end of buffer");return Q(t);case 197:return t=u.getUint16(y),y+=2,Q(t);case 198:return t=u.getUint32(y),y+=4,Q(t);case 199:return ee(s[y++]);case 200:return t=u.getUint16(y),y+=2,ee(t);case 201:return t=u.getUint32(y),y+=4,ee(t);case 202:if(t=u.getFloat32(y),v.useFloat32>2){let e=ed[(127&s[y])<<1|s[y+1]>>7];return y+=4,(e*t+(t>0?.5:-.5)|0)/e}return y+=4,t;case 203:return t=u.getFloat64(y),y+=8,t;case 204:return s[y++];case 205:return t=u.getUint16(y),y+=2,t;case 206:return t=u.getUint32(y),y+=4,t;case 207:return"number"===v.int64AsType?t=0x100000000*u.getUint32(y)+u.getUint32(y+4):"string"===v.int64AsType?t=u.getBigUint64(y).toString():"auto"===v.int64AsType?(t=u.getBigUint64(y))<=BigInt(2)<<BigInt(52)&&(t=Number(t)):t=u.getBigUint64(y),y+=8,t;case 208:return u.getInt8(y++);case 209:return t=u.getInt16(y),y+=2,t;case 210:return t=u.getInt32(y),y+=4,t;case 211:return"number"===v.int64AsType?t=0x100000000*u.getInt32(y)+u.getUint32(y+4):"string"===v.int64AsType?t=u.getBigInt64(y).toString():"auto"===v.int64AsType?(t=u.getBigInt64(y))>=BigInt(-2)<<BigInt(52)&&t<=BigInt(2)<<BigInt(52)&&(t=Number(t)):t=u.getBigInt64(y),y+=8,t;case 212:if(114==(t=s[y++]))return ei(63&s[y++]);{let e=E[t];if(e)if(e.read)return y++,e.read(B());else if(e.noBuffer)return y++,e();else return e(s.subarray(y,++y));throw Error("Unknown extension "+t)}case 213:if(114==(t=s[y]))return y++,ei(63&s[y++],s[y++]);return ee(2);case 214:return ee(4);case 215:return ee(8);case 216:return ee(16);case 217:if(t=s[y++],_>=y)return l.slice(y-C,(y+=t)-C);return N(t);case 218:if(t=u.getUint16(y),y+=2,_>=y)return l.slice(y-C,(y+=t)-C);return V(t);case 219:if(t=u.getUint32(y),y+=4,_>=y)return l.slice(y-C,(y+=t)-C);return z(t);case 220:return t=u.getUint16(y),y+=2,H(t);case 221:return t=u.getUint32(y),y+=4,H(t);case 222:return t=u.getUint16(y),y+=2,q(t);case 223:return t=u.getUint32(y),y+=4,q(t);default:if(e>=224)return e-256;if(void 0===e){let e=Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}throw Error("Unknown MessagePack token "+e)}}}let P=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function O(e,t){function r(){if(r.count++>U){let r=e.read=Function("r","return function(){return "+(v.freezeData?"Object.freeze":"")+"({"+e.map(e=>"__proto__"===e?"__proto_:r()":P.test(e)?e+":r()":"["+JSON.stringify(e)+"]:r()").join(",")+"})}")(B);return 0===e.highByte&&(e.read=M(t,e.read)),r()}let n={};for(let t=0,r=e.length;t<r;t++){let r=e[t];"__proto__"===r&&(r="__proto_"),n[r]=B()}return v.freezeData?Object.freeze(n):n}return(r.count=0,0===e.highByte)?M(t,r):r}let M=(e,t)=>function(){let r=s[y++];if(0===r)return t();let n=e<32?-(e+(r<<5)):e+(r<<5),i=a[n]||L()[n];if(!i)throw Error("Record id is not defined for "+n);return i.read||(i.read=O(i,e)),i.read()};function L(){let e=ec(()=>(s=null,v.getStructures()));return a=v._mergeStructures(e,a)}var F=G,N=G,V=G,z=G;let $=!1;function W(e){function t(t){return function(r){let n=b[x++];if(null==n){if(c)return G(r);let i=s.byteOffset,a=e(y-t+i,o+i,s.buffer);if("string"==typeof a)n=a,b=w;else if(x=1,_=1,void 0===(n=(b=a)[0]))throw Error("Unexpected end of buffer")}let i=n.length;return i<=r?(y+=r,n):(l=n,C=y,_=y+i,y+=r,n.slice(0,r))}}$=!0,F=t(1),N=t(2),V=t(3),z=t(5)}function G(e){let t;if(e<16&&(t=X(e)))return t;if(e>64&&i)return i.decode(s.subarray(y,y+=e));let r=y+e,n=[];for(t="";y<r;){let e=s[y++];if((128&e)==0)n.push(e);else if((224&e)==192){let t=63&s[y++];n.push((31&e)<<6|t)}else if((240&e)==224){let t=63&s[y++],r=63&s[y++];n.push((31&e)<<12|t<<6|r)}else if((248&e)==240){let t=63&s[y++],r=(7&e)<<18|t<<12|(63&s[y++])<<6|63&s[y++];r>65535&&(r-=65536,n.push(r>>>10&1023|55296),r=56320|1023&r),n.push(r)}else n.push(e);n.length>=4096&&(t+=Y.apply(String,n),n.length=0)}return n.length>0&&(t+=Y.apply(String,n)),t}function J(e,t,r){let n=s;s=e,y=t;try{return G(r)}finally{s=n}}function H(e){let t=Array(e);for(let r=0;r<e;r++)t[r]=B();return v.freezeData?Object.freeze(t):t}function q(e){if(v.mapsAsObjects){let t={};for(let r=0;r<e;r++){let e=er();"__proto__"===e&&(e="__proto_"),t[e]=B()}return t}{let t=new Map;for(let r=0;r<e;r++)t.set(B(),B());return t}}var Y=String.fromCharCode;function K(e){let t=y,r=Array(e);for(let n=0;n<e;n++){let e=s[y++];if((128&e)>0){y=t;return}r[n]=e}return Y.apply(String,r)}function X(e){if(e<4)if(e<2)if(0===e)return"";else{let e=s[y++];if((128&e)>1){y-=1;return}return Y(e)}else{let t=s[y++],r=s[y++];if((128&t)>0||(128&r)>0){y-=2;return}if(e<3)return Y(t,r);let n=s[y++];if((128&n)>0){y-=3;return}return Y(t,r,n)}{let t=s[y++],r=s[y++],n=s[y++],i=s[y++];if((128&t)>0||(128&r)>0||(128&n)>0||(128&i)>0){y-=4;return}if(e<6)if(4===e)return Y(t,r,n,i);else{let e=s[y++];if((128&e)>0){y-=5;return}return Y(t,r,n,i,e)}if(e<8){let o=s[y++],a=s[y++];if((128&o)>0||(128&a)>0){y-=6;return}if(e<7)return Y(t,r,n,i,o,a);let l=s[y++];if((128&l)>0){y-=7;return}return Y(t,r,n,i,o,a,l)}{let o=s[y++],a=s[y++],l=s[y++],c=s[y++];if((128&o)>0||(128&a)>0||(128&l)>0||(128&c)>0){y-=8;return}if(e<10)if(8===e)return Y(t,r,n,i,o,a,l,c);else{let e=s[y++];if((128&e)>0){y-=9;return}return Y(t,r,n,i,o,a,l,c,e)}if(e<12){let h=s[y++],u=s[y++];if((128&h)>0||(128&u)>0){y-=10;return}if(e<11)return Y(t,r,n,i,o,a,l,c,h,u);let d=s[y++];if((128&d)>0){y-=11;return}return Y(t,r,n,i,o,a,l,c,h,u,d)}{let h=s[y++],u=s[y++],d=s[y++],p=s[y++];if((128&h)>0||(128&u)>0||(128&d)>0||(128&p)>0){y-=12;return}if(e<14)if(12===e)return Y(t,r,n,i,o,a,l,c,h,u,d,p);else{let e=s[y++];if((128&e)>0){y-=13;return}return Y(t,r,n,i,o,a,l,c,h,u,d,p,e)}{let f=s[y++],g=s[y++];if((128&f)>0||(128&g)>0){y-=14;return}if(e<15)return Y(t,r,n,i,o,a,l,c,h,u,d,p,f,g);let m=s[y++];if((128&m)>0){y-=15;return}return Y(t,r,n,i,o,a,l,c,h,u,d,p,f,g,m)}}}}}function Z(){let e,t=s[y++];if(t<192)e=t-160;else switch(t){case 217:e=s[y++];break;case 218:e=u.getUint16(y),y+=2;break;case 219:e=u.getUint32(y),y+=4;break;default:throw Error("Expected string")}return G(e)}function Q(e){return v.copyBuffers?Uint8Array.prototype.slice.call(s,y,y+=e):s.subarray(y,y+=e)}function ee(e){let t=s[y++];if(E[t]){let r;return E[t](s.subarray(y,r=y+=e),e=>{y=e;try{return B()}finally{y=r}})}throw Error("Unknown extension type "+t)}var et=Array(4096);function er(){let e,t=s[y++];if(!(t>=160)||!(t<192))return y--,en(B());if(t-=160,_>=y)return l.slice(y-C,(y+=t)-C);if(!(0==_&&o<180))return F(t);let r=(t<<5^(t>1?u.getUint16(y):t>0?s[y]:0))&4095,n=et[r],i=y,a=y+t-3,c=0;if(n&&n.bytes==t){for(;i<a;){if((e=u.getUint32(i))!=n[c++]){i=0x70000000;break}i+=4}for(a+=3;i<a;)if((e=s[i++])!=n[c++]){i=0x70000000;break}if(i===a)return y=i,n.string;a-=3,i=y}for(n=[],et[r]=n,n.bytes=t;i<a;)e=u.getUint32(i),n.push(e),i+=4;for(a+=3;i<a;)e=s[i++],n.push(e);let h=t<16?X(t):K(t);return null!=h?n.string=h:n.string=F(t)}function en(e){if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e||"bigint"==typeof e)return e.toString();if(null==e)return e+"";if(v.allowArraysInMapKeys&&Array.isArray(e)&&e.flat().every(e=>["string","number","boolean","bigint"].includes(typeof e)))return e.flat().toString();throw Error(`Invalid property type for record: ${typeof e}`)}let ei=(e,t)=>{let r=B().map(en),n=e;void 0!==t&&(e=e<32?-((t<<5)+e):(t<<5)+e,r.highByte=t);let i=a[e];return i&&(i.isShared||I)&&((a.restoreStructures||(a.restoreStructures=[]))[e]=i),a[e]=r,r.read=O(r,n),r.read()};E[0]=()=>{},E[0].noBuffer=!0,E[66]=e=>{let t=e.length,r=BigInt(128&e[0]?e[0]-256:e[0]);for(let n=1;n<t;n++)r<<=BigInt(8),r+=BigInt(e[n]);return r};let es={Error,TypeError,ReferenceError};E[101]=()=>{let e=B();return(es[e[0]]||Error)(e[1],{cause:e[2]})},E[105]=e=>{let t;if(!1===v.structuredClone)throw Error("Structured clone extension is disabled");let r=u.getUint32(y-4);h||(h=new Map);let n=s[y],i={target:t=n>=144&&n<160||220==n||221==n?[]:n>=128&&n<144||222==n||223==n?new Map:(n>=199&&n<=201||n>=212&&n<=216)&&115===s[y+1]?new Set:{}};h.set(r,i);let o=B();if(!i.used)return i.target=o;if(Object.assign(t,o),t instanceof Map)for(let[e,r]of o.entries())t.set(e,r);if(t instanceof Set)for(let e of Array.from(o))t.add(e);return t},E[112]=e=>{if(!1===v.structuredClone)throw Error("Structured clone extension is disabled");let t=u.getUint32(y-4),r=h.get(t);return r.used=!0,r.target},E[115]=()=>new Set(B());let eo=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array"),ea="object"==typeof globalThis?globalThis:window;E[116]=e=>{let t=e[0],r=Uint8Array.prototype.slice.call(e,1).buffer,n=eo[t];if(!n){if(16===t)return r;if(17===t)return new DataView(r);throw Error("Could not find typed array for code "+t)}return new ea[n](r)},E[120]=()=>{let e=B();return new RegExp(e[0],e[1])};let el=[];function ec(e){f&&f();let t=o,r=y,n=x,i=C,d=_,p=l,g=b,m=h,w=c,E=new Uint8Array(s.slice(0,o)),S=a,T=a.slice(0,a.length),k=v,U=I,j=e();return o=t,y=r,x=n,C=i,_=d,l=p,b=g,h=m,c=w,s=E,I=U,(a=S).splice(0,a.length,...T),v=k,u=new DataView(s.buffer,s.byteOffset,s.byteLength),j}function eh(){s=null,h=null,a=null}function eu(e){e.unpack?E[e.type]=e.unpack:E[e.type]=e}E[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],r=y;return y+=t-e.length,c=el,(c=[Z(),Z()]).position0=0,c.position1=0,c.postBundlePosition=y,y=r,B()},E[255]=e=>4==e.length?new Date((0x1000000*e[0]+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):8==e.length?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((3&e[3])*0x100000000+0x1000000*e[4]+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):12==e.length?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((128&e[4]?-0x1000000000000:0)+0x10000000000*e[6]+0x100000000*e[7]+0x1000000*e[8]+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");let ed=Array(147);for(let e=0;e<256;e++)ed[e]=+("1e"+Math.floor(45.15-.30103*e));let ep=j;var ef=new j({useRecords:!1});let eg=ef.unpack,em=ef.unpackMultiple,ey=ef.unpack,ew={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4},eb=new Float32Array(1),ex=new Uint8Array(eb.buffer,0,4);function ev(e){eb[0]=e;let t=ed[(127&ex[3])<<1|ex[2]>>7];return(t*e+(e>0?.5:-.5)|0)/t}function eC(e,t,r){d=e,p=t,f=r}},{b5a1b40c14b71778:"b48lF","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"737vE":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"packIter",()=>l),i.export(r,"unpackIter",()=>h),i.export(r,"decodeIter",()=>u),i.export(r,"encodeIter",()=>d);var s=e("./pack.js"),o=e("./unpack.js"),a=e("cf54f4ca76cd8e1c").Buffer;function l(e,t={}){if(e&&"object"==typeof e)if("function"==typeof e[Symbol.iterator])return function*(e,t){let r=new(0,s.Packr)(t);for(let t of e)yield r.pack(t)}(e,t);else if("function"==typeof e.then||"function"==typeof e[Symbol.asyncIterator])return c(e,t);else throw Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a Promise");throw Error("first argument must be an Iterable, Async Iterable, or a Promise for an Async Iterable")}async function*c(e,t){let r=new(0,s.Packr)(t);for await(let t of e)yield r.pack(t)}function h(e,t={}){let r;if(!e||"object"!=typeof e)throw Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a promise");let n=new(0,o.Unpackr)(t),i=e=>{let t;r&&(e=a.concat([r,e]),r=void 0);try{t=n.unpackMultiple(e)}catch(n){if(n.incomplete)r=e.slice(n.lastPosition),t=n.values;else throw n}return t};return"function"==typeof e[Symbol.iterator]?function*(){for(let t of e)yield*i(t)}():"function"==typeof e[Symbol.asyncIterator]?async function*(){for await(let t of e)yield*i(t)}():void 0}let u=h,d=l},{cf54f4ca76cd8e1c:"b48lF","./pack.js":"1Gqa1","./unpack.js":"34MFG","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],blYkP:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"StreamServer",()=>a),i.export(r,"StreamClient",()=>l),i.export(r,"WebSocketStreamServer",()=>c),i.export(r,"WebSocketStreamClient",()=>h);var s=e("peerjs");function o(e,t){let r=`${e.class_id}_${e.liveUser.room}_${t}`.replace(/[^a-zA-Z0-9_-]/g,"_");return`stream_${r}`.substring(0,50)}class a{constructor(e,t,r,n){this.connectedClients=new Set,this.context=e,this.stream=t,this.streamName=n||`${this.context.username}-stream`;let i=o(e,this.streamName);this.peer=new(0,s.Peer)(i,{config:r}),this.setupPeerEvents()}setupPeerEvents(){this.peer.on("open",()=>{setTimeout(()=>{},2e3)}),this.peer.on("connection",e=>{this.connectedClients.add(e.peer),setTimeout(()=>{this.callClient(e.peer)},300),e.on("close",()=>{this.connectedClients.delete(e.peer)}),e.on("error",()=>{this.connectedClients.delete(e.peer)})}),this.peer.on("error",()=>{}),this.peer.on("disconnected",()=>{this.peer.destroyed||this.peer.reconnect()})}callClient(e){if(this.stream){let t=this.peer.call(e,this.stream);if(!t)return void this.connectedClients.delete(e);t.on("error",()=>{this.connectedClients.delete(e)})}}updateStream(e){this.stream=e,this.connectedClients.forEach(e=>{this.callClient(e)})}stop(){this.peer&&!this.peer.destroyed&&this.peer.destroy()}}class l{constructor(e,t,r,n){this.currentConnection=null,this.reconnectAttempts=0,this.maxReconnectAttempts=3,this.reconnectDelay=3e3,this.isInitialConnection=!0,this.connectionTimeout=null,this.context=e,this.handler=t,this.defaultStreamName=n,this.peer=new(0,s.Peer)({config:r}),this.setupPeerEvents()}setupPeerEvents(){this.peer.on("open",()=>{this.defaultStreamName&&setTimeout(()=>{this.selectStream(this.defaultStreamName)},3e3)}),this.peer.on("call",e=>{e.answer(),e.on("stream",e=>{let t={streamName:this.currentStreamName||"unknown",room:this.context.liveUser?.room};this.handler(e,this.context.module.stationConfig||{},t)})}),this.peer.on("error",e=>{if("peer-unavailable"===e.type||e.message?.includes("Could not connect to peer"))if(this.currentStreamName&&this.reconnectAttempts<this.maxReconnectAttempts){this.reconnectAttempts++;let e=(this.isInitialConnection?2*this.reconnectDelay:this.reconnectDelay)*Math.pow(2,this.reconnectAttempts-1);this.connectionTimeout=setTimeout(()=>{!this.peer.destroyed&&this.currentStreamName&&this.selectStream(this.currentStreamName)},e)}else this.reconnectAttempts>=this.maxReconnectAttempts&&(this.isInitialConnection=!1)}),this.peer.on("disconnected",()=>{this.peer.destroyed||this.peer.reconnect()})}selectStream(e){this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null);let t=o(this.context,e);this.currentStreamName=e,this.currentConnection&&(this.currentConnection.close(),this.currentConnection=null),this.peer.open?this.makeConnection(t):this.peer.on("open",()=>{this.makeConnection(t)})}makeConnection(e){try{if(this.currentConnection=this.peer.connect(e),!this.currentConnection)return void this.handleConnectionFailure();this.currentConnection.on("open",()=>{this.reconnectAttempts=0,this.isInitialConnection=!1}),this.currentConnection.on("close",()=>{this.currentConnection=null}),this.currentConnection.on("error",()=>{this.currentConnection=null,this.handleConnectionFailure()})}catch(e){this.handleConnectionFailure()}}handleConnectionFailure(){if(this.currentStreamName&&this.reconnectAttempts<this.maxReconnectAttempts){let e=(this.isInitialConnection?2*this.reconnectDelay:this.reconnectDelay)*Math.pow(2,this.reconnectAttempts);this.reconnectAttempts++,this.connectionTimeout=setTimeout(()=>{!this.peer.destroyed&&this.currentStreamName&&this.selectStream(this.currentStreamName)},e)}else this.reconnectAttempts>=this.maxReconnectAttempts&&(this.isInitialConnection=!1)}stop(){this.reconnectAttempts=0,this.isInitialConnection=!0,this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=null),this.currentConnection&&(this.currentConnection.close(),this.currentConnection=null),this.peer&&!this.peer.destroyed&&this.peer.destroy()}}class c{constructor(e,t,r={}){this.wsConnection=null,this.frameRequestId=null,this.context=e,this.stream=t,this.websocketUrl=r.websocketUrl,this.roomId=this.context.class_id||this.context.liveUser?.room;let n=document.createElement("video");n.srcObject=t,n.muted=!0,n.play(),this.canvas=document.createElement("canvas"),this.canvas.width=640,this.canvas.height=480,this.ctx=this.canvas.getContext("2d"),n.onloadedmetadata=()=>{this.canvas.width=n.videoWidth,this.canvas.height=n.videoHeight,this.startStreaming(n)}}startStreaming(e){this.wsConnection=new WebSocket(this.websocketUrl),this.wsConnection.onopen=()=>{this.wsConnection&&(this.wsConnection.send(JSON.stringify({type:"register-source",roomId:this.roomId})),this.startFrameCapture(e))},this.wsConnection.onerror=()=>{}}startFrameCapture(e){let t=0,r=1e3/15,n=i=>{if(this.wsConnection&&this.wsConnection.readyState===WebSocket.OPEN){if(i-t>r&&e.readyState===e.HAVE_ENOUGH_DATA){t=i;try{let t=e.videoWidth,r=e.videoHeight;(this.canvas.width!==t||this.canvas.height!==r)&&(this.canvas.width=t,this.canvas.height=r),this.ctx.drawImage(e,0,0,t,r);let n=this.canvas.toDataURL("image/jpeg",.7);this.wsConnection.send(JSON.stringify({type:"frame",data:n}))}catch(e){}}this.frameRequestId=requestAnimationFrame(n)}};this.frameRequestId=requestAnimationFrame(n)}stop(){null!==this.frameRequestId&&(cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null),this.wsConnection&&(this.wsConnection.close(),this.wsConnection=null)}}class h{constructor(e,t,r={}){this.wsConnection=null,this.stream=null,this.context=e,this.handler=t,this.websocketUrl=r.websocketUrl,this.roomId=this.context.class_id||this.context.liveUser?.room,this.streamCanvas=document.createElement("canvas"),this.streamCanvas.width=640,this.streamCanvas.height=480,this.streamCtx=this.streamCanvas.getContext("2d"),this.img=new Image,this.setupImageHandlers(),this.connect()}setupImageHandlers(){this.img.onload=()=>{try{(this.streamCanvas.width!==this.img.width||this.streamCanvas.height!==this.img.height)&&(this.streamCanvas.width=this.img.width,this.streamCanvas.height=this.img.height),this.streamCtx.clearRect(0,0,this.streamCanvas.width,this.streamCanvas.height),this.streamCtx.drawImage(this.img,0,0),this.stream||(this.stream=this.streamCanvas.captureStream(30),this.handler(this.stream,this.context.module.stationConfig))}catch(e){}}}connect(){this.wsConnection=new WebSocket(this.websocketUrl),this.wsConnection.onopen=()=>{this.roomId&&this.wsConnection.send(JSON.stringify({type:"join-room",roomId:this.roomId}))},this.wsConnection.onmessage=e=>{try{let t=JSON.parse(e.data);"frame"===t.type&&t.data&&(this.img.src=t.data)}catch(e){}},this.wsConnection.onerror=()=>{}}stop(){this.wsConnection&&(this.wsConnection.close(),this.wsConnection=null),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null)}}},{peerjs:"j4KPh","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],j4KPh:[function(e,t,r,n){var i,s,o,a,l,c,h,u=e("@parcel/transformer-js/src/esmodule-helpers.js");u.defineInteropFlag(r),u.export(r,"default",()=>ei),u.export(r,"util",()=>_),u.export(r,"BufferedConnection",()=>K),u.export(r,"StreamConnection",()=>et),u.export(r,"MsgPack",()=>er),u.export(r,"Peer",()=>ee),u.export(r,"MsgPackPeer",()=>en),u.export(r,"PeerError",()=>G),u.export(r,"ConnectionType",()=>B),u.export(r,"PeerErrorType",()=>P),u.export(r,"BaseConnectionErrorType",()=>O),u.export(r,"DataConnectionErrorType",()=>M),u.export(r,"SerializationType",()=>L),u.export(r,"SocketEventType",()=>F),u.export(r,"ServerMessageType",()=>N);var d=e("peerjs-js-binarypack"),p=e("webrtc-adapter"),f=u.interopDefault(p),g=e("@msgpack/msgpack");function m(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}class y{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{let t=[],r=e.byteLength,n=Math.ceil(r/this.chunkedMTU),i=0,s=0;for(;s<r;){let o=Math.min(r,s+this.chunkedMTU),a=e.slice(s,o),l={__peerData:this._dataCount,n:i,data:a,total:n};t.push(l),s=o,i++}return this._dataCount++,t}}}let w=f.default.default||f.default,b=new class{isWebRTCSupported(){return"undefined"!=typeof RTCPeerConnection}isBrowserSupported(){let e=this.getBrowser(),t=this.getVersion();return!!this.supportedBrowsers.includes(e)&&("chrome"===e?t>=this.minChromeVersion:"firefox"===e?t>=this.minFirefoxVersion:"safari"===e&&!this.isIOS&&t>=this.minSafariVersion)}getBrowser(){return w.browserDetails.browser}getVersion(){return w.browserDetails.version||0}isUnifiedPlanSupported(){let e,t=this.getBrowser(),r=w.browserDetails.version||0;if("chrome"===t&&r<this.minChromeVersion)return!1;if("firefox"===t&&r>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n=!1;try{(e=new RTCPeerConnection).addTransceiver("audio"),n=!0}catch(e){}finally{e&&e.close()}return n}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS="undefined"!=typeof navigator&&["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},x=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),v=()=>Math.random().toString(36).slice(2),C={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},_=new class extends y{noop(){}blobToArrayBuffer(e,t){let r=new FileReader;return r.onload=function(e){e.target&&t(e.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer}isSecure(){return"https:"===location.protocol}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=C,this.browser=b.getBrowser(),this.browserVersion=b.getVersion(),this.pack=d.pack,this.unpack=d.unpack,this.supports=function(){let e,t={browser:b.isBrowserSupported(),webRTC:b.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;try{let r;e=new RTCPeerConnection(C),t.audioVideo=!0;try{r=e.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!r.ordered;try{r.binaryType="blob",t.binaryBlob=!b.isIOS}catch(e){}}catch(e){}finally{r&&r.close()}}catch(e){}finally{e&&e.close()}return t}(),this.validateId=x,this.randomToken=v}};"use strict";var E=new class{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){let r=["PeerJS: ",...t];for(let e in r)r[e]instanceof Error&&(r[e]="("+r[e].name+") "+r[e].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}},S={},T=Object.prototype.hasOwnProperty,k="~";function I(){}function U(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function j(e,t,r,n,i){if("function"!=typeof r)throw TypeError("The listener must be a function");var s=new U(r,n||e,i),o=k?k+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],s]:e._events[o].push(s):(e._events[o]=s,e._eventsCount++),e}function A(e,t){0==--e._eventsCount?e._events=new I:delete e._events[t]}function D(){this._events=new I,this._eventsCount=0}Object.create&&(I.prototype=Object.create(null),new I().__proto__||(k=!1)),D.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)T.call(e,t)&&r.push(k?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},D.prototype.listeners=function(e){var t=k?k+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,i=r.length,s=Array(i);n<i;n++)s[n]=r[n].fn;return s},D.prototype.listenerCount=function(e){var t=k?k+e:e,r=this._events[t];return r?r.fn?1:r.length:0},D.prototype.emit=function(e,t,r,n,i,s){var o=k?k+e:e;if(!this._events[o])return!1;var a,l,c=this._events[o],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,i),!0;case 6:return c.fn.call(c.context,t,r,n,i,s),!0}for(l=1,a=Array(h-1);l<h;l++)a[l-1]=arguments[l];c.fn.apply(c.context,a)}else{var u,d=c.length;for(l=0;l<d;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,n);break;default:if(!a)for(u=1,a=Array(h-1);u<h;u++)a[u-1]=arguments[u];c[l].fn.apply(c[l].context,a)}}return!0},D.prototype.on=function(e,t,r){return j(this,e,t,r,!1)},D.prototype.once=function(e,t,r){return j(this,e,t,r,!0)},D.prototype.removeListener=function(e,t,r,n){var i=k?k+e:e;if(!this._events[i])return this;if(!t)return A(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||n&&!s.once||r&&s.context!==r||A(this,i);else{for(var o=0,a=[],l=s.length;o<l;o++)(s[o].fn!==t||n&&!s[o].once||r&&s[o].context!==r)&&a.push(s[o]);a.length?this._events[i]=1===a.length?a[0]:a:A(this,i)}return this},D.prototype.removeAllListeners=function(e){var t;return e?(t=k?k+e:e,this._events[t]&&A(this,t)):(this._events=new I,this._eventsCount=0),this},D.prototype.off=D.prototype.removeListener,D.prototype.addListener=D.prototype.on,D.prefixed=k,D.EventEmitter=D,S=D;var R={};m(R,"ConnectionType",()=>B),m(R,"PeerErrorType",()=>P),m(R,"BaseConnectionErrorType",()=>O),m(R,"DataConnectionErrorType",()=>M),m(R,"SerializationType",()=>L),m(R,"SocketEventType",()=>F),m(R,"ServerMessageType",()=>N);var B=((i={}).Data="data",i.Media="media",i),P=((s={}).BrowserIncompatible="browser-incompatible",s.Disconnected="disconnected",s.InvalidID="invalid-id",s.InvalidKey="invalid-key",s.Network="network",s.PeerUnavailable="peer-unavailable",s.SslUnavailable="ssl-unavailable",s.ServerError="server-error",s.SocketError="socket-error",s.SocketClosed="socket-closed",s.UnavailableID="unavailable-id",s.WebRTC="webrtc",s),O=((o={}).NegotiationFailed="negotiation-failed",o.ConnectionClosed="connection-closed",o),M=((a={}).NotOpenYet="not-open-yet",a.MessageToBig="message-too-big",a),L=((l={}).Binary="binary",l.BinaryUTF8="binary-utf8",l.JSON="json",l.None="raw",l),F=((c={}).Message="message",c.Disconnected="disconnected",c.Error="error",c.Close="close",c),N=((h={}).Heartbeat="HEARTBEAT",h.Candidate="CANDIDATE",h.Offer="OFFER",h.Answer="ANSWER",h.Open="OPEN",h.Error="ERROR",h.IdTaken="ID-TAKEN",h.InvalidKey="INVALID-KEY",h.Leave="LEAVE",h.Expire="EXPIRE",h);let V="1.5.5";class z extends S.EventEmitter{constructor(e,t,r,n,i,s=5e3){super(),this.pingInterval=s,this._disconnected=!0,this._messagesQueue=[],this._baseUrl=(e?"wss://":"ws://")+t+":"+r+n+"peerjs?key="+i}start(e,t){this._id=e;let r=`${this._baseUrl}&id=${e}&token=${t}`;!this._socket&&this._disconnected&&(this._socket=new WebSocket(r+"&version="+V),this._disconnected=!1,this._socket.onmessage=e=>{let t;try{t=JSON.parse(e.data),E.log("Server message received:",t)}catch(t){E.log("Invalid server message",e.data);return}this.emit(F.Message,t)},this._socket.onclose=e=>{this._disconnected||(E.log("Socket closed.",e),this._cleanup(),this._disconnected=!0,this.emit(F.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),E.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen())return void E.log("Cannot send heartbeat, because socket closed");let e=JSON.stringify({type:N.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&1===this._socket.readyState}_sendQueuedMessages(){let e=[...this._messagesQueue];for(let t of(this._messagesQueue=[],e))this.send(t)}send(e){if(this._disconnected)return;if(!this._id)return void this._messagesQueue.push(e);if(!e.type)return void this.emit(F.Error,"Invalid message");if(!this._wsOpen())return;let t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class ${constructor(e){this.connection=e}startConnection(e){let t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===B.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){let r=this.connection,n={ordered:!!e.reliable},i=t.createDataChannel(r.label,n);r._initializeDataChannel(i),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){E.log("Creating RTCPeerConnection.");let e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){let t=this.connection.peer,r=this.connection.connectionId,n=this.connection.type,i=this.connection.provider;E.log("Listening for ICE candidates."),e.onicecandidate=e=>{e.candidate&&e.candidate.candidate&&(E.log(`Received ICE candidates for ${t}:`,e.candidate),i.socket.send({type:N.Candidate,payload:{candidate:e.candidate,type:n,connectionId:r},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":E.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(O.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":E.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(O.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":E.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{}}this.connection.emit("iceStateChanged",e.iceConnectionState)},E.log("Listening for data channel"),e.ondatachannel=e=>{E.log("Received data channel");let n=e.channel;i.getConnection(t,r)._initializeDataChannel(n)},E.log("Listening for remote stream"),e.ontrack=e=>{E.log("Received remote stream");let n=e.streams[0],s=i.getConnection(t,r);s.type===B.Media&&this._addStreamToMediaConnection(n,s)}}cleanup(){E.log("Cleaning up PeerConnection to "+this.connection.peer);let e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};let t="closed"!==e.signalingState,r=!1,n=this.connection.dataChannel;n&&(r=!!n.readyState&&"closed"!==n.readyState),(t||r)&&e.close()}async _makeOffer(){let e=this.connection.peerConnection,t=this.connection.provider;try{let r=await e.createOffer(this.connection.options.constraints);E.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),E.log("Set localDescription:",r,`for:${this.connection.peer}`);let n={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===B.Data){let e=this.connection;n={...n,label:e.label,reliable:e.reliable,serialization:e.serialization}}t.socket.send({type:N.Offer,payload:n,dst:this.connection.peer})}catch(e){"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=e&&(t.emitError(P.WebRTC,e),E.log("Failed to setLocalDescription, ",e))}}catch(e){t.emitError(P.WebRTC,e),E.log("Failed to createOffer, ",e)}}async _makeAnswer(){let e=this.connection.peerConnection,t=this.connection.provider;try{let r=await e.createAnswer();E.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),E.log("Set localDescription:",r,`for:${this.connection.peer}`),t.socket.send({type:N.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(e){t.emitError(P.WebRTC,e),E.log("Failed to setLocalDescription, ",e)}}catch(e){t.emitError(P.WebRTC,e),E.log("Failed to create answer, ",e)}}async handleSDP(e,t){t=new RTCSessionDescription(t);let r=this.connection.peerConnection,n=this.connection.provider;E.log("Setting remote description",t);try{await r.setRemoteDescription(t),E.log(`Set remoteDescription:${e} for:${this.connection.peer}`),"OFFER"===e&&await this._makeAnswer()}catch(e){n.emitError(P.WebRTC,e),E.log("Failed to setRemoteDescription, ",e)}}async handleCandidate(e){E.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),E.log(`Added ICE candidate for:${this.connection.peer}`)}catch(e){this.connection.provider.emitError(P.WebRTC,e),E.log("Failed to handleCandidate, ",e)}}_addTracksToConnection(e,t){if(E.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return E.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{t.addTrack(r,e)})}_addStreamToMediaConnection(e,t){E.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class W extends S.EventEmitter{emitError(e,t){E.error("Error:",t),this.emit("error",new G(`${e}`,t))}}class G extends Error{constructor(e,t){"string"==typeof t?super(t):(super(),Object.assign(this,t)),this.type=e}}class J extends W{get open(){return this._open}constructor(e,t,r){super(),this.peer=e,this.provider=t,this.options=r,this._open=!1,this.metadata=r.metadata}}class H extends J{static #e=this.ID_PREFIX="mc_";get type(){return B.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,r){super(e,t,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||H.ID_PREFIX+_.randomToken(),this._negotiator=new $(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{E.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{E.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){E.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){let t=e.type,r=e.payload;switch(e.type){case N.Answer:this._negotiator.handleSDP(t,r.sdp),this._open=!0;break;case N.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:E.warn(`Unrecognized message type:${t} from peer:${this.peer}`)}}answer(e,t={}){if(this._localStream)return void E.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");for(let r of(this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e}),this.provider._getMessages(this.connectionId)))this.handleMessage(r);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class q{constructor(e){this._options=e}_buildRequest(e){let t=this._options.secure?"https":"http",{host:r,port:n,path:i,key:s}=this._options,o=new URL(`${t}://${r}:${n}${i}${s}/${e}`);return o.searchParams.set("ts",`${Date.now()}${Math.random()}`),o.searchParams.set("version",V),fetch(o.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{let e=await this._buildRequest("id");if(200!==e.status)throw Error(`Error. Status:${e.status}`);return e.text()}catch(t){E.error("Error retrieving ID",t);let e="";throw"/"===this._options.path&&this._options.host!==_.CLOUD_HOST&&(e=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),Error("Could not get an ID from the server."+e)}}async listAllPeers(){try{let e=await this._buildRequest("peers");if(200!==e.status){if(401===e.status){let e="";throw e=this._options.host===_.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",Error("It doesn't look like you have permission to list peers IDs. "+e)}throw Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw E.error("Error retrieving list peers",e),Error("Could not get list peers from the server."+e)}}}class Y extends J{static #e=this.ID_PREFIX="dc_";static #t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return B.Data}constructor(e,t,r){super(e,t,r),this.connectionId=this.options.connectionId||Y.ID_PREFIX+v(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new $(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{E.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=e=>{E.log(`DC#${this.connectionId} dc onmessage:`,e.data)},this.dataChannel.onclose=()=>{E.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e?.flush)return void this.send({__peerData:{type:"close"}});this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,t=!1){return this.open?this._send(e,t):void this.emitError(M.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.")}async handleMessage(e){let t=e.payload;switch(e.type){case N.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case N.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:E.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}}}class K extends Y{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",e=>this._handleDataMessage(e))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Y.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(e){return E.error(`DC#:${this.connectionId} Error when sending:`,e),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||0===this._buffer.length)return;let e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e?.flush)return void this.send({__peerData:{type:"close"}});this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class X extends K{close(e){super.close(e),this._chunkedData={}}constructor(e,t,r){super(e,t,r),this.chunker=new y,this.serialization=L.Binary,this._chunkedData={}}_handleDataMessage({data:e}){let t=(0,d.unpack)(e),r=t.__peerData;if(r)return"close"===r.type?void this.close():void this._handleChunk(t);this.emit("data",t)}_handleChunk(e){let t=e.__peerData,r=this._chunkedData[t]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[t]=r,r.total===r.count){delete this._chunkedData[t];let e=function(e){let t=0;for(let r of e)t+=r.byteLength;let r=new Uint8Array(t),n=0;for(let t of e)r.set(t,n),n+=t.byteLength;return r}(r.data);this._handleDataMessage({data:e})}}_send(e,t){let r=(0,d.pack)(e);return r instanceof Promise?this._send_blob(r):!t&&r.byteLength>this.chunker.chunkedMTU?void this._sendChunks(r):void this._bufferedSend(r)}async _send_blob(e){let t=await e;if(t.byteLength>this.chunker.chunkedMTU)return void this._sendChunks(t);this._bufferedSend(t)}_sendChunks(e){let t=this.chunker.chunk(e);for(let e of(E.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`),t))this.send(e,!0)}}class Z extends K{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=L.None}}class Q extends K{_handleDataMessage({data:e}){let t=this.parse(this.decoder.decode(e)),r=t.__peerData;if(r&&"close"===r.type)return void this.close();this.emit("data",t)}_send(e,t){let r=this.encoder.encode(this.stringify(e));if(r.byteLength>=_.chunkedMTU)return void this.emitError(M.MessageToBig,"Message too big for JSON channel");this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=L.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class ee extends W{static #e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){let e=Object.create(null);for(let[t,r]of this._connections)e[t]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){let r;if(super(),this._serializers={raw:Z,json:Q,binary:X,"binary-utf8":X,default:X},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map,e&&e.constructor==Object?t=e:e&&(r=e.toString()),t={debug:0,host:_.CLOUD_HOST,port:_.CLOUD_PORT,path:"/",key:ee.DEFAULT_KEY,token:_.randomToken(),config:_.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},"/"===this._options.host&&(this._options.host=window.location.hostname),this._options.path&&("/"!==this._options.path[0]&&(this._options.path="/"+this._options.path),"/"!==this._options.path[this._options.path.length-1]&&(this._options.path+="/")),void 0===this._options.secure&&this._options.host!==_.CLOUD_HOST?this._options.secure=_.isSecure():this._options.host==_.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&E.setLogFunction(this._options.logFunction),E.logLevel=this._options.debug||0,this._api=new q(t),this._socket=this._createServerConnection(),!_.supports.audioVideo&&!_.supports.data)return void this._delayedAbort(P.BrowserIncompatible,"The current browser does not support WebRTC");if(r&&!_.validateId(r))return void this._delayedAbort(P.InvalidID,`ID "${r}" is invalid`);r?this._initialize(r):this._api.retrieveId().then(e=>this._initialize(e)).catch(e=>this._abort(P.ServerError,e))}_createServerConnection(){let e=new z(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(F.Message,e=>{this._handleMessage(e)}),e.on(F.Error,e=>{this._abort(P.SocketError,e)}),e.on(F.Disconnected,()=>{this.disconnected||(this.emitError(P.Network,"Lost connection to server."),this.disconnect())}),e.on(F.Close,()=>{this.disconnected||this._abort(P.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){let t=e.type,r=e.payload,n=e.src;switch(t){case N.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case N.Error:this._abort(P.ServerError,r.msg);break;case N.IdTaken:this._abort(P.UnavailableID,`ID "${this.id}" is taken`);break;case N.InvalidKey:this._abort(P.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case N.Leave:E.log(`Received leave message from ${n}`),this._cleanupPeer(n),this._connections.delete(n);break;case N.Expire:this.emitError(P.PeerUnavailable,`Could not connect to peer ${n}`);break;case N.Offer:{let e=r.connectionId,t=this.getConnection(n,e);if(t&&(t.close(),E.warn(`Offer received for existing Connection ID:${e}`)),r.type===B.Media){let i=new H(n,this,{connectionId:e,_payload:r,metadata:r.metadata});t=i,this._addConnection(n,t),this.emit("call",i)}else{if(r.type!==B.Data)return void E.warn(`Received malformed connection type:${r.type}`);let i=new this._serializers[r.serialization](n,this,{connectionId:e,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});t=i,this._addConnection(n,t),this.emit("connection",i)}for(let r of this._getMessages(e))t.handleMessage(r);break}default:{if(!r)return void E.warn(`You received a malformed message from ${n} of type ${t}`);let i=r.connectionId,s=this.getConnection(n,i);s&&s.peerConnection?s.handleMessage(e):i?this._storeMessage(i,e):E.warn("You received an unrecognized message:",e)}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){let t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected){E.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(P.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}let r=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,r),r}call(e,t,r={}){if(this.disconnected){E.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(P.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!t)return void E.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");let n=new H(e,this,{...r,_stream:t});return this._addConnection(e,n),n}_addConnection(e,t){E.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){let t=this._connections.get(e.peer);if(t){let r=t.indexOf(e);-1!==r&&t.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){let r=this._connections.get(e);if(!r)return null;for(let e of r)if(e.connectionId===t)return e;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){E.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(E.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(let e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){let t=this._connections.get(e);if(t)for(let e of t)e.close()}disconnect(){if(this.disconnected)return;let e=this.id;E.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)E.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else if(this.destroyed)throw Error("This peer cannot reconnect to the server. It has already been destroyed.");else if(this.disconnected||this.open)throw Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`);else E.error("In a hurry? We're still trying to make the initial connection!")}listAllPeers(e=e=>{}){this._api.listAllPeers().then(t=>e(t)).catch(e=>this._abort(P.ServerError,e))}}class et extends Y{constructor(e,t,r){super(e,t,{...r,reliable:!0}),this._CHUNK_SIZE=32768,this._splitStream=new TransformStream({transform:(e,t)=>{for(let r=0;r<e.length;r+=this._CHUNK_SIZE)t.enqueue(e.subarray(r,r+this._CHUNK_SIZE))}}),this._rawSendStream=new WritableStream({write:async(e,t)=>{let r=new Promise(e=>this.dataChannel.addEventListener("bufferedamountlow",e,{once:!0}));await (this.dataChannel.bufferedAmount<=Y.MAX_BUFFERED_AMOUNT-e.byteLength||r);try{this.dataChannel.send(e)}catch(e){E.error(`DC#:${this.connectionId} Error when sending:`,e),t.error(e),this.close()}}}),this.writer=this._splitStream.writable.getWriter(),this._rawReadStream=new ReadableStream({start:e=>{this.once("open",()=>{this.dataChannel.addEventListener("message",t=>{e.enqueue(t.data)})})}}),this._splitStream.readable.pipeTo(this._rawSendStream)}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.bufferedAmountLowThreshold=Y.MAX_BUFFERED_AMOUNT/2}}class er extends et{constructor(e,t,r){super(e,t,r),this.serialization="MsgPack",this._encoder=new(0,g.Encoder),(async()=>{for await(let e of(0,g.decodeMultiStream)(this._rawReadStream)){if(e.__peerData?.type==="close")return void this.close();this.emit("data",e)}})()}_send(e){return this.writer.write(this._encoder.encode(e))}}class en extends ee{constructor(...e){super(...e),this._serializers={MsgPack:er,default:er}}}var ei=ee},{"peerjs-js-binarypack":"cBnq7","webrtc-adapter":"cF6ik","@msgpack/msgpack":"99oOE","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],cBnq7:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"unpack",()=>o),i.export(r,"pack",()=>a),i.export(r,"Packer",()=>c);class s{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){let e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){let e=[];for(let t of this._parts)e.push(t);return function(e){let t=0;for(let r of e)t+=r.byteLength;let r=new Uint8Array(t),n=0;for(let t of e){let e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);r.set(e,n),n+=t.byteLength}return r}(e).buffer}}function o(e){return new l(e).unpack()}function a(e){let t=new c,r=t.pack(e);return r instanceof Promise?r.then(()=>t.getBuffer()):t.getBuffer()}class l{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){let e,t=this.unpack_uint8();if(t<128)return t;if((224^t)<32)return(224^t)-32;if((e=160^t)<=15)return this.unpack_raw(e);if((e=176^t)<=15)return this.unpack_string(e);if((e=144^t)<=15)return this.unpack_array(e);if((e=128^t)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:case 212:case 213:case 214:case 215:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}}unpack_uint8(){let e=255&this.dataView[this.index];return this.index++,e}unpack_uint16(){let e=this.read(2),t=(255&e[0])*256+(255&e[1]);return this.index+=2,t}unpack_uint32(){let e=this.read(4),t=((256*e[0]+e[1])*256+e[2])*256+e[3];return this.index+=4,t}unpack_uint64(){let e=this.read(8),t=((((((256*e[0]+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t}unpack_int8(){let e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){let e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){let e=this.unpack_uint32();return e<0x80000000?e:e-0x100000000}unpack_int64(){let e=this.unpack_uint64();return e<0x8000000000000000?e:e-0xffffffffffffffff}unpack_raw(e){if(this.length<this.index+e)throw Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);let t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){let t,r,n=this.read(e),i=0,s="";for(;i<e;)(t=n[i])<160?(r=t,i++):(192^t)<32?(r=(31&t)<<6|63&n[i+1],i+=2):(224^t)<16?(r=(15&t)<<12|(63&n[i+1])<<6|63&n[i+2],i+=3):(r=(7&t)<<18|(63&n[i+1])<<12|(63&n[i+2])<<6|63&n[i+3],i+=4),s+=String.fromCodePoint(r);return this.index+=e,s}unpack_array(e){let t=Array(e);for(let r=0;r<e;r++)t[r]=this.unpack();return t}unpack_map(e){let t={};for(let r=0;r<e;r++)t[this.unpack()]=this.unpack();return t}unpack_float(){let e=this.unpack_uint32();return(0==e>>31?1:-1)*(8388607&e|8388608)*2**((e>>23&255)-127-23)}unpack_double(){let e=this.unpack_uint32(),t=this.unpack_uint32(),r=(e>>20&2047)-1023;return(0==e>>31?1:-1)*((1048575&e|1048576)*2**(r-20)+t*2**(r-52))}read(e){let t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw Error("BinaryPackFailure: read index out of range")}}class c{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if("string"==typeof e)this.pack_string(e);else if("number"==typeof e)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"==typeof e)!0===e?this._bufferBuilder.append(195):!1===e&&this._bufferBuilder.append(194);else if(void 0===e)this._bufferBuilder.append(192);else if("object"==typeof e)if(null===e)this._bufferBuilder.append(192);else{let t=e.constructor;if(e instanceof Array){let t=this.pack_array(e);if(t instanceof Promise)return t.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e)this.pack_bin(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));else if(e instanceof Date)this.pack_string(e.toString());else if(e instanceof Blob)return e.arrayBuffer().then(e=>{this.pack_bin(new Uint8Array(e)),this._bufferBuilder.flush()});else if(t==Object||t.toString().startsWith("class")){let t=this.pack_object(e);if(t instanceof Promise)return t.then(()=>this._bufferBuilder.flush())}else throw Error(`Type "${t.toString()}" not yet supported`)}else throw Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){let t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else if(t<=0xffffffff)this._bufferBuilder.append(219),this.pack_uint32(t);else throw Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){let t=this._textEncoder.encode(e),r=t.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=0xffffffff)this._bufferBuilder.append(217),this.pack_uint32(r);else throw Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_array(e){let t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else if(t<=0xffffffff)this._bufferBuilder.append(221),this.pack_uint32(t);else throw Error("Invalid length");let r=n=>{if(n<t){let t=this.pack(e[n]);return t instanceof Promise?t.then(()=>r(n+1)):r(n+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(255&e);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=0xffffffff)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-0x80000000&&e<=0x7fffffff)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-0x8000000000000000&&e<=0x8000000000000000)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=0xffffffffffffffff)this._bufferBuilder.append(207),this.pack_uint64(e);else throw Error("Invalid integer")}pack_double(e){let t=0;e<0&&(t=1,e=-e);let r=Math.floor(Math.log(e)/Math.LN2),n=Math.floor((e/2**r-1)*0x10000000000000),i=t<<31|r+1023<<20|n/0x100000000&1048575;this._bufferBuilder.append(203),this.pack_int32(i),this.pack_int32(n%0x100000000)}pack_object(e){let t=Object.keys(e),r=t.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=0xffffffff)this._bufferBuilder.append(223),this.pack_uint32(r);else throw Error("Invalid length");let n=r=>{if(r<t.length){let i=t[r];if(e.hasOwnProperty(i)){this.pack(i);let t=this.pack(e[i]);if(t instanceof Promise)return t.then(()=>n(r+1))}return n(r+1)}};return n(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(255&e)}pack_uint32(e){let t=0|e;this._bufferBuilder.append((0xff000000&t)>>>24),this._bufferBuilder.append((0xff0000&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t)}pack_uint64(e){let t=e/0x100000000,r=e%0x100000000;this._bufferBuilder.append((0xff000000&t)>>>24),this._bufferBuilder.append((0xff0000&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t),this._bufferBuilder.append((0xff000000&r)>>>24),this._bufferBuilder.append((0xff0000&r)>>>16),this._bufferBuilder.append((65280&r)>>>8),this._bufferBuilder.append(255&r)}pack_int8(e){this._bufferBuilder.append(255&e)}pack_int16(e){this._bufferBuilder.append((65280&e)>>8),this._bufferBuilder.append(255&e)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((0xff0000&e)>>>16),this._bufferBuilder.append((65280&e)>>>8),this._bufferBuilder.append(255&e)}pack_int64(e){let t=Math.floor(e/0x100000000),r=e%0x100000000;this._bufferBuilder.append((0xff000000&t)>>>24),this._bufferBuilder.append((0xff0000&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t),this._bufferBuilder.append((0xff000000&r)>>>24),this._bufferBuilder.append((0xff0000&r)>>>16),this._bufferBuilder.append((65280&r)>>>8),this._bufferBuilder.append(255&r)}constructor(){this._bufferBuilder=new s,this._textEncoder=new TextEncoder}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],cF6ik:[function(e,t,r,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r);var i=e("./adapter_factory.js");"use strict";r.default=(0,i.adapterFactory)({window:"undefined"==typeof window?void 0:window})},{"./adapter_factory.js":"jgw39","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],jgw39:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"adapterFactory",()=>u);var s=e("./utils"),o=e("./chrome/chrome_shim"),a=e("./firefox/firefox_shim"),l=e("./safari/safari_shim"),c=e("./common_shim"),h=e("sdp");function u({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){let r=s.log,n=s.detectBrowser(e),i={browserDetails:n,commonShim:c,extractVersion:s.extractVersion,disableLog:s.disableLog,disableWarnings:s.disableWarnings,sdp:h};switch(n.browser){case"chrome":if(!o||!o.shimPeerConnection||!t.shimChrome){r("Chrome shim is not included in this adapter release.");break}if(null===n.version){r("Chrome shim can not determine version, not shimming.");break}r("adapter.js shimming chrome."),i.browserShim=o,c.shimAddIceCandidateNullOrEmpty(e,n),c.shimParameterlessSetLocalDescription(e,n),o.shimGetUserMedia(e,n),o.shimMediaStream(e,n),o.shimPeerConnection(e,n),o.shimOnTrack(e,n),o.shimAddTrackRemoveTrack(e,n),o.shimGetSendersWithDtmf(e,n),o.shimSenderReceiverGetStats(e,n),o.fixNegotiationNeeded(e,n),c.shimRTCIceCandidate(e,n),c.shimRTCIceCandidateRelayProtocol(e,n),c.shimConnectionState(e,n),c.shimMaxMessageSize(e,n),c.shimSendThrowTypeError(e,n),c.removeExtmapAllowMixed(e,n);break;case"firefox":if(!a||!a.shimPeerConnection||!t.shimFirefox){r("Firefox shim is not included in this adapter release.");break}r("adapter.js shimming firefox."),i.browserShim=a,c.shimAddIceCandidateNullOrEmpty(e,n),c.shimParameterlessSetLocalDescription(e,n),a.shimGetUserMedia(e,n),a.shimPeerConnection(e,n),a.shimOnTrack(e,n),a.shimRemoveStream(e,n),a.shimSenderGetStats(e,n),a.shimReceiverGetStats(e,n),a.shimRTCDataChannel(e,n),a.shimAddTransceiver(e,n),a.shimGetParameters(e,n),a.shimCreateOffer(e,n),a.shimCreateAnswer(e,n),c.shimRTCIceCandidate(e,n),c.shimConnectionState(e,n),c.shimMaxMessageSize(e,n),c.shimSendThrowTypeError(e,n);break;case"safari":if(!l||!t.shimSafari){r("Safari shim is not included in this adapter release.");break}r("adapter.js shimming safari."),i.browserShim=l,c.shimAddIceCandidateNullOrEmpty(e,n),c.shimParameterlessSetLocalDescription(e,n),l.shimRTCIceServerUrls(e,n),l.shimCreateOfferLegacy(e,n),l.shimCallbacksAPI(e,n),l.shimLocalStreamsAPI(e,n),l.shimRemoteStreamsAPI(e,n),l.shimTrackEventTransceiver(e,n),l.shimGetUserMedia(e,n),l.shimAudioContext(e,n),c.shimRTCIceCandidate(e,n),c.shimRTCIceCandidateRelayProtocol(e,n),c.shimMaxMessageSize(e,n),c.shimSendThrowTypeError(e,n),c.removeExtmapAllowMixed(e,n);break;default:r("Unsupported browser!")}return i}},{"./utils":"7Ny3a","./chrome/chrome_shim":"efVnO","./firefox/firefox_shim":"jY3gi","./safari/safari_shim":"f5d5Y","./common_shim":"cADZX",sdp:"7PVXR","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"7Ny3a":[function(e,t,r,n){"use strict";var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"extractVersion",()=>a),i.export(r,"wrapPeerConnectionEvent",()=>l),i.export(r,"disableLog",()=>c),i.export(r,"disableWarnings",()=>h),i.export(r,"log",()=>u),i.export(r,"deprecated",()=>d),i.export(r,"detectBrowser",()=>p),i.export(r,"compactObject",()=>function e(t){return f(t)?Object.keys(t).reduce(function(r,n){let i=f(t[n]),s=i?e(t[n]):t[n],o=i&&!Object.keys(s).length;return void 0===s||o?r:Object.assign(r,{[n]:s})},{}):t}),i.export(r,"walkStats",()=>g),i.export(r,"filterStats",()=>m);let s=!0,o=!0;function a(e,t,r){let n=e.match(t);return n&&n.length>=r&&parseFloat(n[r],10)}function l(e,t,r){if(!e.RTCPeerConnection)return;let n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return i.apply(this,arguments);let s=e=>{let t=r(e);t&&(n.handleEvent?n.handleEvent(t):n(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(n,s),i.apply(this,[e,s])};let s=n.removeEventListener;n.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[t]||!this._eventMap[t].has(r))return s.apply(this,arguments);let n=this._eventMap[t].get(r);return this._eventMap[t].delete(r),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,s.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function c(e){return"boolean"!=typeof e?Error("Argument type: "+typeof e+". Please use a boolean."):(s=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function h(e){return"boolean"!=typeof e?Error("Argument type: "+typeof e+". Please use a boolean."):(o=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function u(){"object"==typeof window&&(s||"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments))}function d(e,t){o&&console.warn(e+" is deprecated, please use "+t+" instead.")}function p(e){let t={browser:null,version:null};if(void 0===e||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;let{navigator:r}=e;if(r.userAgentData&&r.userAgentData.brands){let e=r.userAgentData.brands.find(e=>"Chromium"===e.brand);if(e)return{browser:"chrome",version:parseInt(e.version,10)}}return r.mozGetUserMedia?(t.browser="firefox",t.version=parseInt(a(r.userAgent,/Firefox\/(\d+)\./,1))):r.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection?(t.browser="chrome",t.version=parseInt(a(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2))):e.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./)?(t.browser="safari",t.version=parseInt(a(r.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=a(r.userAgent,/Version\/(\d+(\.?\d+))/,1)):t.browser="Not a supported browser.",t}function f(e){return"[object Object]"===Object.prototype.toString.call(e)}function g(e,t,r){!t||r.has(t.id)||(r.set(t.id,t),Object.keys(t).forEach(n=>{n.endsWith("Id")?g(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach(t=>{g(e,e.get(t),r)})}))}function m(e,t,r){let n=r?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;let s=[];return e.forEach(e=>{"track"===e.type&&e.trackIdentifier===t.id&&s.push(e)}),s.forEach(t=>{e.forEach(r=>{r.type===n&&r.trackId===t.id&&g(e,r,i)})}),i}},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],efVnO:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"shimGetUserMedia",()=>o.shimGetUserMedia),i.export(r,"shimMediaStream",()=>a),i.export(r,"shimOnTrack",()=>l),i.export(r,"shimGetSendersWithDtmf",()=>c),i.export(r,"shimSenderReceiverGetStats",()=>h),i.export(r,"shimAddTrackRemoveTrackWithNative",()=>u),i.export(r,"shimAddTrackRemoveTrack",()=>d),i.export(r,"shimPeerConnection",()=>p),i.export(r,"fixNegotiationNeeded",()=>f);"use strict";var s=e("../utils.js"),o=e("./getusermedia");function a(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function l(e){if("object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)s.wrapPeerConnectionEvent(e,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e));else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});let t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",r=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===r.track.id):{track:r.track};let i=new Event("track");i.track=r.track,i.receiver=n,i.transceiver={receiver:n},i.streams=[t.stream],this.dispatchEvent(i)}),t.stream.getTracks().forEach(r=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===r.id):{track:r};let i=new Event("track");i.track=r,i.receiver=n,i.transceiver={receiver:n},i.streams=[t.stream],this.dispatchEvent(i)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}}function c(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){let t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};let r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){let i=r.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};let n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);let t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}let r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(t(this,e))})};let n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(e=>{let t=this._senders.find(t=>t.track===e);t&&this._senders.splice(this._senders.indexOf(t),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){let t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){let e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function h(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){let t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){let e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});let r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){let e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){let e=this;return this._pc.getStats().then(t=>s.filterStats(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){let t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){let e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),s.wrapPeerConnectionEvent(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){let e=this;return this._pc.getStats().then(t=>s.filterStats(t,e.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;let t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){let e,t,r,n=arguments[0];return(this.getSenders().forEach(t=>{t.track===n&&(e?r=!0:e=t)}),this.getReceivers().forEach(e=>(e.track===n&&(t?r=!0:t=e),e.track===n)),r||e&&t)?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):e?e.getStats():t?t.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function u(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};let t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};let n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};let r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});let t=this.getSenders();r.apply(this,arguments);let n=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(n)};let n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};let i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{let r=this._shimmedLocalStreams[t].indexOf(e);-1!==r&&this._shimmedLocalStreams[t].splice(r,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),i.apply(this,arguments)}}function d(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return u(e);let r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){let e=r.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])};let n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){let r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}n.apply(this,[t])};let i=e.RTCPeerConnection.prototype.removeStream;function s(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{let n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(RegExp(i.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:r})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");let n=[].slice.call(arguments,1);if(1!==n.length||!n[0].getTracks().find(e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(e=>e.track===t))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};let i=this._streams[r.id];if(i)i.addTrack(t),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{let n=new e.MediaStream([t]);this._streams[r.id]=n,this._reverseStreams[n.id]=r,this.addStream(n)}return this.getSenders().find(e=>e.track===t)},["createOffer","createAnswer"].forEach(function(t){let r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=({[t](){let e=arguments,t=arguments.length&&"function"==typeof arguments[0];return t?r.apply(this,[t=>{let r=s(this,t);e[0].apply(null,[r])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):r.apply(this,arguments).then(e=>s(this,e))}})[t]});let o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){var e,t;let r;return arguments.length&&arguments[0].type?(arguments[0]=(e=this,t=arguments[0],r=t.sdp,Object.keys(e._reverseStreams||[]).forEach(t=>{let n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(RegExp(n.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:r})),o.apply(this,arguments)):o.apply(this,arguments)};let a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){let e=a.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){let t;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach(r=>{this._streams[r].getTracks().find(t=>e.track===t)&&(t=this._streams[r])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function p(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){let r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=({[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}})[t]})}function f(e,t){s.wrapPeerConnectionEvent(e,"negotiationneeded",e=>{let r=e.target;if(!(t.version<72)&&(!r.getConfiguration||"plan-b"!==r.getConfiguration().sdpSemantics)||"stable"===r.signalingState)return e})}},{"../utils.js":"7Ny3a","./getusermedia":"kb2yF","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],kb2yF:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"shimGetUserMedia",()=>a);var s=e("../utils.js");"use strict";let o=s.log;function a(e,t){let r=e&&e.navigator;if(!r.mediaDevices)return;let n=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;let t={};return Object.keys(e).forEach(r=>{if("require"===r||"advanced"===r||"mediaSource"===r)return;let n="object"==typeof e[r]?e[r]:{ideal:e[r]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);let i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];let e={};"number"==typeof n.ideal?(e[i("min",r)]=n.ideal,t.optional.push(e),(e={})[i("max",r)]=n.ideal):e[i("",r)]=n.ideal,t.optional.push(e)}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",r)]=n.exact):["min","max"].forEach(e=>{void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,r)]=n[e])})}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){let t=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)}if(e&&"object"==typeof e.video){let s=e.video.facingMode;s=s&&("object"==typeof s?s:{ideal:s});let a=t.version<66;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!a)){let t;if(delete e.video.facingMode,"environment"===s.exact||"environment"===s.ideal?t=["back","rear"]:("user"===s.exact||"user"===s.ideal)&&(t=["front"]),t)return r.mediaDevices.enumerateDevices().then(r=>{let a=(r=r.filter(e=>"videoinput"===e.kind)).find(e=>t.some(t=>e.label.toLowerCase().includes(t)));return!a&&r.length&&t.includes("back")&&(a=r[r.length-1]),a&&(e.video.deviceId=s.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=n(e.video),o("chrome: "+JSON.stringify(e)),i(e)})}e.video=n(e.video)}return o("chrome: "+JSON.stringify(e)),i(e)},s=function(e){return t.version>=64?e:{name:({PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"})[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(r.getUserMedia=(function(e,t,n){i(e,e=>{r.webkitGetUserMedia(e,t,e=>{n&&n(s(e))})})}).bind(r),r.mediaDevices.getUserMedia){let e=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(t){return i(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>Promise.reject(s(e))))}}}},{"../utils.js":"7Ny3a","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],jY3gi:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"shimGetUserMedia",()=>o.shimGetUserMedia),i.export(r,"shimGetDisplayMedia",()=>a.shimGetDisplayMedia),i.export(r,"shimOnTrack",()=>l),i.export(r,"shimPeerConnection",()=>c),i.export(r,"shimSenderGetStats",()=>h),i.export(r,"shimReceiverGetStats",()=>u),i.export(r,"shimRemoveStream",()=>d),i.export(r,"shimRTCDataChannel",()=>p),i.export(r,"shimAddTransceiver",()=>f),i.export(r,"shimGetParameters",()=>g),i.export(r,"shimCreateOffer",()=>m),i.export(r,"shimCreateAnswer",()=>y);"use strict";var s=e("../utils"),o=e("./getusermedia"),a=e("./getdisplaymedia");function l(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function c(e,t){if("object"!=typeof e||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){let r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=({[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}})[t]});let r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){let[e,i,s]=arguments;return n.apply(this,[e||null]).then(e=>{if(t.version<53&&!i)try{e.forEach(e=>{e.type=r[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach((t,n)=>{e.set(n,Object.assign({},t,{type:r[t.type]||t.type}))})}return e}).then(i,s)}}function h(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;let t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){let e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});let r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){let e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function u(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;let t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){let e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),s.wrapPeerConnectionEvent(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function d(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){s.deprecated("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function p(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function f(e){if(!("object"==typeof e&&e.RTCPeerConnection))return;let t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]);let r=(e=[...e]).length>0;r&&e.forEach(e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw RangeError("max_framerate must be >= 0.0")});let n=t.apply(this,arguments);if(r){let{sender:t}=n,r=t.getParameters();"encodings"in r&&(1!==r.encodings.length||0!==Object.keys(r.encodings[0]).length)||(r.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(r).then(()=>{delete t.sendEncodings}).catch(()=>{delete t.sendEncodings})))}return n})}function g(e){if(!("object"==typeof e&&e.RTCRtpSender))return;let t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){let e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function m(e){if(!("object"==typeof e&&e.RTCPeerConnection))return;let t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function y(e){if(!("object"==typeof e&&e.RTCPeerConnection))return;let t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}},{"../utils":"7Ny3a","./getusermedia":"3ocOb","./getdisplaymedia":"aU1JL","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"3ocOb":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"shimGetUserMedia",()=>o);var s=e("../utils");"use strict";function o(e,t){let r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,n){s.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){let e=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},t=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(r){return"object"==typeof r&&"object"==typeof r.audio&&(e((r=JSON.parse(JSON.stringify(r))).audio,"autoGainControl","mozAutoGainControl"),e(r.audio,"noiseSuppression","mozNoiseSuppression")),t(r)},n&&n.prototype.getSettings){let t=n.prototype.getSettings;n.prototype.getSettings=function(){let r=t.apply(this,arguments);return e(r,"mozAutoGainControl","autoGainControl"),e(r,"mozNoiseSuppression","noiseSuppression"),r}}if(n&&n.prototype.applyConstraints){let t=n.prototype.applyConstraints;n.prototype.applyConstraints=function(r){return"audio"===this.kind&&"object"==typeof r&&(e(r=JSON.parse(JSON.stringify(r)),"autoGainControl","mozAutoGainControl"),e(r,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[r])}}}}},{"../utils":"7Ny3a","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],aU1JL:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");"use strict";function s(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){let e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}i.defineInteropFlag(r),i.export(r,"shimGetDisplayMedia",()=>s)},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],f5d5Y:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"shimLocalStreamsAPI",()=>o),i.export(r,"shimRemoteStreamsAPI",()=>a),i.export(r,"shimCallbacksAPI",()=>l),i.export(r,"shimGetUserMedia",()=>c),i.export(r,"shimConstraints",()=>h),i.export(r,"shimRTCIceServerUrls",()=>u),i.export(r,"shimTrackEventTransceiver",()=>d),i.export(r,"shimCreateOfferLegacy",()=>p),i.export(r,"shimAudioContext",()=>f);var s=e("../utils");"use strict";function o(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){let t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(r=>t.call(this,r,e)),e.getVideoTracks().forEach(r=>t.call(this,r,e))},e.RTCPeerConnection.prototype.addTrack=function(e,...r){return r&&r.forEach(e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);let t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);let r=e.getTracks();this.getSenders().forEach(e=>{r.includes(e.track)&&this.removeTrack(e)})})}}function a(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);let t=new Event("addstream");t.stream=e,this.dispatchEvent(t)})})}});let t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){let e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);let r=new Event("addstream");r.stream=t,e.dispatchEvent(r)})}),t.apply(e,arguments)}}}function l(e){if("object"!=typeof e||!e.RTCPeerConnection)return;let t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){let n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){let r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i};let a=function(e,t,r){let n=i.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n};t.setLocalDescription=a,t.setRemoteDescription=a=function(e,t,r){let n=s.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.addIceCandidate=function(e,t,r){let n=o.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n}}function c(e){let t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){let e=t.mediaDevices,r=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>r(h(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(e,r,n){t.mediaDevices.getUserMedia(e).then(r,n)}).bind(t))}function h(e){return e&&void 0!==e.video?Object.assign({},e,{video:s.compactObject(e.video)}):e}function u(e){if(!e.RTCPeerConnection)return;let t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){let t=[];for(let r=0;r<e.iceServers.length;r++){let n=e.iceServers[r];void 0===n.urls&&n.url?(s.deprecated("RTCIceServer.url","RTCIceServer.urls"),(n=JSON.parse(JSON.stringify(n))).urls=n.url,delete n.url,t.push(n)):t.push(e.iceServers[r])}e.iceServers=t}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function d(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function p(e){let t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);let t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);let r=this.getTransceivers().find(e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function f(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}},{"../utils":"7Ny3a","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],cADZX:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"shimRTCIceCandidate",()=>l),i.export(r,"shimRTCIceCandidateRelayProtocol",()=>c),i.export(r,"shimMaxMessageSize",()=>h),i.export(r,"shimSendThrowTypeError",()=>u),i.export(r,"shimConnectionState",()=>d),i.export(r,"removeExtmapAllowMixed",()=>p),i.export(r,"shimAddIceCandidateNullOrEmpty",()=>f),i.export(r,"shimParameterlessSetLocalDescription",()=>g);"use strict";var s=e("sdp"),o=i.interopDefault(s),a=e("./utils");function l(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;let t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substring(2)),e.candidate&&e.candidate.length){let r=new t(e),n=o.default.parseCandidate(e.candidate);for(let e in n)e in r||Object.defineProperty(r,e,{value:n[e]});return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,a.wrapPeerConnectionEvent(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function c(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||a.wrapPeerConnectionEvent(e,"icecandidate",e=>{if(e.candidate){let t=o.default.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol=({0:"tls",1:"tcp",2:"udp"})[t.priority>>24])}return e})}function h(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});let r=function(e){if(!e||!e.sdp)return!1;let t=o.default.splitSections(e.sdp);return t.shift(),t.some(e=>{let t=o.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})},n=function(e){let t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return -1;let r=parseInt(t[1],10);return r!=r?-1:r},i=function(e){let r=65536;return"firefox"===t.browser&&(r=t.version<57?-1===e?16384:0x7ffffff5:t.version<60?57===t.version?65535:65536:0x7ffffff5),r},s=function(e,r){let n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);let i=o.default.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?n=parseInt(i[0].substring(19),10):"firefox"===t.browser&&-1!==r&&(n=0x7ffffff5),n},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){let{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){let e,t=n(arguments[0]),r=i(t),o=s(arguments[0],t);e=0===r&&0===o?Number.POSITIVE_INFINITY:0===r||0===o?Math.max(r,o):Math.min(r,o);let a={};Object.defineProperty(a,"maxMessageSize",{get:()=>e}),this._sctp=a}return a.apply(this,arguments)}}function u(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){let r=e.send;e.send=function(){let n=arguments[0],i=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments)}}let r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){let e=r.apply(this,arguments);return t(e,this),e},a.wrapPeerConnectionEvent(e,"datachannel",e=>(t(e.channel,e.target),e))}function d(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;let t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return({completed:"connected",checking:"connecting"})[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{let r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{let t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;let r=new Event("connectionstatechange",e);t.dispatchEvent(r)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function p(e,t){if(!e.RTCPeerConnection||"chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t._safariVersion>=13.1)return;let r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){let r=t.sdp.split("\n").filter(e=>"a=extmap-allow-mixed"!==e.trim()).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return r.apply(this,arguments)}}function f(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;let r=e.RTCPeerConnection.prototype.addIceCandidate;r&&0!==r.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function g(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;let r=e.RTCPeerConnection.prototype.setLocalDescription;r&&0!==r.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return r.apply(this,arguments);if(!(e={type:e.type,sdp:e.sdp}).type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}return e.sdp||"offer"!==e.type&&"answer"!==e.type?r.apply(this,[e]):("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then(e=>r.apply(this,[e]))})}},{sdp:"7PVXR","./utils":"7Ny3a","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"7PVXR":[function(e,t,r,n){"use strict";let i={};i.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},i.localCName=i.generateIdentifier(),i.splitLines=function(e){return e.trim().split("\n").map(e=>e.trim())},i.splitSections=function(e){return e.split("\nm=").map((e,t)=>(t>0?"m="+e:e).trim()+"\r\n")},i.getDescription=function(e){let t=i.splitSections(e);return t&&t[0]},i.getMediaSections=function(e){let t=i.splitSections(e);return t.shift(),t},i.matchPrefix=function(e,t){return i.splitLines(e).filter(e=>0===e.indexOf(t))},i.parseCandidate=function(e){let t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let e=8;e<t.length;e+=2)switch(t[e]){case"raddr":r.relatedAddress=t[e+1];break;case"rport":r.relatedPort=parseInt(t[e+1],10);break;case"tcptype":r.tcpType=t[e+1];break;case"ufrag":r.ufrag=t[e+1],r.usernameFragment=t[e+1];break;default:void 0===r[t[e]]&&(r[t[e]]=t[e+1])}return r},i.writeCandidate=function(e){let t=[];t.push(e.foundation);let r=e.component;"rtp"===r?t.push(1):"rtcp"===r?t.push(2):t.push(r),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);let n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},i.parseIceOptions=function(e){return e.substring(14).split(" ")},i.parseRtpMap=function(e){let t=e.substring(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return r.name=(t=t[0].split("/"))[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},i.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);let r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},i.parseExtmap=function(e){let t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},i.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},i.parseFmtp=function(e){let t,r={},n=e.substring(e.indexOf(" ")+1).split(";");for(let e=0;e<n.length;e++)r[(t=n[e].trim().split("="))[0].trim()]=t[1];return r},i.writeFmtp=function(e){let t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){let n=[];Object.keys(e.parameters).forEach(t=>{void 0!==e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)}),t+="a=fmtp:"+r+" "+n.join(";")+"\r\n"}return t},i.parseRtcpFb=function(e){let t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},i.writeRtcpFb=function(e){let t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(e=>{t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},i.parseSsrcMedia=function(e){let t=e.indexOf(" "),r={ssrc:parseInt(e.substring(7,t),10)},n=e.indexOf(":",t);return n>-1?(r.attribute=e.substring(t+1,n),r.value=e.substring(n+1)):r.attribute=e.substring(t+1),r},i.parseSsrcGroup=function(e){let t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(e=>parseInt(e,10))}},i.getMid=function(e){let t=i.matchPrefix(e,"a=mid:")[0];if(t)return t.substring(6)},i.parseFingerprint=function(e){let t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},i.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:i.matchPrefix(e+t,"a=fingerprint:").map(i.parseFingerprint)}},i.writeDtlsParameters=function(e,t){let r="a=setup:"+t+"\r\n";return e.fingerprints.forEach(e=>{r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),r},i.parseCryptoLine=function(e){let t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},i.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?i.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},i.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;let t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},i.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},i.getCryptoParameters=function(e,t){return i.matchPrefix(e+t,"a=crypto:").map(i.parseCryptoLine)},i.getIceParameters=function(e,t){let r=i.matchPrefix(e+t,"a=ice-ufrag:")[0],n=i.matchPrefix(e+t,"a=ice-pwd:")[0];return r&&n?{usernameFragment:r.substring(12),password:n.substring(10)}:null},i.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},i.parseRtpParameters=function(e){let t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=i.splitLines(e)[0].split(" ");t.profile=r[2];for(let n=3;n<r.length;n++){let s=r[n],o=i.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(o){let r=i.parseRtpMap(o),n=i.matchPrefix(e,"a=fmtp:"+s+" ");switch(r.parameters=n.length?i.parseFmtp(n[0]):{},r.rtcpFeedback=i.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(i.parseRtcpFb),t.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(r.name.toUpperCase())}}}i.matchPrefix(e,"a=extmap:").forEach(e=>{t.headerExtensions.push(i.parseExtmap(e))});let n=i.matchPrefix(e,"a=rtcp-fb:* ").map(i.parseRtcpFb);return t.codecs.forEach(e=>{n.forEach(t=>{e.rtcpFeedback.find(e=>e.type===t.type&&e.parameter===t.parameter)||e.rtcpFeedback.push(t)})}),t},i.writeRtpDescription=function(e,t){let r="";r+="m="+e+" ",r+=t.codecs.length>0?"9":"0",r+=" "+(t.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=t.codecs.map(e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(e=>{r+=i.writeRtpMap(e),r+=i.writeFmtp(e),r+=i.writeRtcpFb(e)});let n=0;return t.codecs.forEach(e=>{e.maxptime>n&&(n=e.maxptime)}),n>0&&(r+="a=maxptime:"+n+"\r\n"),t.headerExtensions&&t.headerExtensions.forEach(e=>{r+=i.writeExtmap(e)}),r},i.parseRtpEncodingParameters=function(e){let t,r=[],n=i.parseRtpParameters(e),s=-1!==n.fecMechanisms.indexOf("RED"),o=-1!==n.fecMechanisms.indexOf("ULPFEC"),a=i.matchPrefix(e,"a=ssrc:").map(e=>i.parseSsrcMedia(e)).filter(e=>"cname"===e.attribute),l=a.length>0&&a[0].ssrc,c=i.matchPrefix(e,"a=ssrc-group:FID").map(e=>e.substring(17).split(" ").map(e=>parseInt(e,10)));c.length>0&&c[0].length>1&&c[0][0]===l&&(t=c[0][1]),n.codecs.forEach(e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let n={ssrc:l,codecPayloadType:parseInt(e.parameters.apt,10)};l&&t&&(n.rtx={ssrc:t}),r.push(n),s&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:l,mechanism:o?"red+ulpfec":"red"},r.push(n))}}),0===r.length&&l&&r.push({ssrc:l});let h=i.matchPrefix(e,"b=");return h.length&&(h=0===h[0].indexOf("b=TIAS:")?parseInt(h[0].substring(7),10):0===h[0].indexOf("b=AS:")?950*parseInt(h[0].substring(5),10)-16e3:void 0,r.forEach(e=>{e.maxBitrate=h})),r},i.parseRtcpParameters=function(e){let t={},r=i.matchPrefix(e,"a=ssrc:").map(e=>i.parseSsrcMedia(e)).filter(e=>"cname"===e.attribute)[0];r&&(t.cname=r.value,t.ssrc=r.ssrc);let n=i.matchPrefix(e,"a=rtcp-rsize");return t.reducedSize=n.length>0,t.compound=0===n.length,t.mux=i.matchPrefix(e,"a=rtcp-mux").length>0,t},i.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},i.parseMsid=function(e){let t,r=i.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(t=r[0].substring(7).split(" "))[0],track:t[1]};let n=i.matchPrefix(e,"a=ssrc:").map(e=>i.parseSsrcMedia(e)).filter(e=>"msid"===e.attribute);if(n.length>0)return{stream:(t=n[0].value.split(" "))[0],track:t[1]}},i.parseSctpDescription=function(e){let t,r=i.parseMLine(e),n=i.matchPrefix(e,"a=max-message-size:");n.length>0&&(t=parseInt(n[0].substring(19),10)),isNaN(t)&&(t=65536);let s=i.matchPrefix(e,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:r.fmt,maxMessageSize:t};let o=i.matchPrefix(e,"a=sctpmap:");if(o.length>0){let e=o[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:t}}},i.writeSctpDescription=function(e,t){let r=[];return r="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&r.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),r.join("")},i.generateSessionId=function(){return Math.random().toString().substr(2,22)},i.writeSessionBoilerplate=function(e,t,r){return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||i.generateSessionId())+" "+(void 0!==t?t:2)+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},i.getDirection=function(e,t){let r=i.splitLines(e);for(let e=0;e<r.length;e++)switch(r[e]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[e].substring(2)}return t?i.getDirection(t):"sendrecv"},i.getKind=function(e){return i.splitLines(e)[0].split(" ")[0].substring(2)},i.isRejected=function(e){return"0"===e.split(" ",2)[1]},i.parseMLine=function(e){let t=i.splitLines(e)[0].substring(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},i.parseOLine=function(e){let t=i.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},i.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;let t=i.splitLines(e);for(let e=0;e<t.length;e++)if(t[e].length<2||"="!==t[e].charAt(1))return!1;return!0},t.exports=i},{}],"99oOE":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"encode",()=>s.encode),i.export(r,"decode",()=>o.decode),i.export(r,"decodeMulti",()=>o.decodeMulti),i.export(r,"decodeAsync",()=>a.decodeAsync),i.export(r,"decodeArrayStream",()=>a.decodeArrayStream),i.export(r,"decodeMultiStream",()=>a.decodeMultiStream),i.export(r,"decodeStream",()=>a.decodeStream),i.export(r,"Decoder",()=>l.Decoder),i.export(r,"DecodeError",()=>c.DecodeError),i.export(r,"DataViewIndexOutOfBoundsError",()=>l.DataViewIndexOutOfBoundsError),i.export(r,"Encoder",()=>h.Encoder),i.export(r,"ExtensionCodec",()=>u.ExtensionCodec),i.export(r,"ExtData",()=>d.ExtData),i.export(r,"EXT_TIMESTAMP",()=>p.EXT_TIMESTAMP),i.export(r,"encodeDateToTimeSpec",()=>p.encodeDateToTimeSpec),i.export(r,"encodeTimeSpecToTimestamp",()=>p.encodeTimeSpecToTimestamp),i.export(r,"decodeTimestampToTimeSpec",()=>p.decodeTimestampToTimeSpec),i.export(r,"encodeTimestampExtension",()=>p.encodeTimestampExtension),i.export(r,"decodeTimestampExtension",()=>p.decodeTimestampExtension);var s=e("./encode.mjs"),o=e("./decode.mjs"),a=e("./decodeAsync.mjs"),l=e("./Decoder.mjs"),c=e("./DecodeError.mjs"),h=e("./Encoder.mjs"),u=e("./ExtensionCodec.mjs"),d=e("./ExtData.mjs"),p=e("./timestamp.mjs")},{"./encode.mjs":!1,"./decode.mjs":!1,"./decodeAsync.mjs":"gxe7C","./Decoder.mjs":!1,"./DecodeError.mjs":!1,"./Encoder.mjs":"kEF0K","./ExtensionCodec.mjs":!1,"./ExtData.mjs":!1,"./timestamp.mjs":!1,"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],lMMie:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"defaultDecodeOptions",()=>o),i.export(r,"decode",()=>a),i.export(r,"decodeMulti",()=>l);var s=e("./Decoder.mjs"),o={};function a(e,t){return void 0===t&&(t=o),new(0,s.Decoder)(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decode(e)}function l(e,t){return void 0===t&&(t=o),new(0,s.Decoder)(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeMulti(e)}},{"./Decoder.mjs":"7eYL1","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"7eYL1":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"DataViewIndexOutOfBoundsError",()=>b),i.export(r,"Decoder",()=>C);var s=e("./utils/prettyByte.mjs"),o=e("./ExtensionCodec.mjs"),a=e("./utils/int.mjs"),l=e("./utils/utf8.mjs"),c=e("./utils/typedArrays.mjs"),h=e("./CachedKeyDecoder.mjs"),u=e("./DecodeError.mjs"),d=function(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var l=[s,a];if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(6===l[0]&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{r=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},p=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){var s,o,a;s=n,o=i,a=(t=e[r](t)).done,Promise.resolve(t.value).then(function(e){s({value:e,done:a})},o)})}}},f=function(e){return this instanceof f?(this.v=e,this):new f(e)},g=function(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){s.push([e,t,r,n])>1||a(e,t)})})}function a(e,t){try{var r;(r=i[e](t)).value instanceof f?Promise.resolve(r.value.v).then(l,c):h(s[0][2],r)}catch(e){h(s[0][3],e)}}function l(e){a("next",e)}function c(e){a("throw",e)}function h(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}},m=function(e){var t=typeof e;return"string"===t||"number"===t},y=new DataView(new ArrayBuffer(0)),w=new Uint8Array(y.buffer),b=function(){try{y.getInt8(0)}catch(e){return e.constructor}throw Error("never reached")}(),x=new b("Insufficient data"),v=new(0,h.CachedKeyDecoder),C=function(){function e(e,t,r,n,i,s,l,c){void 0===e&&(e=o.ExtensionCodec.defaultCodec),void 0===t&&(t=void 0),void 0===r&&(r=a.UINT32_MAX),void 0===n&&(n=a.UINT32_MAX),void 0===i&&(i=a.UINT32_MAX),void 0===s&&(s=a.UINT32_MAX),void 0===l&&(l=a.UINT32_MAX),void 0===c&&(c=v),this.extensionCodec=e,this.context=t,this.maxStrLength=r,this.maxBinLength=n,this.maxArrayLength=i,this.maxMapLength=s,this.maxExtLength=l,this.keyDecoder=c,this.totalPos=0,this.pos=0,this.view=y,this.bytes=w,this.headByte=-1,this.stack=[]}return e.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},e.prototype.setBuffer=function(e){this.bytes=(0,c.ensureUint8Array)(e),this.view=(0,c.createDataView)(this.bytes),this.pos=0},e.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),r=(0,c.ensureUint8Array)(e),n=new Uint8Array(t.length+r.length);n.set(t),n.set(r,t.length),this.setBuffer(n)}else this.setBuffer(e)},e.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},e.prototype.createExtraByteError=function(e){var t=this.view,r=this.pos;return RangeError("Extra ".concat(t.byteLength-r," of ").concat(t.byteLength," byte(s) found at buffer[").concat(e,"]"))},e.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},e.prototype.decodeMulti=function(e){return d(this,function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:if(!this.hasRemaining(1))return[3,3];return[4,this.doDecodeSync()];case 2:return t.sent(),[3,1];case 3:return[2]}})},e.prototype.decodeAsync=function(e){var t,r,n,i,o,a,l,c;return o=this,a=void 0,l=void 0,c=function(){var o,a,l,c,h,u,f;return d(this,function(d){switch(d.label){case 0:o=!1,d.label=1;case 1:d.trys.push([1,6,7,12]),t=p(e),d.label=2;case 2:return[4,t.next()];case 3:if((r=d.sent()).done)return[3,5];if(l=r.value,o)throw this.createExtraByteError(this.totalPos);this.appendBuffer(l);try{a=this.doDecodeSync(),o=!0}catch(e){if(!(e instanceof b))throw e}this.totalPos+=this.pos,d.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return n={error:d.sent()},[3,12];case 7:if(d.trys.push([7,,10,11]),!(r&&!r.done&&(i=t.return)))return[3,9];return[4,i.call(t)];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(n)throw n.error;return[7];case 11:return[7];case 12:if(o){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,a]}throw c=this,h=c.headByte,u=c.pos,f=c.totalPos,RangeError("Insufficient data in parsing ".concat((0,s.prettyByte)(h)," at ").concat(f," (").concat(u," in the current buffer)"))}})},new(l||(l=Promise))(function(e,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function n(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):((i=t.value)instanceof l?i:new l(function(e){e(i)})).then(r,n)}i((c=c.apply(o,a||[])).next())})},e.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},e.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},e.prototype.decodeMultiAsync=function(e,t){return g(this,arguments,function(){var r,n,i,s,o,a,l,c;return d(this,function(h){switch(h.label){case 0:r=t,n=-1,h.label=1;case 1:h.trys.push([1,13,14,19]),i=p(e),h.label=2;case 2:return[4,f(i.next())];case 3:if((s=h.sent()).done)return[3,12];if(o=s.value,t&&0===n)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o),r&&(n=this.readArraySize(),r=!1,this.complete()),h.label=4;case 4:h.trys.push([4,9,,10]),h.label=5;case 5:return[4,f(this.doDecodeSync())];case 6:return[4,h.sent()];case 7:if(h.sent(),0==--n)return[3,8];return[3,5];case 8:return[3,10];case 9:if(!((a=h.sent())instanceof b))throw a;return[3,10];case 10:this.totalPos+=this.pos,h.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return l={error:h.sent()},[3,19];case 14:if(h.trys.push([14,,17,18]),!(s&&!s.done&&(c=i.return)))return[3,16];return[4,f(c.call(i))];case 15:h.sent(),h.label=16;case 16:return[3,18];case 17:if(l)throw l.error;return[7];case 18:return[7];case 19:return[2]}})})},e.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){var r=e-128;if(0!==r){this.pushMapState(r),this.complete();continue}t={}}else if(e<160){var r=e-144;if(0!==r){this.pushArrayState(r),this.complete();continue}t=[]}else{var n=e-160;t=this.decodeUtf8String(n,0)}else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.readI64();else if(217===e){var n=this.lookU8();t=this.decodeUtf8String(n,1)}else if(218===e){var n=this.lookU16();t=this.decodeUtf8String(n,2)}else if(219===e){var n=this.lookU32();t=this.decodeUtf8String(n,4)}else if(220===e){var r=this.readU16();if(0!==r){this.pushArrayState(r),this.complete();continue}t=[]}else if(221===e){var r=this.readU32();if(0!==r){this.pushArrayState(r),this.complete();continue}t=[]}else if(222===e){var r=this.readU16();if(0!==r){this.pushMapState(r),this.complete();continue}t={}}else if(223===e){var r=this.readU32();if(0!==r){this.pushMapState(r),this.complete();continue}t={}}else if(196===e){var r=this.lookU8();t=this.decodeBinary(r,1)}else if(197===e){var r=this.lookU16();t=this.decodeBinary(r,2)}else if(198===e){var r=this.lookU32();t=this.decodeBinary(r,4)}else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e){var r=this.lookU8();t=this.decodeExtension(r,1)}else if(200===e){var r=this.lookU16();t=this.decodeExtension(r,2)}else if(201===e){var r=this.lookU32();t=this.decodeExtension(r,4)}else throw new(0,u.DecodeError)("Unrecognized type byte: ".concat((0,s.prettyByte)(e)));this.complete();for(var i=this.stack;i.length>0;){var o=i[i.length-1];if(0===o.type)if(o.array[o.position]=t,o.position++,o.position===o.size)i.pop(),t=o.array;else continue e;else if(1===o.type){if(!m(t))throw new(0,u.DecodeError)("The type of key must be string or number but "+typeof t);if("__proto__"===t)throw new(0,u.DecodeError)("The key __proto__ is not allowed");o.key=t,o.type=2;continue e}else if(o.map[o.key]=t,o.readCount++,o.readCount===o.size)i.pop(),t=o.map;else{o.key=null,o.type=1;continue e}}return t}},e.prototype.readHeadByte=function(){return -1===this.headByte&&(this.headByte=this.readU8()),this.headByte},e.prototype.complete=function(){this.headByte=-1},e.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new(0,u.DecodeError)("Unrecognized array type byte: ".concat((0,s.prettyByte)(e)))}},e.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new(0,u.DecodeError)("Max length exceeded: map length (".concat(e,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},e.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new(0,u.DecodeError)("Max length exceeded: array length (".concat(e,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:0,size:e,array:Array(e),position:0})},e.prototype.decodeUtf8String=function(e,t){if(e>this.maxStrLength)throw new(0,u.DecodeError)("Max length exceeded: UTF-8 byte length (".concat(e,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+t+e)throw x;var r,n,i=this.pos+t;return n=this.stateIsMapKey()&&(null==(r=this.keyDecoder)?void 0:r.canBeCached(e))?this.keyDecoder.decode(this.bytes,i,e):e>l.TEXT_DECODER_THRESHOLD?(0,l.utf8DecodeTD)(this.bytes,i,e):(0,l.utf8DecodeJs)(this.bytes,i,e),this.pos+=t+e,n},e.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},e.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new(0,u.DecodeError)("Max length exceeded: bin length (".concat(e,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(e+t))throw x;var r=this.pos+t,n=this.bytes.subarray(r,r+e);return this.pos+=t+e,n},e.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new(0,u.DecodeError)("Max length exceeded: ext length (".concat(e,") > maxExtLength (").concat(this.maxExtLength,")"));var r=this.view.getInt8(this.pos+t),n=this.decodeBinary(e,t+1);return this.extensionCodec.decode(n,r,this.context)},e.prototype.lookU8=function(){return this.view.getUint8(this.pos)},e.prototype.lookU16=function(){return this.view.getUint16(this.pos)},e.prototype.lookU32=function(){return this.view.getUint32(this.pos)},e.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},e.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},e.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},e.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},e.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},e.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},e.prototype.readU64=function(){var e=(0,a.getUint64)(this.view,this.pos);return this.pos+=8,e},e.prototype.readI64=function(){var e=(0,a.getInt64)(this.view,this.pos);return this.pos+=8,e},e.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},e.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},e}()},{"./utils/prettyByte.mjs":"8WM8m","./ExtensionCodec.mjs":"9LKT0","./utils/int.mjs":"eG0N3","./utils/utf8.mjs":"lEu6S","./utils/typedArrays.mjs":"1BNqS","./CachedKeyDecoder.mjs":"4KGiH","./DecodeError.mjs":"5uiqO","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"8WM8m":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");function s(e){return"".concat(e<0?"-":"","0x").concat(Math.abs(e).toString(16).padStart(2,"0"))}i.defineInteropFlag(r),i.export(r,"prettyByte",()=>s)},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"9LKT0":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"ExtensionCodec",()=>a);var s=e("./ExtData.mjs"),o=e("./timestamp.mjs"),a=function(){function e(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(o.timestampExtension)}return e.prototype.register=function(e){var t=e.type,r=e.encode,n=e.decode;if(t>=0)this.encoders[t]=r,this.decoders[t]=n;else{var i=1+t;this.builtInEncoders[i]=r,this.builtInDecoders[i]=n}},e.prototype.tryToEncode=function(e,t){for(var r=0;r<this.builtInEncoders.length;r++){var n=this.builtInEncoders[r];if(null!=n){var i=n(e,t);if(null!=i){var o=-1-r;return new(0,s.ExtData)(o,i)}}}for(var r=0;r<this.encoders.length;r++){var n=this.encoders[r];if(null!=n){var i=n(e,t);if(null!=i){var o=r;return new(0,s.ExtData)(o,i)}}}return e instanceof s.ExtData?e:null},e.prototype.decode=function(e,t,r){var n=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return n?n(e,t,r):new(0,s.ExtData)(t,e)},e.defaultCodec=new e,e}()},{"./ExtData.mjs":"5D4CO","./timestamp.mjs":"9Zlhl","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"5D4CO":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"ExtData",()=>s);var s=function(e,t){this.type=e,this.data=t}},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"9Zlhl":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"EXT_TIMESTAMP",()=>a),i.export(r,"encodeTimeSpecToTimestamp",()=>l),i.export(r,"encodeDateToTimeSpec",()=>c),i.export(r,"encodeTimestampExtension",()=>h),i.export(r,"decodeTimestampToTimeSpec",()=>u),i.export(r,"decodeTimestampExtension",()=>d),i.export(r,"timestampExtension",()=>p);var s=e("./DecodeError.mjs"),o=e("./utils/int.mjs"),a=-1;function l(e){var t=e.sec,r=e.nsec;if(t>=0&&r>=0&&t<=0x3ffffffff)if(0===r&&t<=0xffffffff){var n=new Uint8Array(4),i=new DataView(n.buffer);return i.setUint32(0,t),n}else{var s=t/0x100000000,n=new Uint8Array(8),i=new DataView(n.buffer);return i.setUint32(0,r<<2|3&s),i.setUint32(4,0|t),n}var n=new Uint8Array(12),i=new DataView(n.buffer);return i.setUint32(0,r),(0,o.setInt64)(i,4,t),n}function c(e){var t=e.getTime(),r=Math.floor(t/1e3),n=(t-1e3*r)*1e6,i=Math.floor(n/1e9);return{sec:r+i,nsec:n-1e9*i}}function h(e){return e instanceof Date?l(c(e)):null}function u(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:var r=t.getUint32(0),n=0;return{sec:r,nsec:0};case 8:var i=t.getUint32(0),r=(3&i)*0x100000000+t.getUint32(4),n=i>>>2;return{sec:r,nsec:n};case 12:var r=(0,o.getInt64)(t,4),n=t.getUint32(0);return{sec:r,nsec:n};default:throw new(0,s.DecodeError)("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(e.length))}}function d(e){var t=u(e);return new Date(1e3*t.sec+t.nsec/1e6)}var p={type:-1,encode:h,decode:d}},{"./DecodeError.mjs":"5uiqO","./utils/int.mjs":"eG0N3","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"5uiqO":[function(e,t,r,n){var i,s=e("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(r),s.export(r,"DecodeError",()=>a);var o=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e){function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,Object.create(t.prototype)),Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:t.name}),n}return o(t,e),t}(Error)},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],eG0N3:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"UINT32_MAX",()=>s),i.export(r,"setUint64",()=>o),i.export(r,"setInt64",()=>a),i.export(r,"getInt64",()=>l),i.export(r,"getUint64",()=>c);var s=0xffffffff;function o(e,t,r){e.setUint32(t,r/0x100000000),e.setUint32(t+4,r)}function a(e,t,r){var n=Math.floor(r/0x100000000);e.setUint32(t,n),e.setUint32(t+4,r)}function l(e,t){return 0x100000000*e.getInt32(t)+e.getUint32(t+4)}function c(e,t){return 0x100000000*e.getUint32(t)+e.getUint32(t+4)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],lEu6S:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"utf8Count",()=>a),i.export(r,"utf8EncodeJs",()=>l),i.export(r,"TEXT_ENCODER_THRESHOLD",()=>h),i.export(r,"utf8EncodeTE",()=>u),i.export(r,"utf8DecodeJs",()=>d),i.export(r,"TEXT_DECODER_THRESHOLD",()=>f),i.export(r,"utf8DecodeTD",()=>g);var s=e("./int.mjs"),o="undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;function a(e){for(var t=e.length,r=0,n=0;n<t;){var i=e.charCodeAt(n++);if((0xffffff80&i)==0){r++;continue}if((0xfffff800&i)==0)r+=2;else{if(i>=55296&&i<=56319&&n<t){var s=e.charCodeAt(n);(64512&s)==56320&&(++n,i=((1023&i)<<10)+(1023&s)+65536)}(0xffff0000&i)==0?r+=3:r+=4}}return r}function l(e,t,r){for(var n=e.length,i=r,s=0;s<n;){var o=e.charCodeAt(s++);if((0xffffff80&o)==0){t[i++]=o;continue}if((0xfffff800&o)==0)t[i++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<n){var a=e.charCodeAt(s);(64512&a)==56320&&(++s,o=((1023&o)<<10)+(1023&a)+65536)}(0xffff0000&o)==0?t[i++]=o>>12&15|224:(t[i++]=o>>18&7|240,t[i++]=o>>12&63|128),t[i++]=o>>6&63|128}t[i++]=63&o|128}}var c=o?new TextEncoder:void 0,h=o?0:s.UINT32_MAX,u=(null==c?void 0:c.encodeInto)?function(e,t,r){c.encodeInto(e,t.subarray(r))}:function(e,t,r){t.set(c.encode(e),r)};function d(e,t,r){for(var n=t,i=n+r,s=[],o="";n<i;){var a=e[n++];if((128&a)==0)s.push(a);else if((224&a)==192){var l=63&e[n++];s.push((31&a)<<6|l)}else if((240&a)==224){var l=63&e[n++],c=63&e[n++];s.push((31&a)<<12|l<<6|c)}else if((248&a)==240){var l=63&e[n++],c=63&e[n++],h=(7&a)<<18|l<<12|c<<6|63&e[n++];h>65535&&(h-=65536,s.push(h>>>10&1023|55296),h=56320|1023&h),s.push(h)}else s.push(a);s.length>=4096&&(o+=String.fromCharCode.apply(String,s),s.length=0)}return s.length>0&&(o+=String.fromCharCode.apply(String,s)),o}var p=o?new TextDecoder:null,f=o?0:s.UINT32_MAX;function g(e,t,r){var n=e.subarray(t,t+r);return p.decode(n)}},{"./int.mjs":"eG0N3","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"1BNqS":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");function s(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}function o(e){if(e instanceof ArrayBuffer)return new DataView(e);var t=s(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}i.defineInteropFlag(r),i.export(r,"ensureUint8Array",()=>s),i.export(r,"createDataView",()=>o)},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"4KGiH":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"CachedKeyDecoder",()=>o);var s=e("./utils/utf8.mjs"),o=function(){function e(e,t){void 0===e&&(e=16),void 0===t&&(t=16),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var r=0;r<this.maxKeyLength;r++)this.caches.push([])}return e.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},e.prototype.find=function(e,t,r){var n=this.caches[r-1];t:for(var i=0;i<n.length;i++){for(var s=n[i],o=s.bytes,a=0;a<r;a++)if(o[a]!==e[t+a])continue t;return s.str}return null},e.prototype.store=function(e,t){var r=this.caches[e.length-1],n={bytes:e,str:t};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=n:r.push(n)},e.prototype.decode=function(e,t,r){var n=this.find(e,t,r);if(null!=n)return this.hit++,n;this.miss++;var i=(0,s.utf8DecodeJs)(e,t,r),o=Uint8Array.prototype.slice.call(e,t,t+r);return this.store(o,i),i},e}()},{"./utils/utf8.mjs":"lEu6S","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],gxe7C:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"decodeAsync",()=>c),i.export(r,"decodeArrayStream",()=>h),i.export(r,"decodeMultiStream",()=>u),i.export(r,"decodeStream",()=>d);var s=e("./Decoder.mjs"),o=e("./utils/stream.mjs"),a=e("./decode.mjs"),l=function(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var l=[s,a];if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(6===l[0]&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{r=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}};function c(e,t){var r,n,i,c;return void 0===t&&(t=a.defaultDecodeOptions),r=this,n=void 0,i=void 0,c=function(){var r;return l(this,function(n){return r=(0,o.ensureAsyncIterable)(e),[2,new(0,s.Decoder)(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeAsync(r)]})},new(i||(i=Promise))(function(e,t){function s(e){try{a(c.next(e))}catch(e){t(e)}}function o(e){try{a(c.throw(e))}catch(e){t(e)}}function a(t){var r;t.done?e(t.value):((r=t.value)instanceof i?r:new i(function(e){e(r)})).then(s,o)}a((c=c.apply(r,n||[])).next())})}function h(e,t){void 0===t&&(t=a.defaultDecodeOptions);var r=(0,o.ensureAsyncIterable)(e);return new(0,s.Decoder)(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeArrayStream(r)}function u(e,t){void 0===t&&(t=a.defaultDecodeOptions);var r=(0,o.ensureAsyncIterable)(e);return new(0,s.Decoder)(t.extensionCodec,t.context,t.maxStrLength,t.maxBinLength,t.maxArrayLength,t.maxMapLength,t.maxExtLength).decodeStream(r)}function d(e,t){return void 0===t&&(t=a.defaultDecodeOptions),u(e,t)}},{"./Decoder.mjs":"7eYL1","./utils/stream.mjs":"61rHc","./decode.mjs":"lMMie","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"61rHc":[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"isAsyncIterable",()=>l),i.export(r,"asyncIterableFromStream",()=>c),i.export(r,"ensureAsyncIterable",()=>h);var s=function(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var l=[s,a];if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(6===l[0]&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{r=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},o=function(e){return this instanceof o?(this.v=e,this):new o(e)},a=function(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){s.push([e,t,r,n])>1||l(e,t)})})}function l(e,t){try{var r;(r=i[e](t)).value instanceof o?Promise.resolve(r.value.v).then(c,h):u(s[0][2],r)}catch(e){u(s[0][3],e)}}function c(e){l("next",e)}function h(e){l("throw",e)}function u(e,t){e(t),s.shift(),s.length&&l(s[0][0],s[0][1])}};function l(e){return null!=e[Symbol.asyncIterator]}function c(e){return a(this,arguments,function(){var t,r,n,i;return s(this,function(s){switch(s.label){case 0:t=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,o(t.read())];case 3:if(n=(r=s.sent()).done,i=r.value,!n)return[3,5];return[4,o(void 0)];case 4:return[2,s.sent()];case 5:if(null==i)throw Error("Assertion Failure: value must not be null nor undefined");return[4,o(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function h(e){return l(e)?e:c(e)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],kEF0K:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"DEFAULT_MAX_DEPTH",()=>c),i.export(r,"DEFAULT_INITIAL_BUFFER_SIZE",()=>h),i.export(r,"Encoder",()=>u);var s=e("./utils/utf8.mjs"),o=e("./ExtensionCodec.mjs"),a=e("./utils/int.mjs"),l=e("./utils/typedArrays.mjs"),c=100,h=2048,u=function(){function e(e,t,r,n,i,s,a,l){void 0===e&&(e=o.ExtensionCodec.defaultCodec),void 0===t&&(t=void 0),void 0===r&&(r=c),void 0===n&&(n=h),void 0===i&&(i=!1),void 0===s&&(s=!1),void 0===a&&(a=!1),void 0===l&&(l=!1),this.extensionCodec=e,this.context=t,this.maxDepth=r,this.initialBufferSize=n,this.sortKeys=i,this.forceFloat32=s,this.ignoreUndefined=a,this.forceIntegerToFloat=l,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return e.prototype.reinitializeState=function(){this.pos=0},e.prototype.encodeSharedRef=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)},e.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)},e.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw Error("Too deep objects in depth ".concat(t));null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)},e.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)},e.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),r=new Uint8Array(t),n=new DataView(t);r.set(this.bytes),this.view=n,this.bytes=r},e.prototype.encodeNil=function(){this.writeU8(192)},e.prototype.encodeBoolean=function(e){!1===e?this.writeU8(194):this.writeU8(195)},e.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<0x100000000?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-0x80000000?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},e.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<0x100000000)this.writeU8(219),this.writeU32(e);else throw Error("Too long string: ".concat(e," bytes in UTF-8"))},e.prototype.encodeString=function(e){if(e.length>s.TEXT_ENCODER_THRESHOLD){var t=(0,s.utf8Count)(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),(0,s.utf8EncodeTE)(e,this.bytes,this.pos),this.pos+=t}else{var t=(0,s.utf8Count)(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),(0,s.utf8EncodeJs)(e,this.bytes,this.pos),this.pos+=t}},e.prototype.encodeObject=function(e,t){var r=this.extensionCodec.tryToEncode(e,this.context);if(null!=r)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if("object"==typeof e)this.encodeMap(e,t);else throw Error("Unrecognized object: ".concat(Object.prototype.toString.apply(e)))},e.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<0x100000000)this.writeU8(198),this.writeU32(t);else throw Error("Too large binary: ".concat(t));var r=(0,l.ensureUint8Array)(e);this.writeU8a(r)},e.prototype.encodeArray=function(e,t){var r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<0x100000000)this.writeU8(221),this.writeU32(r);else throw Error("Too large array: ".concat(r));for(var n=0;n<e.length;n++){var i=e[n];this.doEncode(i,t+1)}},e.prototype.countWithoutUndefined=function(e,t){for(var r=0,n=0;n<t.length;n++)void 0!==e[t[n]]&&r++;return r},e.prototype.encodeMap=function(e,t){var r=Object.keys(e);this.sortKeys&&r.sort();var n=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(n<16)this.writeU8(128+n);else if(n<65536)this.writeU8(222),this.writeU16(n);else if(n<0x100000000)this.writeU8(223),this.writeU32(n);else throw Error("Too large map object: ".concat(n));for(var i=0;i<r.length;i++){var s=r[i],o=e[s];this.ignoreUndefined&&void 0===o||(this.encodeString(s),this.doEncode(o,t+1))}},e.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<0x100000000)this.writeU8(201),this.writeU32(t);else throw Error("Too large extension object: ".concat(t));this.writeI8(e.type),this.writeU8a(e.data)},e.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},e.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},e.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},e.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},e.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},e.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},e.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},e.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},e.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},e.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),(0,a.setUint64)(this.view,this.pos,e),this.pos+=8},e.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),(0,a.setInt64)(this.view,this.pos,e),this.pos+=8},e}()},{"./utils/utf8.mjs":"lEu6S","./ExtensionCodec.mjs":"9LKT0","./utils/int.mjs":"eG0N3","./utils/typedArrays.mjs":"1BNqS","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],imzZk:[function(e,t,r,n){var i=e("@parcel/transformer-js/src/esmodule-helpers.js");i.defineInteropFlag(r),i.export(r,"debug",()=>l),i.export(r,"enableDebug",()=>c),i.export(r,"disableDebug",()=>h),i.export(r,"disableSpecificDebug",()=>u);var s=e("debug"),o=i.interopDefault(s);function a(){try{return window.localStorage}catch{return null}}let l={api:{awarenessManager:(0,o.default)("api:awarenessManager"),general:(0,o.default)("api:general"),streamHandler:(0,o.default)("api:streamHandler")},components:{chat:(0,o.default)("components:chat"),checks:(0,o.default)("components:checks"),footer:(0,o.default)("components:footer"),logger:(0,o.default)("components:logger"),module:(0,o.default)("components:module"),modules:(0,o.default)("components:modules"),settings:(0,o.default)("components:settings"),userMenu:(0,o.default)("components:userMenu")},settings:{communication:(0,o.default)("settings:communication"),editor:(0,o.default)("settings:editor"),main:(0,o.default)("settings:main"),members:(0,o.default)("settings:members"),module:(0,o.default)("settings:module"),moduleConfigForm:(0,o.default)("settings:moduleConfigForm"),modules:(0,o.default)("settings:modules"),modulesExplorer:(0,o.default)("settings:modulesExplorer"),share:(0,o.default)("settings:share"),stations:(0,o.default)("settings:stations")},ts:{database:(0,o.default)("ts:database"),edrysWebrtcProvider:(0,o.default)("ts:edrysWebrtcProvider"),edrysWebsocketProvider:(0,o.default)("ts:edrysWebsocketProvider"),peer:(0,o.default)("ts:peer"),utils:(0,o.default)("ts:utils")},views:{classroom:(0,o.default)("views:classroom"),deploy:(0,o.default)("views:deploy"),index:(0,o.default)("views:index")},edrysModule:(0,o.default)("edrysModule")},c=e=>{o.default.enable(e);let t=a();t&&(t.debug=e)},h=()=>{o.default.disable();let e=a();e&&e.removeItem("debug")},u=e=>{let t=a();if(!t)return;let r=t.debug||"";if(!r)return;let n=r.split(",").map(e=>e.trim()).filter(e=>e),i=e.split(",").map(e=>e.trim()).filter(e=>e),s=n.filter(e=>!i.some(t=>{if(t.endsWith("*")){let r=t.slice(0,-1);return e.startsWith(r)}return e===t})).join(",");s?c(s):h()},d=a();d&&d.debug&&o.default.enable(d.debug),"undefined"!=typeof window&&(window.edrysDebug=c,window.edrysDisableDebug=h,window.edrysDisableSpecificDebug=u,window.edrysDebugHelp=()=>{console.log("=== Edrys Debug Help ==="),console.log(""),console.log('\uD83D\uDEA8 IMPORTANT: Set your browser console to "Verbose" level!'),console.log("   Chrome: Console Settings (gear icon)  Log level  Verbose"),console.log("   Firefox: Console Settings  Show all messages"),console.log(""),console.log("Usage:"),console.log('  edrysDebug("ts:database")                      // Enable database logs'),console.log('  edrysDebug("ts:*")                            // Enable all ts logs'),console.log('  edrysDebug("ts:database,ts:peer")            // Multiple namespaces'),console.log('  edrysDebug("*")                             // Enable ALL logs'),console.log("  edrysDisableDebug()                        // Disable all"),console.log('  edrysDisableSpecificDebug("ts:database")  // Disable specific namespace'),console.log(""),console.log("Available namespaces:"),console.log("  api:awarenessManager, api:general, api:streamHandler"),console.log("  ts:database, ts:edrysWebrtcProvider, ts:edrysWebsocketProvider, ts:peer, ts:utils"),console.log("  components:chat, components:checks, components:footer, components:logger"),console.log("  components:module, components:modules, components:settings, components:userMenu"),console.log("  settings:communication, settings:editor, settings:main"),console.log("  settings:members, settings:module, settings:moduleConfigForm"),console.log("  settings:modules, settings:modulesExplorer, settings:share, settings:stations"),console.log("  views:classroom, views:deploy, views:index"),console.log("  edrysModule"),console.log("");let e=a();console.log("Current setting:",e?.debug||"disabled")})},{debug:"20AQk","@parcel/transformer-js/src/esmodule-helpers.js":"j9EeU"}],"20AQk":[function(e,t,r,n){let i;r.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),e.splice(i,0,r)},r.save=function(e){try{e?r.storage.setItem("debug",e):r.storage.removeItem("debug")}catch(e){}},r.load=function(){let e;try{e=r.storage.getItem("debug")||r.storage.getItem("DEBUG")}catch(e){}return e},r.useColors=function(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},r.storage=function(){try{return localStorage}catch(e){}}(),i=!1,r.destroy=()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))},r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.log=console.debug||console.log||(()=>{}),t.exports=e("d9172905aa5ed6c")(r);let{formatters:s}=t.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},{d9172905aa5ed6c:"2HrzT"}],"2HrzT":[function(e,t,r,n){t.exports=function(t){function r(e){let t,i,s,o=null;function a(...e){if(!a.enabled)return;let n=Number(new Date);a.diff=n-(t||n),a.prev=t,a.curr=n,t=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(t,n)=>{if("%%"===t)return"%";i++;let s=r.formatters[n];if("function"==typeof s){let r=e[i];t=s.call(a,r),e.splice(i,1),i--}return t}),r.formatArgs.call(a,e),(a.log||r.log).apply(a,e)}return a.namespace=e,a.useColors=r.useColors(),a.color=r.selectColor(e),a.extend=n,a.destroy=r.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(i!==r.namespaces&&(i=r.namespaces,s=r.enabled(e)),s),set:e=>{o=e}}),"function"==typeof r.init&&r.init(a),a}function n(e,t){let n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function i(e,t){let r=0,n=0,i=-1,s=0;for(;r<e.length;)if(n<t.length&&(t[n]===e[r]||"*"===t[n]))"*"===t[n]?(i=n,s=r):r++,n++;else{if(-1===i)return!1;n=i+1,r=++s}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){let e=[...r.names,...r.skips.map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){for(let t of(r.save(e),r.namespaces=e,r.names=[],r.skips=[],("string"==typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean)))"-"===t[0]?r.skips.push(t.slice(1)):r.names.push(t)},r.enabled=function(e){for(let t of r.skips)if(i(e,t))return!1;for(let t of r.names)if(i(e,t))return!0;return!1},r.humanize=e("5c5c8c8b1996f88f"),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(e=>{r[e]=t[e]}),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return r.colors[Math.abs(t)%r.colors.length]},r.enable(r.load()),r}},{"5c5c8c8b1996f88f":"lk1iM"}],lk1iM:[function(e,t,r,n){function i(e,t,r,n){return Math.round(e/r)+" "+n+(t>=1.5*r?"s":"")}t.exports=function(e,t){t=t||{};var r,n,s,o,a=typeof e;if("string"===a&&e.length>0){var l=e;if(!((l=String(l)).length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(c){var h=parseFloat(c[1]);switch((c[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*h;case"weeks":case"week":case"w":return 6048e5*h;case"days":case"day":case"d":return 864e5*h;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*h;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*h;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:break}}}return}if("number"===a&&isFinite(e)){return t.long?(n=Math.abs(r=e))>=864e5?i(r,n,864e5,"day"):n>=36e5?i(r,n,36e5,"hour"):n>=6e4?i(r,n,6e4,"minute"):n>=1e3?i(r,n,1e3,"second"):r+" ms":(o=Math.abs(s=e))>=864e5?Math.round(s/864e5)+"d":o>=36e5?Math.round(s/36e5)+"h":o>=6e4?Math.round(s/6e4)+"m":o>=1e3?Math.round(s/1e3)+"s":s+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}]},["5Hf22"],"5Hf22","parcelRequiredcf9",{});